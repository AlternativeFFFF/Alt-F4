<!DOCTYPE html>
<html lang="nl" class="nl">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Alt-F4 #51 - The Fluidic Power Experiment</title>
	<!-- Meta -->
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v4.1.1">
<meta property="og:title" content="Alt-F4 #51 - The Fluidic Power Experiment">
<meta name="author" content="stringweasel">
<meta property="og:locale" content="en">
<meta name="description" content="For issue #51 of Alt-F4, long-time contributor and editor extraordinaire stringweasel delights us with a deep dive into the history of mods trying to make Factorio power network management more realistic. All of them have their own issues and trade-offs, which is why he then introduces his own take at this age-old problem, with great results! The Fluidic Power Experiment stringweasel Ever since my education in Electronic Engineering, I’ve seen the flow of electricity everywhere I look. The backwards-travelling wave of cars inching forward in traffic is the movement of electrons to my eyes. Even more interesting is how similar the flow of electricity is to the movement of fluids. When I flush the toilet and it creates a whirlpool, I see an inductor being charged up by a capacitor. When I suddenly close a tap and I hear the water hammering in the pipes I see an inductor’s voltage spike, which is used for boost converters. Wouldn’t it be cool to have this realistic behaviour of electricity in Factorio? Why is it hard? First, in vanilla Factorio, electricity behaves ideally - meaning there is no resistance in the wires. Your electrical grid can transmit infite power over infinite distances indefinitely. It’s almost like they strung cryogenically cooled super-conductors to cheap wooden poles. This works very well for the goals and constraints of the game and fits most play-styles perfectly. However, there’s always been a few players looking for more of a challenge, wondering if electricity could be made more realistic. Players who want to have to use transformers to avoid some kind of voltage drop over distance. However, recreating more realistic electricity behaviors is (arguably) out of scope for vanilla Factorio and will likely never happen - so it’s up to mods to fill this slightly sadistic niche. In Factorio, mods can only modify predetermined aspects of the game, and the options available for electricity are very limited. Therefore modders have come up with some interesting workarounds. One of the main problems is that once power poles are connected by copper wire, the game will automatically transfer electricity internally, which cannot be manipulated by mods. The only real access to the power network is to artificially supply or drain electricity using an Electric Energy Interface (henceforth called EEI), but that doesn’t change how the power is transferred. One possibility is to remove the copper cables from power poles so the game won’t automatically transfer electricity, but removing the visual cable connection makes the power poles look odd. It also means that the mod has to calculate the power distribution itself, instead of letting the game do that behind the scenes. This is a big problem, as calculations done by a mod will always be orders of magnitude slower than the game engine doing the same. This is why the Factorio developer Rseding91 had the following to say a few years ago after someone asked for a mod to implement voltage drop. [Voltage is] not the only thing you’re going to be worrying about dropping. Your UPS will TANK once you build more than a few of anything if you used such a mod :P — Rseding91, Factorio Developer Even though a mod that simulates realistic electricity won’t ever be nearly as performant as the vanilla Factorio electricity system, it doesn’t mean it’s doomed to be unplayable. Mods have found beautiful ways around all kinds of obstacles, including these limitations, and have created all kinds of great gameplay mechanics once thought to be unrealistic. A Short History of Electricity Overhauls One of the first power overhaul mods was probably Flow Network - made in the timeframe of Factorio 0.13. In a nutshell, a custom invisible accumulator is placed underneath every power pole, creating a composite entity, which is a trick very commonly used in mods. The copper wire is then removed and replaced with red circuit wire to stop the vanilla electricity transfer, but still visualizes the power pole connection. Energy is then distributed manually between these hidden accumulators with a custom script. Unfortunately, as previously mentioned, this is very slow, as all electricity calculations are done in the mod and not handled by Factorio itself. It does, however, have the advantage of being very customizable. Example of FlowNetwork power distribution showing a power pole’s voltage, the current flowing through the pole, and the voltage drop at that pole. Another attempt came around for Factorio 0.15 called High Voltage. This is quite an interesting mod with a lot of moving parts. Electricity is distributed at either a high or regular voltage, where the transformers and other equipment are either accumulators or EEIs. The high voltage power distribution is then calculated manually with custom formulas - very similar to what Flow Network did. This allowed the author to introduce interesting mechanics like transformers requiring time to “spin up”. Regular voltage on the other hand simply powers your machines and is distributed using copper wire, just like in vanilla, meaning no modding calculations are required. However, the author did introduce a type of voltage drop over distance which only required a calculation when a power pole is placed. If the placed power pole is too far away from the transformer then it won’t be able to power any machines. What happens is that the power pole is silently replaced with a pole with a supply distance of zero, which means the pole will still be connected to power, but that it cannot transmit that power to any machines. Quite a brilliant solution. High Voltage power distribution showing power poles disabling when too far from transformer. It also shows an overlay (blue and red lines) when selecting a power pole - very similar to Fluidic Power Both of these mods were very performance heavy and would very likely not scale with big factories - and they were also never updated to newer Factorio versions. In my opinion, the best modern solution is likely Power Overload by Xorimuth. Here, the goal is to the split the power grid into seperate sub-networks using transformers. There is no real change to power going through a transformer, and the transfer of power through it is calculated by the mod itself. If a given sub-network has a power pole drawing more power than it can handle, it has a chance to explode! What makes this mod amazing is how clean it looks and feels with all the copper connections still showing. This is because most of the required components like EEIs that the author requires for power manipulation is on a completely different surface - all connected by transdimensional copper wires! Power Overload power distribution through a transformer that looks like a power switch A final honourable mention would be Electric Transformators, which I stumbled across a month or so after Fluidic Power’s release. This has a similar approach to Power Overload, but without the exploding power poles, which means it doesn’t punish not using the transformers. It did, however, find an interesting way to have transformers that don’t require the mod to make any power calculations. Each transformer is a composite entity with a boiler that creates a fluid from electricity, and then a generator that turns that fluid back into electricity. This means the electric networks are disconnected, but calculations between the networks are still done by the (much more performant) game engine. Electric Transformators power distribution through a cool looking transformer. These mods are all brilliant in their own way and can create amazing gameplay. However, I was wondering if electricity could be even more realistic? Could it mimic fluids even more closely? And most importantly - can we use an existing game mechanic which will inherently limit the throughput of networks which don’t use transformers? What did I do differently? Luckily, Factorio does have built-in fluid simulation, which is very well optimized and runs on the game engine. This simulation manages the oil in your storage tanks and the steam in your nuclear power plants. It’s not perfect and can cause some headaches, but it works well enough. This fluid simulation is exactly what’s required to mimic electricity that flows like a fluid - so I set out to use it. After many hours of mucking about in the Factorio data stage, and struggling with fluidboxes and composite entities for way too long, I finally stumbled onto a working solution. I successfully converted electricity into a fluid - which I call the power fluid - and essentially turned all poles into pipes. Below is an example of a steam engine powering a radar using Fluidic Power, showing both what you will see using the mod (left) and what happens behind the scenes (right). JuxtaposeJS From left to right, the setup shows power generation, stepping up voltage, stepping down voltage, and power usage. The power fluid will flow to other poles like a fluid, just like water or any other fluid, and from there it will power your entities. The unit of this power fluid is in Joule (for example 10kJ), which means it is energy that’s being distributed through the poles. The unit could likely have been Volt or even Coulomb (as in electric charge), but using energy integrates easily with Factorio’s existing mechanics. This implementation does however require two types of poles, namely normal poles and source poles. The source poles are placed next to your power generators, and they create the power fluid. This is achieved by placing a tiny assembler underneath the pole that creates the fluid at the correct rate with a very specific power consumption. To power your machines you need normal power poles, which have tiny generators (like the steam engine) underneath them that turn the fluid back into electricity. This also allows the power fluid to flow through multiple poles to where it’s required, just like how you can chain steam engines together. It also means that I can limit how much power each pole can deliver to the machines surrounding it! Below is the pseudocode that ensures power poles have the correct characteristics. // Power production dictates the source pole's assembler power consumption power_production = (fluid_fuel_value * units_per_craft) / crafting_time // Power consumption dictates the normal pole's generator fluid usage rate power_consumption = fluid_fuel_value * fluid_usage_per_tick * 60 Next up are transformers, which play a vital role in a mod like this, because as we all know, fluids don’t travel very far at high throughput. In the real world, a transformer steps up the voltage for more efficient (read easier) power distribution. Fluidic Power does not have voltage to step up, but the required throughput can be reduced by simply converting the fluid energy to a larger unit. For example, “high voltage” can be emulated with the power fluid’s unit being 1MJ instead of 1kJ. This means that for the same amount of fluid flow, more energy will flow. What I really enjoy about this implementation is how brutally simple these transformers are. All the mods I mentioned had to manually calculate the power transfer over a transformer or create complex composite entities, whereas I simply had to create an assembling machine with a specific recipe. This recipe doesn’t change the total amount of energy, but converts it to a more/less dense form. The crafting time of this recipe, or how much fluid units it can transform, can then dictate the power input/output rating of the transformer! // Example Transformer Step-Up Recipe 1000 units of 1kJ fluid --&gt; 1 unit of 1MJ fluid // Transformer Power Rating power_rating = fluid_output_amount * fluid_output_unit / time_per_craft With a little fiddling, this resulted in some intuitive and fun gameplay. It’s designed so that only the lowest voltage can interact with your machines, like solar panels and assembling machines. Then, once the voltage is increased to aid distribution, the high voltage fluid can only travel through big power poles. These big power poles are also limited and cannot power any machines or accept any generated power. This is probably my favourite part of this implementation. It means that there is an inherent incentive to create a high voltage backbone throughout your base, and that everywhere you want to use power you need to use transformers. Example of main high voltage line (solid in-game overlay) with transformers stepping down the voltage to machines (dashed in-game overlay). This allows for simplistic power distribution. Finally, having power simulated as a fluid changes the design of the accumulators. It’s no longer a smart entity that only accepts surplus power, which only releases all its energy when it’s required. Instead, it’s a simple storage tank which acts like a big, dumb capacitor. It only accepts the low voltage power, which means your battery banks need plenty of transformers. It’s possible to create the same behaviour as vanilla accumulators with fun circuitry, but without circuitry they still function well enough, albeit a little inefficiently. In Conclusion All in all I was suprised and excited that I found an implementation that fulfilled most of my goals and inherently created the challenges and obstacles that I envisioned it to have. I didn’t have to introduce many artificial limitations for the player, which is a great bonus; it just works! I’m abusing some mechanics, which does introduce some weird quirks like accidentally mixing different voltages or not showing physical copper connections, but it’s still really fun to play. However, the real question is now: How performant is this mod? This mod requires way more fluid calculations than a vanilla game, and abuses some other mechanics. Can the highly optimized Factorio engine keep up, even though it’s been predicted that such a mod will tank your UPS? I will go into more detail about this next week. To end on a cliffhanger, what I found might surprise you. It definitely surprised me. Contributing As always, we’re looking for people that want to contribute to Alt-F4, be it by submitting an article or by helping with translation. If you have something interesting in mind that you want to share with the community in a polished way, this is the place to do it. If you’re not too sure about it we’ll gladly help by discussing content ideas and structure questions. If that sounds like something that’s up your alley, join the Discord to get started!">
<meta property="og:description" content="For issue #51 of Alt-F4, long-time contributor and editor extraordinaire stringweasel delights us with a deep dive into the history of mods trying to make Factorio power network management more realistic. All of them have their own issues and trade-offs, which is why he then introduces his own take at this age-old problem, with great results! The Fluidic Power Experiment stringweasel Ever since my education in Electronic Engineering, I’ve seen the flow of electricity everywhere I look. The backwards-travelling wave of cars inching forward in traffic is the movement of electrons to my eyes. Even more interesting is how similar the flow of electricity is to the movement of fluids. When I flush the toilet and it creates a whirlpool, I see an inductor being charged up by a capacitor. When I suddenly close a tap and I hear the water hammering in the pipes I see an inductor’s voltage spike, which is used for boost converters. Wouldn’t it be cool to have this realistic behaviour of electricity in Factorio? Why is it hard? First, in vanilla Factorio, electricity behaves ideally - meaning there is no resistance in the wires. Your electrical grid can transmit infite power over infinite distances indefinitely. It’s almost like they strung cryogenically cooled super-conductors to cheap wooden poles. This works very well for the goals and constraints of the game and fits most play-styles perfectly. However, there’s always been a few players looking for more of a challenge, wondering if electricity could be made more realistic. Players who want to have to use transformers to avoid some kind of voltage drop over distance. However, recreating more realistic electricity behaviors is (arguably) out of scope for vanilla Factorio and will likely never happen - so it’s up to mods to fill this slightly sadistic niche. In Factorio, mods can only modify predetermined aspects of the game, and the options available for electricity are very limited. Therefore modders have come up with some interesting workarounds. One of the main problems is that once power poles are connected by copper wire, the game will automatically transfer electricity internally, which cannot be manipulated by mods. The only real access to the power network is to artificially supply or drain electricity using an Electric Energy Interface (henceforth called EEI), but that doesn’t change how the power is transferred. One possibility is to remove the copper cables from power poles so the game won’t automatically transfer electricity, but removing the visual cable connection makes the power poles look odd. It also means that the mod has to calculate the power distribution itself, instead of letting the game do that behind the scenes. This is a big problem, as calculations done by a mod will always be orders of magnitude slower than the game engine doing the same. This is why the Factorio developer Rseding91 had the following to say a few years ago after someone asked for a mod to implement voltage drop. [Voltage is] not the only thing you’re going to be worrying about dropping. Your UPS will TANK once you build more than a few of anything if you used such a mod :P — Rseding91, Factorio Developer Even though a mod that simulates realistic electricity won’t ever be nearly as performant as the vanilla Factorio electricity system, it doesn’t mean it’s doomed to be unplayable. Mods have found beautiful ways around all kinds of obstacles, including these limitations, and have created all kinds of great gameplay mechanics once thought to be unrealistic. A Short History of Electricity Overhauls One of the first power overhaul mods was probably Flow Network - made in the timeframe of Factorio 0.13. In a nutshell, a custom invisible accumulator is placed underneath every power pole, creating a composite entity, which is a trick very commonly used in mods. The copper wire is then removed and replaced with red circuit wire to stop the vanilla electricity transfer, but still visualizes the power pole connection. Energy is then distributed manually between these hidden accumulators with a custom script. Unfortunately, as previously mentioned, this is very slow, as all electricity calculations are done in the mod and not handled by Factorio itself. It does, however, have the advantage of being very customizable. Example of FlowNetwork power distribution showing a power pole’s voltage, the current flowing through the pole, and the voltage drop at that pole. Another attempt came around for Factorio 0.15 called High Voltage. This is quite an interesting mod with a lot of moving parts. Electricity is distributed at either a high or regular voltage, where the transformers and other equipment are either accumulators or EEIs. The high voltage power distribution is then calculated manually with custom formulas - very similar to what Flow Network did. This allowed the author to introduce interesting mechanics like transformers requiring time to “spin up”. Regular voltage on the other hand simply powers your machines and is distributed using copper wire, just like in vanilla, meaning no modding calculations are required. However, the author did introduce a type of voltage drop over distance which only required a calculation when a power pole is placed. If the placed power pole is too far away from the transformer then it won’t be able to power any machines. What happens is that the power pole is silently replaced with a pole with a supply distance of zero, which means the pole will still be connected to power, but that it cannot transmit that power to any machines. Quite a brilliant solution. High Voltage power distribution showing power poles disabling when too far from transformer. It also shows an overlay (blue and red lines) when selecting a power pole - very similar to Fluidic Power Both of these mods were very performance heavy and would very likely not scale with big factories - and they were also never updated to newer Factorio versions. In my opinion, the best modern solution is likely Power Overload by Xorimuth. Here, the goal is to the split the power grid into seperate sub-networks using transformers. There is no real change to power going through a transformer, and the transfer of power through it is calculated by the mod itself. If a given sub-network has a power pole drawing more power than it can handle, it has a chance to explode! What makes this mod amazing is how clean it looks and feels with all the copper connections still showing. This is because most of the required components like EEIs that the author requires for power manipulation is on a completely different surface - all connected by transdimensional copper wires! Power Overload power distribution through a transformer that looks like a power switch A final honourable mention would be Electric Transformators, which I stumbled across a month or so after Fluidic Power’s release. This has a similar approach to Power Overload, but without the exploding power poles, which means it doesn’t punish not using the transformers. It did, however, find an interesting way to have transformers that don’t require the mod to make any power calculations. Each transformer is a composite entity with a boiler that creates a fluid from electricity, and then a generator that turns that fluid back into electricity. This means the electric networks are disconnected, but calculations between the networks are still done by the (much more performant) game engine. Electric Transformators power distribution through a cool looking transformer. These mods are all brilliant in their own way and can create amazing gameplay. However, I was wondering if electricity could be even more realistic? Could it mimic fluids even more closely? And most importantly - can we use an existing game mechanic which will inherently limit the throughput of networks which don’t use transformers? What did I do differently? Luckily, Factorio does have built-in fluid simulation, which is very well optimized and runs on the game engine. This simulation manages the oil in your storage tanks and the steam in your nuclear power plants. It’s not perfect and can cause some headaches, but it works well enough. This fluid simulation is exactly what’s required to mimic electricity that flows like a fluid - so I set out to use it. After many hours of mucking about in the Factorio data stage, and struggling with fluidboxes and composite entities for way too long, I finally stumbled onto a working solution. I successfully converted electricity into a fluid - which I call the power fluid - and essentially turned all poles into pipes. Below is an example of a steam engine powering a radar using Fluidic Power, showing both what you will see using the mod (left) and what happens behind the scenes (right). JuxtaposeJS From left to right, the setup shows power generation, stepping up voltage, stepping down voltage, and power usage. The power fluid will flow to other poles like a fluid, just like water or any other fluid, and from there it will power your entities. The unit of this power fluid is in Joule (for example 10kJ), which means it is energy that’s being distributed through the poles. The unit could likely have been Volt or even Coulomb (as in electric charge), but using energy integrates easily with Factorio’s existing mechanics. This implementation does however require two types of poles, namely normal poles and source poles. The source poles are placed next to your power generators, and they create the power fluid. This is achieved by placing a tiny assembler underneath the pole that creates the fluid at the correct rate with a very specific power consumption. To power your machines you need normal power poles, which have tiny generators (like the steam engine) underneath them that turn the fluid back into electricity. This also allows the power fluid to flow through multiple poles to where it’s required, just like how you can chain steam engines together. It also means that I can limit how much power each pole can deliver to the machines surrounding it! Below is the pseudocode that ensures power poles have the correct characteristics. // Power production dictates the source pole's assembler power consumption power_production = (fluid_fuel_value * units_per_craft) / crafting_time // Power consumption dictates the normal pole's generator fluid usage rate power_consumption = fluid_fuel_value * fluid_usage_per_tick * 60 Next up are transformers, which play a vital role in a mod like this, because as we all know, fluids don’t travel very far at high throughput. In the real world, a transformer steps up the voltage for more efficient (read easier) power distribution. Fluidic Power does not have voltage to step up, but the required throughput can be reduced by simply converting the fluid energy to a larger unit. For example, “high voltage” can be emulated with the power fluid’s unit being 1MJ instead of 1kJ. This means that for the same amount of fluid flow, more energy will flow. What I really enjoy about this implementation is how brutally simple these transformers are. All the mods I mentioned had to manually calculate the power transfer over a transformer or create complex composite entities, whereas I simply had to create an assembling machine with a specific recipe. This recipe doesn’t change the total amount of energy, but converts it to a more/less dense form. The crafting time of this recipe, or how much fluid units it can transform, can then dictate the power input/output rating of the transformer! // Example Transformer Step-Up Recipe 1000 units of 1kJ fluid --&gt; 1 unit of 1MJ fluid // Transformer Power Rating power_rating = fluid_output_amount * fluid_output_unit / time_per_craft With a little fiddling, this resulted in some intuitive and fun gameplay. It’s designed so that only the lowest voltage can interact with your machines, like solar panels and assembling machines. Then, once the voltage is increased to aid distribution, the high voltage fluid can only travel through big power poles. These big power poles are also limited and cannot power any machines or accept any generated power. This is probably my favourite part of this implementation. It means that there is an inherent incentive to create a high voltage backbone throughout your base, and that everywhere you want to use power you need to use transformers. Example of main high voltage line (solid in-game overlay) with transformers stepping down the voltage to machines (dashed in-game overlay). This allows for simplistic power distribution. Finally, having power simulated as a fluid changes the design of the accumulators. It’s no longer a smart entity that only accepts surplus power, which only releases all its energy when it’s required. Instead, it’s a simple storage tank which acts like a big, dumb capacitor. It only accepts the low voltage power, which means your battery banks need plenty of transformers. It’s possible to create the same behaviour as vanilla accumulators with fun circuitry, but without circuitry they still function well enough, albeit a little inefficiently. In Conclusion All in all I was suprised and excited that I found an implementation that fulfilled most of my goals and inherently created the challenges and obstacles that I envisioned it to have. I didn’t have to introduce many artificial limitations for the player, which is a great bonus; it just works! I’m abusing some mechanics, which does introduce some weird quirks like accidentally mixing different voltages or not showing physical copper connections, but it’s still really fun to play. However, the real question is now: How performant is this mod? This mod requires way more fluid calculations than a vanilla game, and abuses some other mechanics. Can the highly optimized Factorio engine keep up, even though it’s been predicted that such a mod will tank your UPS? I will go into more detail about this next week. To end on a cliffhanger, what I found might surprise you. It definitely surprised me. Contributing As always, we’re looking for people that want to contribute to Alt-F4, be it by submitting an article or by helping with translation. If you have something interesting in mind that you want to share with the community in a polished way, this is the place to do it. If you’re not too sure about it we’ll gladly help by discussing content ideas and structure questions. If that sounds like something that’s up your alley, join the Discord to get started!">
<link rel="canonical" href="https://alt-f4.blog/nl/ALTF4-51/">
<meta property="og:url" content="https://alt-f4.blog/ALTF4-51/">
<meta property="og:site_name" content="Alternative Friday Factorio Fan Facts">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2021-11-05T00:00:00+00:00">
<script type="application/ld+json">
{"datePublished":"2021-11-05T00:00:00+00:00","author":{"@type":"Person","name":"stringweasel"},"description":"For issue #51 of Alt-F4, long-time contributor and editor extraordinaire stringweasel delights us with a deep dive into the history of mods trying to make Factorio power network management more realistic. All of them have their own issues and trade-offs, which is why he then introduces his own take at this age-old problem, with great results! The Fluidic Power Experiment stringweasel Ever since my education in Electronic Engineering, I’ve seen the flow of electricity everywhere I look. The backwards-travelling wave of cars inching forward in traffic is the movement of electrons to my eyes. Even more interesting is how similar the flow of electricity is to the movement of fluids. When I flush the toilet and it creates a whirlpool, I see an inductor being charged up by a capacitor. When I suddenly close a tap and I hear the water hammering in the pipes I see an inductor’s voltage spike, which is used for boost converters. Wouldn’t it be cool to have this realistic behaviour of electricity in Factorio? Why is it hard? First, in vanilla Factorio, electricity behaves ideally - meaning there is no resistance in the wires. Your electrical grid can transmit infite power over infinite distances indefinitely. It’s almost like they strung cryogenically cooled super-conductors to cheap wooden poles. This works very well for the goals and constraints of the game and fits most play-styles perfectly. However, there’s always been a few players looking for more of a challenge, wondering if electricity could be made more realistic. Players who want to have to use transformers to avoid some kind of voltage drop over distance. However, recreating more realistic electricity behaviors is (arguably) out of scope for vanilla Factorio and will likely never happen - so it’s up to mods to fill this slightly sadistic niche. In Factorio, mods can only modify predetermined aspects of the game, and the options available for electricity are very limited. Therefore modders have come up with some interesting workarounds. One of the main problems is that once power poles are connected by copper wire, the game will automatically transfer electricity internally, which cannot be manipulated by mods. The only real access to the power network is to artificially supply or drain electricity using an Electric Energy Interface (henceforth called EEI), but that doesn’t change how the power is transferred. One possibility is to remove the copper cables from power poles so the game won’t automatically transfer electricity, but removing the visual cable connection makes the power poles look odd. It also means that the mod has to calculate the power distribution itself, instead of letting the game do that behind the scenes. This is a big problem, as calculations done by a mod will always be orders of magnitude slower than the game engine doing the same. This is why the Factorio developer Rseding91 had the following to say a few years ago after someone asked for a mod to implement voltage drop. [Voltage is] not the only thing you’re going to be worrying about dropping. Your UPS will TANK once you build more than a few of anything if you used such a mod :P — Rseding91, Factorio Developer Even though a mod that simulates realistic electricity won’t ever be nearly as performant as the vanilla Factorio electricity system, it doesn’t mean it’s doomed to be unplayable. Mods have found beautiful ways around all kinds of obstacles, including these limitations, and have created all kinds of great gameplay mechanics once thought to be unrealistic. A Short History of Electricity Overhauls One of the first power overhaul mods was probably Flow Network - made in the timeframe of Factorio 0.13. In a nutshell, a custom invisible accumulator is placed underneath every power pole, creating a composite entity, which is a trick very commonly used in mods. The copper wire is then removed and replaced with red circuit wire to stop the vanilla electricity transfer, but still visualizes the power pole connection. Energy is then distributed manually between these hidden accumulators with a custom script. Unfortunately, as previously mentioned, this is very slow, as all electricity calculations are done in the mod and not handled by Factorio itself. It does, however, have the advantage of being very customizable. Example of FlowNetwork power distribution showing a power pole’s voltage, the current flowing through the pole, and the voltage drop at that pole. Another attempt came around for Factorio 0.15 called High Voltage. This is quite an interesting mod with a lot of moving parts. Electricity is distributed at either a high or regular voltage, where the transformers and other equipment are either accumulators or EEIs. The high voltage power distribution is then calculated manually with custom formulas - very similar to what Flow Network did. This allowed the author to introduce interesting mechanics like transformers requiring time to “spin up”. Regular voltage on the other hand simply powers your machines and is distributed using copper wire, just like in vanilla, meaning no modding calculations are required. However, the author did introduce a type of voltage drop over distance which only required a calculation when a power pole is placed. If the placed power pole is too far away from the transformer then it won’t be able to power any machines. What happens is that the power pole is silently replaced with a pole with a supply distance of zero, which means the pole will still be connected to power, but that it cannot transmit that power to any machines. Quite a brilliant solution. High Voltage power distribution showing power poles disabling when too far from transformer. It also shows an overlay (blue and red lines) when selecting a power pole - very similar to Fluidic Power Both of these mods were very performance heavy and would very likely not scale with big factories - and they were also never updated to newer Factorio versions. In my opinion, the best modern solution is likely Power Overload by Xorimuth. Here, the goal is to the split the power grid into seperate sub-networks using transformers. There is no real change to power going through a transformer, and the transfer of power through it is calculated by the mod itself. If a given sub-network has a power pole drawing more power than it can handle, it has a chance to explode! What makes this mod amazing is how clean it looks and feels with all the copper connections still showing. This is because most of the required components like EEIs that the author requires for power manipulation is on a completely different surface - all connected by transdimensional copper wires! Power Overload power distribution through a transformer that looks like a power switch A final honourable mention would be Electric Transformators, which I stumbled across a month or so after Fluidic Power’s release. This has a similar approach to Power Overload, but without the exploding power poles, which means it doesn’t punish not using the transformers. It did, however, find an interesting way to have transformers that don’t require the mod to make any power calculations. Each transformer is a composite entity with a boiler that creates a fluid from electricity, and then a generator that turns that fluid back into electricity. This means the electric networks are disconnected, but calculations between the networks are still done by the (much more performant) game engine. Electric Transformators power distribution through a cool looking transformer. These mods are all brilliant in their own way and can create amazing gameplay. However, I was wondering if electricity could be even more realistic? Could it mimic fluids even more closely? And most importantly - can we use an existing game mechanic which will inherently limit the throughput of networks which don’t use transformers? What did I do differently? Luckily, Factorio does have built-in fluid simulation, which is very well optimized and runs on the game engine. This simulation manages the oil in your storage tanks and the steam in your nuclear power plants. It’s not perfect and can cause some headaches, but it works well enough. This fluid simulation is exactly what’s required to mimic electricity that flows like a fluid - so I set out to use it. After many hours of mucking about in the Factorio data stage, and struggling with fluidboxes and composite entities for way too long, I finally stumbled onto a working solution. I successfully converted electricity into a fluid - which I call the power fluid - and essentially turned all poles into pipes. Below is an example of a steam engine powering a radar using Fluidic Power, showing both what you will see using the mod (left) and what happens behind the scenes (right). JuxtaposeJS From left to right, the setup shows power generation, stepping up voltage, stepping down voltage, and power usage. The power fluid will flow to other poles like a fluid, just like water or any other fluid, and from there it will power your entities. The unit of this power fluid is in Joule (for example 10kJ), which means it is energy that’s being distributed through the poles. The unit could likely have been Volt or even Coulomb (as in electric charge), but using energy integrates easily with Factorio’s existing mechanics. This implementation does however require two types of poles, namely normal poles and source poles. The source poles are placed next to your power generators, and they create the power fluid. This is achieved by placing a tiny assembler underneath the pole that creates the fluid at the correct rate with a very specific power consumption. To power your machines you need normal power poles, which have tiny generators (like the steam engine) underneath them that turn the fluid back into electricity. This also allows the power fluid to flow through multiple poles to where it’s required, just like how you can chain steam engines together. It also means that I can limit how much power each pole can deliver to the machines surrounding it! Below is the pseudocode that ensures power poles have the correct characteristics. // Power production dictates the source pole&#39;s assembler power consumption power_production = (fluid_fuel_value * units_per_craft) / crafting_time // Power consumption dictates the normal pole&#39;s generator fluid usage rate power_consumption = fluid_fuel_value * fluid_usage_per_tick * 60 Next up are transformers, which play a vital role in a mod like this, because as we all know, fluids don’t travel very far at high throughput. In the real world, a transformer steps up the voltage for more efficient (read easier) power distribution. Fluidic Power does not have voltage to step up, but the required throughput can be reduced by simply converting the fluid energy to a larger unit. For example, “high voltage” can be emulated with the power fluid’s unit being 1MJ instead of 1kJ. This means that for the same amount of fluid flow, more energy will flow. What I really enjoy about this implementation is how brutally simple these transformers are. All the mods I mentioned had to manually calculate the power transfer over a transformer or create complex composite entities, whereas I simply had to create an assembling machine with a specific recipe. This recipe doesn’t change the total amount of energy, but converts it to a more/less dense form. The crafting time of this recipe, or how much fluid units it can transform, can then dictate the power input/output rating of the transformer! // Example Transformer Step-Up Recipe 1000 units of 1kJ fluid --&gt; 1 unit of 1MJ fluid // Transformer Power Rating power_rating = fluid_output_amount * fluid_output_unit / time_per_craft With a little fiddling, this resulted in some intuitive and fun gameplay. It’s designed so that only the lowest voltage can interact with your machines, like solar panels and assembling machines. Then, once the voltage is increased to aid distribution, the high voltage fluid can only travel through big power poles. These big power poles are also limited and cannot power any machines or accept any generated power. This is probably my favourite part of this implementation. It means that there is an inherent incentive to create a high voltage backbone throughout your base, and that everywhere you want to use power you need to use transformers. Example of main high voltage line (solid in-game overlay) with transformers stepping down the voltage to machines (dashed in-game overlay). This allows for simplistic power distribution. Finally, having power simulated as a fluid changes the design of the accumulators. It’s no longer a smart entity that only accepts surplus power, which only releases all its energy when it’s required. Instead, it’s a simple storage tank which acts like a big, dumb capacitor. It only accepts the low voltage power, which means your battery banks need plenty of transformers. It’s possible to create the same behaviour as vanilla accumulators with fun circuitry, but without circuitry they still function well enough, albeit a little inefficiently. In Conclusion All in all I was suprised and excited that I found an implementation that fulfilled most of my goals and inherently created the challenges and obstacles that I envisioned it to have. I didn’t have to introduce many artificial limitations for the player, which is a great bonus; it just works! I’m abusing some mechanics, which does introduce some weird quirks like accidentally mixing different voltages or not showing physical copper connections, but it’s still really fun to play. However, the real question is now: How performant is this mod? This mod requires way more fluid calculations than a vanilla game, and abuses some other mechanics. Can the highly optimized Factorio engine keep up, even though it’s been predicted that such a mod will tank your UPS? I will go into more detail about this next week. To end on a cliffhanger, what I found might surprise you. It definitely surprised me. Contributing As always, we’re looking for people that want to contribute to Alt-F4, be it by submitting an article or by helping with translation. If you have something interesting in mind that you want to share with the community in a polished way, this is the place to do it. If you’re not too sure about it we’ll gladly help by discussing content ideas and structure questions. If that sounds like something that’s up your alley, join the Discord to get started!","url":"https://alt-f4.blog/ALTF4-51/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://alt-f4.blog/ALTF4-51/"},"headline":"Alt-F4 #51 - The Fluidic Power Experiment","dateModified":"2021-11-05T00:00:00+00:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
	

	
	  <meta property="og:image" content="https://alt-f4.blog/assets/ALTF4/51/thumbnail.jpg">
	  <meta name="twitter:image" content="https://alt-f4.blog/assets/ALTF4/51/thumbnail.jpg">
	

	<!-- CSS & fonts -->
	<link href="/nl/assets/GLOBAL/css/titillium-web.css" rel="stylesheet">
	<link rel="stylesheet" href="/nl/assets/GLOBAL/css/style.css">
	<link rel="stylesheet" href="/nl/assets/GLOBAL/css/spidertron.css">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.css" rel="stylesheet" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,900,400italic%7CSignika:700,300,400,600" rel="stylesheet" type="text/css">

	<link href="/nl/assets/GLOBAL/img/favicon.ico" rel="icon" type="image/x-icon">
	<link href="/nl/assets/GLOBAL/img/favicon.ico" rel="shortcut icon" type="image/x-icon">

	<!-- RSS -->
	<link href="/nl/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed">

	<script src="/assets/GLOBAL/js/spidertron.js"></script>
	<script src="/assets/GLOBAL/js/localization.js"></script>
	<!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
</head>


  <body>
    <!-- Navigation Bar -->
    <nav id="top" class="top-bar">
	<div class="top-bar-inner flex flex-space-between">
		<div class="sites links flex">
			<a href="/nl/" class="sites-current">
				<div id="navbar-logo" role="img" aria-label="Alt-F4 Logo"></div>
			</a>
			<a href="https://alt-f4.blog/nl/discord" class="">Discord</a>
			<span class="separator">|</span>
			<a href="https://factorio.com/blog" class="">FFF</a>
		</div>
		<div class="sites links flex hide-tag-line">
			<em>Het gemeenschap gedreven vervolg op de geliefde Factorio Friday Facts</em>
		</div>
		<div class="dropdown flex-end">
			<a class="button flex flex-space-between" href="#">
				<i class="fas fa-language"></i>
			</a>
			<div class="submenu">
				
				<a class="button lang-button" href="/../ALTF4-51/" onclick="setLanguage('en')">English</a>
				
				<a class="button lang-button" href="/cs/ALTF4-51/" onclick="setLanguage('cs')">Čeština</a>
				
				<a class="button lang-button" href="/de/ALTF4-51/" onclick="setLanguage('de')">Deutsch</a>
				
				<a class="button lang-button" href="/es/ALTF4-51/" onclick="setLanguage('es')">Español</a>
				
				<a class="button lang-button" href="/fr/ALTF4-51/" onclick="setLanguage('fr')">Français</a>
				
				<a class="button lang-button" href="/it/ALTF4-51/" onclick="setLanguage('it')">Italiano</a>
				
				<a class="button button-green lang-button" href="/nl/ALTF4-51/" onclick="setLanguage('nl')">Nederlands</a>
				
				<a class="button lang-button" href="/pt-br/ALTF4-51/" onclick="setLanguage('pt-br')">Português Brasileiro</a>
				
				<a class="button lang-button" href="/ru/ALTF4-51/" onclick="setLanguage('ru')">Русский</a>
				
				<a class="button lang-button" href="/zh/ALTF4-51/" onclick="setLanguage('zh')">中文</a>
				
			</div>
		</div>
	</div>
</nav>


    <!-- Main content -->
    <div class="container">
      <div class="container-inner">
        <div class="small-center"></div>
        <!-- Posts -->
        <article class="panel blog-post">
	
	<h1 class="page-title-headder">Alt-F4 #51 - The Fluidic Power Experiment  <author>05-11-2021</author>
</h1>
	
	
	<div class="panel-inset mb0">
		
Geschreven door <em>stringweasel</em>,



bewerkt door <em>Nanogamer7, Conor_, Therenas, Firerazer, MyNameIsTrez</em>








	</div>
	
	<div class="panel-inset-lighter mt0">
		<div class="post-header">
  <div class="panel">
    <div class="outer">
      <img class="inner" src="/assets/ALTF4/51/thumbnail.jpg" alt="" style="margin: 1px;">
    </div>
  </div>
  <details class="panel toc">
    <summary>
      <h2>Inhoudsopgave</h2>
    </summary>
    <div class="panel-inset mb0">
      <ul>
  <li>
<a href="#the-fluidic-power-experiment-stringweasel">The Fluidic Power Experiment <author>stringweasel</author></a>
    <ul>
      <li><a href="#why-is-it-hard">Why is it hard?</a></li>
      <li><a href="#a-short-history-of-electricity-overhauls">A Short History of Electricity Overhauls</a></li>
      <li><a href="#what-did-i-do-differently">What did I do differently?</a></li>
      <li><a href="#in-conclusion">In Conclusion</a></li>
    </ul>
  </li>
  <li><a href="#contributing">Contributing</a></li>
</ul>

    </div>
  </details>
</div>


<div class="center banner">
  <p>Jammer genoeg is dit artikel nog niet vertaald naar het Nederlands, daarom zie je het in het Engels. Als je wilt helpen om dit op te lossen kan je je aansluiten op de Alt-F4 <a href="https://alt-f4.blog/nl/discord/">Discord</a> om te beginnen. Bedankt!</p>

</div>



<p>For issue #51 of Alt-F4, long-time contributor and editor extraordinaire <em>stringweasel</em> delights us with a deep dive into the history of mods trying to make Factorio power network management more realistic. All of them have their own issues and trade-offs, which is why he then introduces his own take at this age-old problem, with great results!</p>
      <h2 id="the-fluidic-power-experiment-stringweasel">
        
        
            <a href="#the-fluidic-power-experiment-stringweasel" class="anchor" style="text-decoration: none;">The </a><a href="https://mods.factorio.com/mod/FluidicPower">Fluidic Power</a> Experiment <author>stringweasel</author>
          
        
      </h2>
    

<p>Ever since my education in Electronic Engineering, I’ve seen the flow of electricity everywhere I look. The backwards-travelling wave of cars inching forward in traffic is the movement of electrons to my eyes. Even more interesting is how similar the flow of electricity is to the movement of fluids. When I flush the toilet and it creates a whirlpool, I see an inductor being charged up by a capacitor. When I suddenly close a tap and I hear the water hammering in the pipes I see an inductor’s voltage spike, which is used for <a href="https://en.wikipedia.org/wiki/Boost_converter">boost converters</a>. Wouldn’t it be cool to have this realistic behaviour of electricity in Factorio?</p>
      <h3 id="why-is-it-hard">
        
        
            <a href="#why-is-it-hard" class="anchor" style="text-decoration: none;">Why is it hard?</a>
          
        
      </h3>
    

<p>First, in vanilla Factorio, electricity behaves ideally - meaning there is no resistance in the wires. Your electrical grid can transmit infite power over infinite distances indefinitely. It’s almost like they strung cryogenically cooled <a href="https://en.wikipedia.org/wiki/Superconductivity">super-conductors</a> to cheap wooden poles. This works very well for the goals and constraints of the game and fits most play-styles perfectly. However, there’s always been a few players looking for more of a challenge, wondering if electricity could be made <a href="https://forums.factorio.com/viewtopic.php?t=68761">more realistic</a>. Players who want to have to use transformers to avoid some kind of voltage drop over distance.</p>

<p>However, recreating more realistic electricity behaviors is (arguably) out of scope for vanilla Factorio and will <a href="https://forums.factorio.com/viewtopic.php?p=301132#p301132">likely never happen</a> - so it’s up to mods to fill this slightly sadistic niche. In Factorio, mods can only modify <a href="https://lua-api.factorio.com/next/">predetermined aspects</a> of the game, and the options available for electricity are very limited. Therefore modders have come up with some interesting workarounds. One of the main problems is that once power poles are connected by copper wire, the game will automatically transfer electricity internally, which cannot be manipulated by mods. The only real access to the power network is to artificially supply or drain electricity using an <a href="https://wiki.factorio.com/Prototype/ElectricEnergyInterface">Electric Energy Interface</a> (henceforth called <em>EEI</em>), but that doesn’t change <em>how</em> the power is transferred.</p>

<p>One possibility is to remove the copper cables from power poles so the game won’t automatically transfer electricity, but removing the visual cable connection makes the power poles look odd. It also means that the mod has to calculate the power distribution itself, instead of letting the game do that behind the scenes. This is a big problem, as calculations done by a mod will always be orders of magnitude slower than the game engine doing the same. This is why the Factorio developer <em>Rseding91</em> had the following to say a few years ago after someone asked for a mod to implement <a href="https://en.wikipedia.org/wiki/Voltage_drop">voltage drop</a>.</p>

<div class="m0 h100 quote">
  <blockquote cite="">
    <div class="panel-inset-lighter ">
    
      <div class="original">
        <p>[Voltage is] not the only thing you’re going to be worrying about dropping. Your UPS will TANK once you build more than a few of anything if you used such a mod :P</p>

      </div>
    </div>
    <author>
    — <a href="https://www.reddit.com/r/factorio/comments/6wwkhx/comment/dmcea1c/">Rseding91, Factorio Developer</a>
    </author>
  </blockquote>
</div>

<p>Even though a mod that simulates realistic electricity won’t ever be nearly as performant as the vanilla Factorio electricity system, it doesn’t mean it’s doomed to be unplayable. Mods have found beautiful ways around all kinds of obstacles, including these limitations, and have created all kinds of great gameplay mechanics once thought to be unrealistic.</p>
      <h3 id="a-short-history-of-electricity-overhauls">
        
        
            <a href="#a-short-history-of-electricity-overhauls" class="anchor" style="text-decoration: none;">A Short History of Electricity Overhauls</a>
          
        
      </h3>
    

<p>One of the first power overhaul mods was probably <a href="https://mods.factorio.com/mods/Simdezimon/flownetwork">Flow Network</a> - made in the timeframe of Factorio 0.13. In a nutshell, a custom invisible accumulator is placed underneath every power pole, creating a composite entity, which is a trick very commonly used in mods. The copper wire is then removed and replaced with red circuit wire to stop the vanilla electricity transfer, but still visualizes the power pole connection. Energy is then distributed manually between these hidden accumulators with a custom script. Unfortunately, as previously mentioned, this is very slow, as <em>all</em> electricity calculations are done in the mod and not handled by Factorio itself. It does, however, have the advantage of being very customizable.</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      <figure>
        <img src="https://media.alt-f4.blog/ALTF4/51/flow-network.jpg" alt="Example of FlowNetwork power distribution showing a power pole’s voltage, the current flowing through the pole, and the voltage drop at that pole." style="max-width: ; max-height:  ">
        
        <figcaption>Example of FlowNetwork power distribution showing a power pole’s voltage, the current flowing through the pole, and the voltage drop at that pole.</figcaption>
      </figure>
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>Another attempt came around for Factorio 0.15 called <a href="https://mods.factorio.com/mod/highvoltage">High Voltage</a>. This is quite an interesting mod with a lot of moving parts. Electricity is distributed at either a high or regular voltage, where the transformers and other equipment are either accumulators or EEIs. The high voltage power distribution is then calculated manually with custom formulas - very similar to what Flow Network did. This allowed the author to introduce interesting mechanics like transformers requiring time to “spin up”. Regular voltage on the other hand simply powers your machines and is distributed using copper wire, just like in vanilla, meaning no modding calculations are required. However, the author did introduce a type of voltage drop over distance which only required a calculation when a power pole is placed. If the placed power pole is too far away from the transformer then it won’t be able to power any machines. What happens is that the power pole is silently replaced with a pole with a <a href="https://wiki.factorio.com/Prototype/ElectricPole#supply_area_distance">supply distance</a> of zero, which means the pole will still be connected to power, but that it cannot transmit that power to any machines. Quite a brilliant solution.</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      <figure>
        <img src="https://media.alt-f4.blog/ALTF4/51/high-voltage.jpg" alt="High Voltage power distribution showing power poles disabling when too far from transformer. It also shows an overlay (blue and red lines) when selecting a power pole - very similar to Fluidic Power" style="max-width: ; max-height:  ">
        
        <figcaption>High Voltage power distribution showing power poles disabling when too far from transformer. It also shows an overlay (blue and red lines) when selecting a power pole - very similar to Fluidic Power</figcaption>
      </figure>
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>Both of these mods were very performance heavy and would very likely not scale with big factories - and they were also never updated to newer Factorio versions. In my opinion, the best modern solution is likely <a href="https://mods.factorio.com/mod/PowerOverload">Power Overload</a> by Xorimuth. Here, the goal is to the split the power grid into seperate sub-networks using transformers. There is no real change to power going through a transformer, and the transfer of power through it is calculated by the mod itself. If a given sub-network has a power pole drawing more power than it can handle, it has a chance to explode! What makes this mod amazing is how clean it looks and feels with all the copper connections still showing. This is because most of the required components like EEIs that the author requires for power manipulation is on a completely different surface - all connected by transdimensional copper wires!</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      <figure>
        <img src="https://media.alt-f4.blog/ALTF4/51/power-overload.jpg" alt="Power Overload power distribution through a transformer that looks like a power switch" style="max-width: ; max-height:  ">
        
        <figcaption>Power Overload power distribution through a transformer that looks like a power switch</figcaption>
      </figure>
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>A final honourable mention would be <a href="https://mods.factorio.com/mod/Electric_Transformators">Electric Transformators</a>, which I stumbled across a month or so after Fluidic Power’s release. This has a similar approach to Power Overload, but without the exploding power poles, which means it doesn’t punish <em>not</em> using the transformers. It did, however, find an interesting way to have transformers that don’t require the mod to make any power calculations. Each transformer is a composite entity with a boiler that creates a fluid from electricity, and then a generator that turns that fluid back into electricity. This means the electric networks are disconnected, but calculations between the networks are still done by the (much more performant) game engine.</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      <figure>
        <img src="https://media.alt-f4.blog/ALTF4/51/electric-transformators.jpg" alt="Electric Transformators power distribution through a cool looking transformer." style="max-width: ; max-height:  ">
        
        <figcaption>Electric Transformators power distribution through a cool looking transformer.</figcaption>
      </figure>
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>These mods are all brilliant in their own way and can create amazing gameplay. However, I was wondering if electricity could be even more realistic? Could it mimic fluids even more closely? And most importantly - can we use an existing game mechanic which will inherently limit the throughput of networks which don’t use transformers?</p>
      <h3 id="what-did-i-do-differently">
        
        
            <a href="#what-did-i-do-differently" class="anchor" style="text-decoration: none;">What did I do differently?</a>
          
        
      </h3>
    

<p>Luckily, Factorio does have built-in fluid simulation, which is very well optimized and runs on the game engine. This simulation manages the oil in your storage tanks and the steam in your nuclear power plants. It’s <a href="https://factorio.com/blog/post/fff-260">not perfect</a> and can cause some headaches, but it works well enough. This fluid simulation is exactly what’s required to mimic electricity that flows like a fluid - so I set out to use it.</p>

<p>After many hours of mucking about in the Factorio <a href="https://lua-api.factorio.com/latest/Data-Lifecycle.html">data stage</a>,  and struggling with fluidboxes and composite entities for way too long, I finally stumbled onto a working solution. I successfully converted electricity into a fluid - which I call the power fluid - and essentially turned all poles into pipes. Below is an example of a steam engine powering a radar using Fluidic Power, showing both what you will see using the mod (left) and what happens behind the scenes (right).</p>

<p>
  <figure>
    <div class="juxtapose juxtapose-" style="max-width: ; max-height: ; margin: 20px auto auto; height: 100%; width: 100%;">
      <div class="jx-slider">
        <div class="jx-handle" style="left: 50%;">
          <div class="jx-arrow jx-left"></div>
          <div class="jx-control">
            <div class="jx-controller" tabindex="0" role="slider" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">
            </div>
          </div>
          <div class="jx-arrow jx-right"></div>
        </div>
        <div class="jx-image jx-left" style="width: 50%;">
          <img src="https://media.alt-f4.blog/ALTF4/51/fluidic-example.jpg" alt="Old Image">
        </div>
        <div class="jx-image jx-right" style="width: 50%;">
          <img src="https://media.alt-f4.blog/ALTF4/51/fluidic-example-decom.jpg" alt="New Image">
        </div>
        <a href="https://juxtapose.knightlab.com" target="_blank" rel="noopener" class="jx-knightlab">
          <div class="knightlab-logo">
          </div>
          <span class="juxtapose-name">JuxtaposeJS</span>
        </a>
      </div>
    </div>
    <figcaption>From left to right, the setup shows power generation, stepping up voltage, stepping down voltage, and power usage.</figcaption>
  </figure>
</p>

<p>The power fluid will flow to other poles like a fluid, just like water or any other fluid, and from there it will power your entities. The unit of this power fluid is in Joule (for example <code class="language-plaintext highlighter-rouge">10kJ</code>), which means it is <em>energy</em> that’s being distributed through the poles. The unit could likely have been Volt or even Coulomb (as in <a href="https://en.wikipedia.org/wiki/Electric_charge">electric charge</a>), but using energy integrates easily with Factorio’s existing mechanics.</p>

<p>This implementation does however require two types of poles, namely normal poles and source poles. The source poles are placed next to your power generators, and they create the power fluid. This is achieved by placing a tiny assembler underneath the pole that creates the fluid at the correct rate with a very specific power consumption. To power your machines you need normal power poles, which have tiny generators (like the <a href="https://wiki.factorio.com/Steam_engine">steam engine</a>) underneath them that turn the fluid back into electricity. This also allows the power fluid to flow through multiple poles to where it’s required, just like how you can chain steam engines together. It also means that I can <a href="https://wiki.factorio.com/Prototype/Generator#fluid_usage_per_tick">limit</a> how much power each pole can deliver to the machines surrounding it!</p>

<p>Below is the pseudocode that ensures power poles have the correct characteristics.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Power production dictates the source pole's assembler power consumption</span>
<span class="n">power_production</span> <span class="o">=</span> <span class="o">(</span><span class="n">fluid_fuel_value</span> <span class="o">*</span> <span class="n">units_per_craft</span><span class="o">)</span> <span class="o">/</span> <span class="n">crafting_time</span>

<span class="c1">// Power consumption dictates the normal pole's generator fluid usage rate</span>
<span class="n">power_consumption</span> <span class="o">=</span> <span class="n">fluid_fuel_value</span> <span class="o">*</span> <span class="n">fluid_usage_per_tick</span> <span class="o">*</span> <span class="mi">60</span>
</code></pre></div></div>

<p>Next up are transformers, which play a vital role in a mod like this, because as we all know, fluids <a href="https://wiki.factorio.com/Fluid_system#Pipelines">don’t travel very far</a> at high throughput. In the real world, a transformer steps up the voltage for more efficient (read <em>easier</em>) power distribution. Fluidic Power does not have voltage to step up, but the required throughput can be reduced by simply converting the fluid energy to a larger unit. For example, “high voltage” can be emulated with the power fluid’s unit being <code class="language-plaintext highlighter-rouge">1MJ</code> instead of <code class="language-plaintext highlighter-rouge">1kJ</code>. This means that for the same amount of fluid flow, more <em>energy</em> will flow. What I really enjoy about this implementation is how brutally simple these transformers are. All the mods I mentioned had to manually calculate the power transfer over a transformer or create complex composite entities, whereas I simply had to create an assembling machine with a specific recipe. This recipe doesn’t change the total amount of energy, but converts it to a more/less dense form. The crafting time of this recipe, or how much fluid units it can transform, can then dictate the power input/output rating of the transformer!</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Example Transformer Step-Up Recipe</span>
<span class="mi">1000</span> <span class="n">units</span> <span class="n">of</span> <span class="mi">1</span><span class="n">kJ</span> <span class="n">fluid</span> <span class="o">--&gt;</span> <span class="mi">1</span> <span class="n">unit</span> <span class="n">of</span> <span class="mi">1</span><span class="no">MJ</span> <span class="n">fluid</span>

<span class="c1">// Transformer Power Rating</span>
<span class="n">power_rating</span> <span class="o">=</span> <span class="n">fluid_output_amount</span> <span class="o">*</span> <span class="n">fluid_output_unit</span> <span class="o">/</span> <span class="n">time_per_craft</span>
</code></pre></div></div>

<p>With a little fiddling, this resulted in some intuitive and fun gameplay. It’s designed so that only the lowest voltage can interact with your machines, like solar panels and assembling machines. Then, once the voltage is increased to aid distribution, the high voltage fluid can <em>only</em> travel through big power poles. These big power poles are also limited and cannot power any machines or accept any generated power. This is probably my favourite part of this implementation. It means that there is an inherent incentive to create a high voltage backbone throughout your base, and that everywhere you want to use power you need to use transformers.</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      <figure>
        <img src="https://media.alt-f4.blog/ALTF4/51/transformers.jpg" alt="Example of main high voltage line (solid in-game overlay) with transformers stepping down the voltage to machines (dashed in-game overlay). This allows for simplistic power distribution." style="max-width: ; max-height:  ">
        
        <figcaption>Example of main high voltage line (solid in-game overlay) with transformers stepping down the voltage to machines (dashed in-game overlay). This allows for simplistic power distribution.</figcaption>
      </figure>
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>Finally, having power simulated as a fluid changes the design of the accumulators. It’s no longer a smart entity that only accepts surplus power, which only releases all its energy when it’s required. Instead, it’s a simple storage tank which acts like a big, dumb capacitor. It only accepts the low voltage power, which means your battery banks need plenty of transformers. It’s possible to create the same behaviour as vanilla accumulators with fun circuitry, but without circuitry they still function well enough, albeit a little inefficiently.</p>
      <h3 id="in-conclusion">
        
        
            <a href="#in-conclusion" class="anchor" style="text-decoration: none;">In Conclusion</a>
          
        
      </h3>
    

<p>All in all I was suprised and excited that I found an implementation that fulfilled most of my goals and inherently created the challenges and obstacles that I envisioned it to have. I didn’t have to introduce many artificial limitations for the player, which is a great bonus; it just works! I’m abusing some mechanics, which does introduce some weird quirks like accidentally mixing different voltages or not showing physical copper connections, but it’s still really fun to play.</p>

<p>However, the real question is now: <em>How performant is this mod?</em> This mod requires way more fluid calculations than a vanilla game, and abuses some other mechanics. Can the highly optimized Factorio engine keep up, even though it’s been predicted that such a mod will tank your UPS? I will go into more detail about this next week. To end on a cliffhanger, what I found might surprise you. It definitely surprised me.</p>
      <h2 id="contributing">
        
        
            <a href="#contributing" class="anchor" style="text-decoration: none;">Contributing</a>
          
        
      </h2>
    

<p>As always, we’re looking for people that want to contribute to Alt-F4, be it by submitting an article or by helping with translation. If you have something interesting in mind that you want to share with the community in a polished way, this is the place to do it. If you’re not too sure about it we’ll gladly help by discussing content ideas and structure questions. If that sounds like something that’s up your alley, join the <a href="https://alt-f4.blog/nl/discord">Discord</a> to get started!</p>




<script src="https://cdn.knightlab.com/libs/juxtapose/latest/js/juxtapose.min.js"></script>
<link rel="stylesheet" href="https://cdn.knightlab.com/libs/juxtapose/latest/css/juxtapose.css">


<script>
  (() => {
    if (window.innerWidth >= 720) {
      document.getElementsByClassName('toc')[0].setAttribute('open', '')
    }
  })()
</script>

		
<div class="flex flex-column flex-items-center mt8">
  
  <a class="button-green-right m4" style="width: 16em;" href="https://forums.factorio.com/viewtopic.php?f=5&t=100515">
    Bespreek op Factorio Forums
  </a>
  
  
  <a class="button-green-right m4" style="width: 16em;" href="https://www.reddit.com/r/factorio/comments/qna0s7/altf4_51_the_fluidic_power_experiment/">
    Bespreek op Reddit
  </a>
  
  
  <a class="button-green-right m4" style="width: 16em;" href="https://alt-f4.blog/nl/discord">
    Bespreek op Discord
  </a>
  
</div>


	</div>
	<div class="panel-inset mb0 p4 flex">
		<div>
		<!-- Previous Button -->
		
		<a href="/nl/ALTF4-50/" class="button square-sm"><i class="fas fa-angle-double-left"></i></a>
		
		<a class="button square-sm" href="/nl/">
			<i class="fas fa-home"></i>
		</a>

		<!-- Next Button -->
		
		<a class="button square-sm  disabled">
			<i class="fas fa-angle-double-right"></i>
		</a>
		
		</div>
	</div>
</article>

      </div>
    </div>


    <!-- Footer -->
    <footer class="footer">
  <div class="footer-inner panel">

    <div class="footer-links panel-inset slots p1 mt0 mb0">
      <a href="/nl/about" class="slot" title="About">
        <div class="slot-button">
          <i class="fas fa-info"></i>
        </div>
      </a>
      <a href="https://github.com/AlternativeFFFF/Alt-F4" class="slot" title="Github">
        <div class="slot-button">
          <i class="fab fa-github"></i>
        </div>
      </a>
      <a href="https://alt-f4.blog/nl/discord" class="slot" title="Discord">
        <div class="slot-button">
          <i class="fab fa-discord"></i>
        </div>
      </a>
      <a href="/nl/atom.xml" type="application/atom+xml" rel="alternate" class="slot" title="ATOM Feed">
        <div class="slot-button">
          <i class="fas fa-rss"></i>
        </div>
      </a>
      <a href="https://www.freelists.org/list/alt-f4" class="slot" title="Email Newsletter">
        <div class="slot-button">
          <i class="fas fa-envelope"></i>
        </div>
      </a>

      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
    </div>
    <div class="footer-rocket panel-inset m0">
      <div class="spidertron-center">
        <div id="spidertron" class="spidertron-home" data-spidertron-scale="0.6" data-spidertron-speed="400"></div>
      </div>
      <div class="shadow-overlay"></div>
      <div class="shadow-overlay-bottom"></div>
    </div>
    <div class="footer-copyright panel-inset m0">
      Deze website is een fan project en niet direct aangesloten met Wube Software
    </div>
  </div>
</footer>

  </body>

</html>
