<!DOCTYPE html>
<html lang="de" class="de">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Alt-F4 #33 – Vanilla: Geschüttelt, nicht gerührt</title>
	<!-- Meta -->
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v4.1.1">
<meta property="og:title" content="Alt-F4 #33 – Vanilla: Geschüttelt, nicht gerührt">
<meta name="author" content="Villfuk02, redlabel">
<meta property="og:locale" content="de">
<meta name="description" content="In dieser wunderbaren 33. Ausgabe von Alt-F4 präsentiert Villfuk02 seine neuste Mod: Den Rezepte-Zufallsgenerator! Die Designprobleme, die man für einen guten Zufallsgenerator lösen muss, stehen hierbei besonders im Rampenlicht. Danach kündigt redlabel das neuste COMFY Event an, welches vermutlich sehr bombastisch wird. Vanilla: Geschüttelt, nicht gerührt Villfuk02 Vill‘s Recipe Randomizer (zu Deutsch: „Vills Rezepte-Zufallsgenerator“) macht genau, was der Name vermuten lässt – er würfelt Rezepte neu. Auf den ersten Blick mag das zwar nach einer sehr dummen, aber einfachen Idee klingen, allerdings wird es sehr schnell sehr komplex, wenn du versuchst es weniger dumm zu machen. Eine Beispielfabrik, welche Produktionswissenschaftspakete aus Ablenker-Kapseln, Stromschaltern und Brennstoff für Flammenwerfer herstellt. Wie es begann Angefangen habe ich mit dem Projekt im September 2020. Damals wollte ich eine Mod machen, die sowohl einfach, als auch einzigartig ist. Sie war nicht gedacht, spielbar zu sein, oder sogar gut, sondern nur etwas lustiges zum Programmieren. Nachdem ich auf ein paar Probleme gestoßen bin, gab ich mit dem Hintergedanken, dass sowieso niemand die Mod spielen würde, auf und fasste Programmieren nie wieder an. Nach zwei weiteren gescheiterten Projekten zog es mich zurück zu Factorio, diesmal als Spieler. Ich spielte Vanilla, dann Industrial Revolution 2 und dann probierte ich Space Exploration. Ich liebe Überholungsmods, weil ich dadurch neue Rezepte lernen, neue Fabriklayouts entdecken, und neue Logistikprobleme lösen kann. Aber die meisten Überholungsmods beanspruchen sehr viel Zeit und werden schnell langweilig. Das war der Punkt, an dem mir auffiel, zufällige Rezepte haben sogar einen Zweck: Sie sind wie ein unendlicher Vorrat an Überholungsmods, die dabei das Vanillagefühl behalten! Das beste dabei für mich war aber, dass ich keine neuen Maschinen oder Grafiken machen muss, weil ich ja nur mit Zahlen und Buchstaben herumspiele. Nicht so einfach wie es scheint Die Mod könnte einfach jedes Rezept nehmen und zufällige Gegenstände als Input verlangen. Das wäre ziemlich nutzlos, wenn zum Beispiel rote Wissenschaft Kernbrennstoff als Zutat brauchen würde, aber du ihn noch nicht freigeschalten hast. Daher ließ ich es sich durch die Technologien graben, und für jedes Rezept, dass freigeschaltet wird, nur Gegenstände von früheren Technologien nehmen. Es gibt natürlich Ausnahmen mit manchen Mods, bei denen du ein Rezept freischalten kannst, bevor du es auch herstellen kannst, also vielleicht sollte ich ein bisschen vorsichtiger sein. Du willst vermutlich unterirdische Fließbänder nicht aus Dampfmaschinen und Laboren herstellen, das wäre viel zu teuer. Ich brauchte einen Weg, die Rezepte auszugleichen. Daher entschied ich mich, einen Algorithmus zu implementieren, der den Wert jedes Gegenstandes anhand der benötigten Ressourcen berechnet. Wir können uns ohne Problem berechnen, dass ein Schaltkreis 1 Eisenerz und 1,5 Kupfererz benötigt: 1,5 Kupfererz plus 1 Eisenerz resultieren in einem elektronischen Schaltkreis. Sagen wir, dass Kupfer- und Eisenerz beide einen Wert von 1 haben. Das heißt, elektrische Schaltkreise einen Wert von 2,5 haben. Jetzt kann der Zufallsgenerator zum Beispiel ein Fließband (Wert 1,5) und ein Kupfererz (Wert 1) als neues Rezept für Schaltkreis festlegen. Es gibt ein bisschen Variation im Endergebnis, was die Rezepte etwas einzigartiger macht, aber viel wichtiger, wird es dadurch auch einfacher, eine gültige Kombination zu finden, was den Zufallsgenerator schneller macht. Mit diesem Stand veröffentlichte ich die Mod, und durch einiges an Feedback und Testen wurde schnell klar, dass es (natürlicherweise) viele Bugs und zwei „große“ Probleme gab. Groß unter Anführungszeichen, da die Mod trotzdem wesentlich spielbarer war, als man von so viel Zufall vermuten möge. Ich wollte aber Spielern ein angenehmes Erlebnis bieten, nicht nur ein Erlebnis. Die ersten paar Probleme Das erste Problem war Holz. Die Standardeinstellung stellte sicher, dass Holz nicht gewürfelt wird, aber viele Rezepte verwenden hölzerne Strommasten! Die Lösung hätte war ziemlich einfach und langweilig, wie du dir vorstellen kannst. Ich habe einen Marker für „unzufällige“ Ressourcen – wie Holz – hinzugefügt, und jeder Gegenstand der etwas mit diesem Marker benötigte, hat ihn auch übernommen. Das zweite war, dass selbst wenn Rezepte die richtige Menge and Ressourcen benötigt haben, sie oft zu komplex und unfair waren. Die Mod beachtete nicht die Anzahl an Schritten oder Zeit eines Fertigungsprozess. Ein gutes Beispiel ist die (rote) Automatisierungwissenschaft. Sie ist sehr billig, mit einem Wert von nur 3, aber benötigt 5 Sekunden zum Herstellen. Sie wurde in vielen einfachen Komponenten ähnlich wie Eisenzahnräder verwendet. Ihre lange Herstellungszeit hieß, dass du etliche Montagemaschinen benötigen könntest, nur um unterirdische Fließbänder herzustellen. Ein weiteres problematisches Bespiel ist, dass einfache Gegenstände wie Eisenzahnräder viele Schritte benötigen könnten, wie zum Beispiel mit Ziegelsteinen, welche aus Eisenstangen, welche wiederum aus Röhren gemacht werden könnten usw. Daher hab ich einen zweiten Wert namens Komplexität zu jedem Gegenstand hinzugefügt. Komplexität beachtet die Anzahl an Schritten, die Menge unterschiedlicher Zutaten (und Produkte) und auch die Zeit. Rohe Ressourcen ausgleichen Es wirkt, als wäre ich am perfektem Zufallsgenerator angekommen, aber wieder mal zeigten sich einige Probleme (und Bugs). Häufig nutzen viele Rezepte hauptsächlich eine Ressource (oft Eisen oder Stein), was recht fad war, da du weit nach Erz suchen musstest, weil du einfach so viel von der gewählten Zutat benötigst. Und Öl wurde öfters nicht einmal benötigt, um überhaupt eine Rakete zu starten. Für jedes Rezept war es für alle Gegenstände gleich wahrscheinlich, gewählt zu werden, daher übertrafen Gegenstände ohne Öl die paar wenigen mit Öl in Anzahl massiv. Ich habe ein bisschen probiert, den Algorithmus in die richtige Richtung zu schieben, aber nichts hat wirklich funktioniert. Ich könnte ihm einfach sagen, mehr Plastik oder Festbrennstoff oder so zu verwenden, aber was wenn du mit Mods spielen willst, und es noch mehr Gegenstände zum Priorisieren gibt? Ich will eine universelle Lösung. Mir war bereits ein Ansatz bekannt, der das lösen könnte, aber ich wollte ihn nicht implementieren, da es alles wesentlich komplizierter gemacht hätte. Das würde mehr Entwicklungszeit, mehr Bugs und potenziell wesentlich längere Ladezeiten mit sich bringen. Aber nachdem ich erfolglos versucht habe über einen einfacheren Weg ein ähnliches Ergebnis zu erzielen, entschloss ich mich doch diese kompliziertere Lösung zu nehmen. Die Idee war es die Anzahl an rohen Ressourcen statt nur dem Wert zu nehmen. Dadurch kann die Mod sicherstellen, dass jedes zufällige Ergebnis die richtige Menge an roher Ressourcen nimmt, sicherstellend dass alle Rohzutaten genutzt werden. Ähnlich wie beim gesamten Wert dürfen die Rohzutaten für jedes Rezept ein bisschen variieren, oder je nach Mod-Einstellungen auch komplett zufällig sein. Recht einfach, oder? Naja, anstatt mit einer Nummer zu rechnen muss ich jetzt mehrere Zahlen beachten und die Logik ist auch um einiges komplexer. Glücklicherweise funktioniert die Mod dank einigen Optimierungen und gründlichem Testen trotzdem noch und ist weiterhin recht schnell. Und das ist die Geschichte von Vill‘s Recipe Randomizer! Wir müssen tiefer Außer dass ich ein paar GROẞE Probleme nicht angesprochen habe (beachte die fehlenden Anführungszeichen und die Großbuchstaben), welche von Anfang an da waren. Eines davon sind Rezeptschleifen. Der Algorithmus könnte beim Versuch, den Wert eines Rezeptes zu berechnen, stecken bleiben, oder ihn falsch berechnen. Schleifen innerhalb eines Rezeptes sind einfach zu lösen: Um das Rezept zu quantifizieren entfernt der Algorithmus die Gegenstände, die auf beiden Seiten – Input und Output – auftauchen, und löst dadurch die Schleife. Er kann dann die entfernten Gegenstände wieder hinzufügen, da deren Wert jetzt bekannt ist, um das Rezept zum Würfeln fertig zu machen. In Vanilla trifft das auf den Kovarex-Anreicherungsprozess und Kohleverflüssigung zu: 40 U-235 und 2 U-238 können von Kovarex und 25 Schweröl können von Kohleverflüssigung entfernt werden. Schleifen mit mehr als einem Rezept sind etwas schwieriger. Es gibt in Vanilla keine Schleifen mit mehr als einem Rezept (abgesehen von Fässer füllen und leeren, welche standardmäßig aber sowieso nicht verändert werden), daher sind sie ziemlich einfach zu übersehen, aber in Mods gibt es sie überall! Der Zufallsgenerator kann unter bestimmten Bedingungen eventuell aus Versehen eine Schleife machen. Um das Problem zu illustrieren, brauchen wir ein Beispiel. Nehmen wir synthetische Saphire in Industrial Revolution 2. Du braucht reines Nickel, Siliziumdioxid, und Saphirstaub um Saphire herzustellen, aber Saphirstaub wird durch Zerschmettern von Saphiren gemacht, wodurch eine Schleife entsteht: Ich habe dieses Problem behoben, indem ich Schleifen, wenn sie entdeckt werden, aufschneide, und die Rezepte dann in eines zusammenfüge. Das neue Rezept wird dann statt der geöffneten Schleife für die Berechnungen verwendet. Hier werden die beiden Rezepte zusammengefügt, indem die drei Saphirstaub in der Mitte entfernt werden, und dann können wir noch zwei Saphire, die sowohl im Input als auch im Output vorhanden sind, entfernen: Wir bekommen damit ein Rezept für Saphire, das die problematischen Details weglässt! Aber was passiert, wenn es Abzweigungen in Schleifen, oder Schleifen in Schleifen gibt? Das basiert nicht auf irgendeinem bestimmten Rezept, aber ich bin mir sicher, dass etwas mindestens so kompliziertes wie im Diagramm in irgendeiner Mod existiert. Sagen wir einfach, es wird schleifig. Ich glaube ich habe das halbwegs gelöst, aber ich werde jetzt nicht weiter ins Detail gehen, wir sind hier ja schließlich nicht in einem Graphentheoriekurs, und ich bin mir auch nicht einmal sicher, ob meine Lösung überhaupt funktioniert. Mein Erzfeind Und jetzt das größte aller Probleme: Rezepte mit mehreren Produkten. Nehmen wir fortgeschrittene Ölverarbeitung als Beispiel. Standardmäßig hat Rohöl einen Wert von 0,4 (wir ignorieren Wasser fürs erste). Das heißt, das Rezept hat einen Gesamtwert von 40. Wir wissen daher, dass 25 Schweröl + 45 Leichtöl + 55 Flüssiggas einen Wert von insgesamt 40 haben, aber wie teilt sich das auf die einzelnen Produkte auf? Es gibt viele Wege, das anzugehen, und es zu versuchen hat das meiste meiner Zeit gekostet und mir viele Kopfschmerzen bereitet. Gehen wir mal durch die zwei unterschiedlichsten Möglichkeiten. Die einfachste: Jedes Produkt bekommt einen gleichen Teil des Gesamtwerts. Das ist großteils sinnvoll, bis du Abfallprodukte beachtest. Kovarex-Anreicherung zum Beispiel stellt 41 U-235 und 2 U-238 her, und der Algorithmus würde davon ausgehen, beide hätten denselben Wert, aber du wirst vermutlich wissen, dass U-235 wesentlich wertvoller ist. Dieser Ansatz ist daher nicht wirklich hilfreich. Die „beste“: Jeder Teil bekommt den vollen Wert, aber merke die Nebenprodukte, damit du sie später abziehen kannst. Zum Beispiel hat Schweröl bei fortgeschrittener Ölverarbeitung Leichtöl und Flüssiggas als Nebenprodukte. Das heißt Schmiermittel hat sie auch als Nebenprodukte, weil es nur aus Schweröl hergestellt wird. Wenn wir ein Express-Teilerfließband herstellen wollen, brauchen wir unter anderem Schmiermittel und erweiterte Schaltkreise. Erweiterte Schaltkreise benötigen Flüssiggas, aber wir haben noch etwas als Nebenprodukt vom Schmiermittel über, von dem wir es abziehen können. Als einziges Nebenprodukt ist jetzt nur noch Leichtöl übrig. Was machen wir mit Leichtöl? Wir können es natürlich zu Flüssiggas spalten, um noch mehr davon zu sparen. Aber das braucht Wasser. Ist es billiger mehr Wasser oder mehr Flüssiggas zu verwenden? Berechnen wir sicherheitshalber mal beide Möglichkeiten, für alle Fälle. Wie dir vielleicht auffällt, ist dieser Ansatz unglaublich kompliziert. Es gibt viele Randfälle und Fragen zu beantworten. Wie, was machst du mit überflüssigen Nebenprodukten, wenn andere Rezepte sie nicht brauchen? Ich habe versucht eine Version dieses Ansatzes zu implementieren, und muss sagen, sie war sogar ziemlich erfolgreich. Es hat nur zirka 100 Stunden gebraucht und ich musste etwa eine Million Bugs beheben, und was war das Ergebnis? Naja, die Lösung ist immer noch nicht perfekt, auch wenn sie sehr nahe kommt. Ich kann aber auch nicht einmal mehr meinen eigenen Code verstehen. Alles zerfällt jedes mal, wenn ich irgendwas ändern will. Und am dramatischsten, die Mod in Vanilla Factorio zu laden braucht irgendwas zwischen 10 Sekunden und 10 Minuten. Nachdem ich die Mod mit so vielen anderen Mods wie möglich kompatibel halten will (und Funktionalität mit Vanilla wäre auch nice), entschied ich mich, dass das nicht die Lösung ist. Schlussendlich, nach noch mehr Denken, bin ich zu dem Algorithmus gekommen, den ich heute verwende. Er ist eigentlich ein Kompromiss zwischen den beiden oben beschriebenen Ansätzen. Er funktioniert gut und ist recht einfach, wenn auch nicht einfach genug, um ihn zu erklären, da ich etliche andere Eigenarten auch erklären müsste. Er evaluiert nicht alle Rezepte mit mehreren Produkten in allen Fällen gleich gut, aber er bereitet auch bei Randfällen keine Probleme (hoffe ich). Letzte Gedanken Damit wäre ich mit dem Einblick in das Innenleben meines Recipe Randomizer am Ende. Falls du noch weitere Fragen oder Vorschläge hast, kannst du mir auf meinem Discord-Server schreiben. Und wenn wir schon dabei sind, möchte ich allen Leuten danken, die beigetreten sind, um Bugs, Ideen und Getestetes zu posten oder mich anders während der Entwicklung unterstützt haben. Die Mod wäre ohne euch nicht so weit gekommen! COMFY Minesweeper! redlabel Um eine neue Karte vom legendären Kartenersteller mewmew und einem glänzend neuem Ryzen 9 5950X von Gerkiz zu feiern, organisiert COMFY Factorio ein spezielles Event am 1. Mai um 19 Uhr MESZ. Jeder ist inkl. Familie eingeladen, eine Antwort wird nicht benötigt. Falls sich jemand wundert, was Minesweeper ist: Es ist eine neue Karte, bei der du die Basis vergrößerst, indem du ein Minesweeper-Puzzle löst. Um eine Mine zu entschärfen, musst du einen Ofen darauf platzieren. Ihn auf einer freien Kachel zu platzieren löst eine Explosion aus, und draufzusteigen führt zum selben Ergebnis. Fehler sind teuer, da sie Beißer freilassen und Atomexplosionen verursachen. Spieler können auch Punkte bekommen (oder verlieren), je nachdem wie gut sie sind, und sich über eine Anzeigetafel vergleichen, welche die Punkte anzeigt. COMFY ist eine der führenden Mehrspieler-Factorio-Communities und einige unserer Werke sind Bergfestungen, Beißerschlachten, Fischverteidigung, Chronozug und Cave Miner. Und sehr, sehr bald eine Karte über Piraten und Segelschiffe! Bleib also dran. Du kannst der COMFY-Community mit fast 3500 Mitgliedern auf unserem Discord beitreten. Der Countdown ist vorbei Beitragen Wie immer suchen wir nach Leuten, die zu Alt-F4 beitragen wollen, sei es mit einem Artikel oder durch Hilfe bei Übersetzungen. Wenn du etwas Interessantes im Kopf hast, das du mit der Community in einer eleganten Art teilen möchtest, hier kannst du das tun. Falls du dir unsicher bist, beantworten wir gerne Fragen zu Inhalt und Struktur. Falls das nach etwas klingt, woran du interessiert bist, tritt unserem Discord bei, um es nicht zu verpassen!">
<meta property="og:description" content="In dieser wunderbaren 33. Ausgabe von Alt-F4 präsentiert Villfuk02 seine neuste Mod: Den Rezepte-Zufallsgenerator! Die Designprobleme, die man für einen guten Zufallsgenerator lösen muss, stehen hierbei besonders im Rampenlicht. Danach kündigt redlabel das neuste COMFY Event an, welches vermutlich sehr bombastisch wird. Vanilla: Geschüttelt, nicht gerührt Villfuk02 Vill‘s Recipe Randomizer (zu Deutsch: „Vills Rezepte-Zufallsgenerator“) macht genau, was der Name vermuten lässt – er würfelt Rezepte neu. Auf den ersten Blick mag das zwar nach einer sehr dummen, aber einfachen Idee klingen, allerdings wird es sehr schnell sehr komplex, wenn du versuchst es weniger dumm zu machen. Eine Beispielfabrik, welche Produktionswissenschaftspakete aus Ablenker-Kapseln, Stromschaltern und Brennstoff für Flammenwerfer herstellt. Wie es begann Angefangen habe ich mit dem Projekt im September 2020. Damals wollte ich eine Mod machen, die sowohl einfach, als auch einzigartig ist. Sie war nicht gedacht, spielbar zu sein, oder sogar gut, sondern nur etwas lustiges zum Programmieren. Nachdem ich auf ein paar Probleme gestoßen bin, gab ich mit dem Hintergedanken, dass sowieso niemand die Mod spielen würde, auf und fasste Programmieren nie wieder an. Nach zwei weiteren gescheiterten Projekten zog es mich zurück zu Factorio, diesmal als Spieler. Ich spielte Vanilla, dann Industrial Revolution 2 und dann probierte ich Space Exploration. Ich liebe Überholungsmods, weil ich dadurch neue Rezepte lernen, neue Fabriklayouts entdecken, und neue Logistikprobleme lösen kann. Aber die meisten Überholungsmods beanspruchen sehr viel Zeit und werden schnell langweilig. Das war der Punkt, an dem mir auffiel, zufällige Rezepte haben sogar einen Zweck: Sie sind wie ein unendlicher Vorrat an Überholungsmods, die dabei das Vanillagefühl behalten! Das beste dabei für mich war aber, dass ich keine neuen Maschinen oder Grafiken machen muss, weil ich ja nur mit Zahlen und Buchstaben herumspiele. Nicht so einfach wie es scheint Die Mod könnte einfach jedes Rezept nehmen und zufällige Gegenstände als Input verlangen. Das wäre ziemlich nutzlos, wenn zum Beispiel rote Wissenschaft Kernbrennstoff als Zutat brauchen würde, aber du ihn noch nicht freigeschalten hast. Daher ließ ich es sich durch die Technologien graben, und für jedes Rezept, dass freigeschaltet wird, nur Gegenstände von früheren Technologien nehmen. Es gibt natürlich Ausnahmen mit manchen Mods, bei denen du ein Rezept freischalten kannst, bevor du es auch herstellen kannst, also vielleicht sollte ich ein bisschen vorsichtiger sein. Du willst vermutlich unterirdische Fließbänder nicht aus Dampfmaschinen und Laboren herstellen, das wäre viel zu teuer. Ich brauchte einen Weg, die Rezepte auszugleichen. Daher entschied ich mich, einen Algorithmus zu implementieren, der den Wert jedes Gegenstandes anhand der benötigten Ressourcen berechnet. Wir können uns ohne Problem berechnen, dass ein Schaltkreis 1 Eisenerz und 1,5 Kupfererz benötigt: 1,5 Kupfererz plus 1 Eisenerz resultieren in einem elektronischen Schaltkreis. Sagen wir, dass Kupfer- und Eisenerz beide einen Wert von 1 haben. Das heißt, elektrische Schaltkreise einen Wert von 2,5 haben. Jetzt kann der Zufallsgenerator zum Beispiel ein Fließband (Wert 1,5) und ein Kupfererz (Wert 1) als neues Rezept für Schaltkreis festlegen. Es gibt ein bisschen Variation im Endergebnis, was die Rezepte etwas einzigartiger macht, aber viel wichtiger, wird es dadurch auch einfacher, eine gültige Kombination zu finden, was den Zufallsgenerator schneller macht. Mit diesem Stand veröffentlichte ich die Mod, und durch einiges an Feedback und Testen wurde schnell klar, dass es (natürlicherweise) viele Bugs und zwei „große“ Probleme gab. Groß unter Anführungszeichen, da die Mod trotzdem wesentlich spielbarer war, als man von so viel Zufall vermuten möge. Ich wollte aber Spielern ein angenehmes Erlebnis bieten, nicht nur ein Erlebnis. Die ersten paar Probleme Das erste Problem war Holz. Die Standardeinstellung stellte sicher, dass Holz nicht gewürfelt wird, aber viele Rezepte verwenden hölzerne Strommasten! Die Lösung hätte war ziemlich einfach und langweilig, wie du dir vorstellen kannst. Ich habe einen Marker für „unzufällige“ Ressourcen – wie Holz – hinzugefügt, und jeder Gegenstand der etwas mit diesem Marker benötigte, hat ihn auch übernommen. Das zweite war, dass selbst wenn Rezepte die richtige Menge and Ressourcen benötigt haben, sie oft zu komplex und unfair waren. Die Mod beachtete nicht die Anzahl an Schritten oder Zeit eines Fertigungsprozess. Ein gutes Beispiel ist die (rote) Automatisierungwissenschaft. Sie ist sehr billig, mit einem Wert von nur 3, aber benötigt 5 Sekunden zum Herstellen. Sie wurde in vielen einfachen Komponenten ähnlich wie Eisenzahnräder verwendet. Ihre lange Herstellungszeit hieß, dass du etliche Montagemaschinen benötigen könntest, nur um unterirdische Fließbänder herzustellen. Ein weiteres problematisches Bespiel ist, dass einfache Gegenstände wie Eisenzahnräder viele Schritte benötigen könnten, wie zum Beispiel mit Ziegelsteinen, welche aus Eisenstangen, welche wiederum aus Röhren gemacht werden könnten usw. Daher hab ich einen zweiten Wert namens Komplexität zu jedem Gegenstand hinzugefügt. Komplexität beachtet die Anzahl an Schritten, die Menge unterschiedlicher Zutaten (und Produkte) und auch die Zeit. Rohe Ressourcen ausgleichen Es wirkt, als wäre ich am perfektem Zufallsgenerator angekommen, aber wieder mal zeigten sich einige Probleme (und Bugs). Häufig nutzen viele Rezepte hauptsächlich eine Ressource (oft Eisen oder Stein), was recht fad war, da du weit nach Erz suchen musstest, weil du einfach so viel von der gewählten Zutat benötigst. Und Öl wurde öfters nicht einmal benötigt, um überhaupt eine Rakete zu starten. Für jedes Rezept war es für alle Gegenstände gleich wahrscheinlich, gewählt zu werden, daher übertrafen Gegenstände ohne Öl die paar wenigen mit Öl in Anzahl massiv. Ich habe ein bisschen probiert, den Algorithmus in die richtige Richtung zu schieben, aber nichts hat wirklich funktioniert. Ich könnte ihm einfach sagen, mehr Plastik oder Festbrennstoff oder so zu verwenden, aber was wenn du mit Mods spielen willst, und es noch mehr Gegenstände zum Priorisieren gibt? Ich will eine universelle Lösung. Mir war bereits ein Ansatz bekannt, der das lösen könnte, aber ich wollte ihn nicht implementieren, da es alles wesentlich komplizierter gemacht hätte. Das würde mehr Entwicklungszeit, mehr Bugs und potenziell wesentlich längere Ladezeiten mit sich bringen. Aber nachdem ich erfolglos versucht habe über einen einfacheren Weg ein ähnliches Ergebnis zu erzielen, entschloss ich mich doch diese kompliziertere Lösung zu nehmen. Die Idee war es die Anzahl an rohen Ressourcen statt nur dem Wert zu nehmen. Dadurch kann die Mod sicherstellen, dass jedes zufällige Ergebnis die richtige Menge an roher Ressourcen nimmt, sicherstellend dass alle Rohzutaten genutzt werden. Ähnlich wie beim gesamten Wert dürfen die Rohzutaten für jedes Rezept ein bisschen variieren, oder je nach Mod-Einstellungen auch komplett zufällig sein. Recht einfach, oder? Naja, anstatt mit einer Nummer zu rechnen muss ich jetzt mehrere Zahlen beachten und die Logik ist auch um einiges komplexer. Glücklicherweise funktioniert die Mod dank einigen Optimierungen und gründlichem Testen trotzdem noch und ist weiterhin recht schnell. Und das ist die Geschichte von Vill‘s Recipe Randomizer! Wir müssen tiefer Außer dass ich ein paar GROẞE Probleme nicht angesprochen habe (beachte die fehlenden Anführungszeichen und die Großbuchstaben), welche von Anfang an da waren. Eines davon sind Rezeptschleifen. Der Algorithmus könnte beim Versuch, den Wert eines Rezeptes zu berechnen, stecken bleiben, oder ihn falsch berechnen. Schleifen innerhalb eines Rezeptes sind einfach zu lösen: Um das Rezept zu quantifizieren entfernt der Algorithmus die Gegenstände, die auf beiden Seiten – Input und Output – auftauchen, und löst dadurch die Schleife. Er kann dann die entfernten Gegenstände wieder hinzufügen, da deren Wert jetzt bekannt ist, um das Rezept zum Würfeln fertig zu machen. In Vanilla trifft das auf den Kovarex-Anreicherungsprozess und Kohleverflüssigung zu: 40 U-235 und 2 U-238 können von Kovarex und 25 Schweröl können von Kohleverflüssigung entfernt werden. Schleifen mit mehr als einem Rezept sind etwas schwieriger. Es gibt in Vanilla keine Schleifen mit mehr als einem Rezept (abgesehen von Fässer füllen und leeren, welche standardmäßig aber sowieso nicht verändert werden), daher sind sie ziemlich einfach zu übersehen, aber in Mods gibt es sie überall! Der Zufallsgenerator kann unter bestimmten Bedingungen eventuell aus Versehen eine Schleife machen. Um das Problem zu illustrieren, brauchen wir ein Beispiel. Nehmen wir synthetische Saphire in Industrial Revolution 2. Du braucht reines Nickel, Siliziumdioxid, und Saphirstaub um Saphire herzustellen, aber Saphirstaub wird durch Zerschmettern von Saphiren gemacht, wodurch eine Schleife entsteht: Ich habe dieses Problem behoben, indem ich Schleifen, wenn sie entdeckt werden, aufschneide, und die Rezepte dann in eines zusammenfüge. Das neue Rezept wird dann statt der geöffneten Schleife für die Berechnungen verwendet. Hier werden die beiden Rezepte zusammengefügt, indem die drei Saphirstaub in der Mitte entfernt werden, und dann können wir noch zwei Saphire, die sowohl im Input als auch im Output vorhanden sind, entfernen: Wir bekommen damit ein Rezept für Saphire, das die problematischen Details weglässt! Aber was passiert, wenn es Abzweigungen in Schleifen, oder Schleifen in Schleifen gibt? Das basiert nicht auf irgendeinem bestimmten Rezept, aber ich bin mir sicher, dass etwas mindestens so kompliziertes wie im Diagramm in irgendeiner Mod existiert. Sagen wir einfach, es wird schleifig. Ich glaube ich habe das halbwegs gelöst, aber ich werde jetzt nicht weiter ins Detail gehen, wir sind hier ja schließlich nicht in einem Graphentheoriekurs, und ich bin mir auch nicht einmal sicher, ob meine Lösung überhaupt funktioniert. Mein Erzfeind Und jetzt das größte aller Probleme: Rezepte mit mehreren Produkten. Nehmen wir fortgeschrittene Ölverarbeitung als Beispiel. Standardmäßig hat Rohöl einen Wert von 0,4 (wir ignorieren Wasser fürs erste). Das heißt, das Rezept hat einen Gesamtwert von 40. Wir wissen daher, dass 25 Schweröl + 45 Leichtöl + 55 Flüssiggas einen Wert von insgesamt 40 haben, aber wie teilt sich das auf die einzelnen Produkte auf? Es gibt viele Wege, das anzugehen, und es zu versuchen hat das meiste meiner Zeit gekostet und mir viele Kopfschmerzen bereitet. Gehen wir mal durch die zwei unterschiedlichsten Möglichkeiten. Die einfachste: Jedes Produkt bekommt einen gleichen Teil des Gesamtwerts. Das ist großteils sinnvoll, bis du Abfallprodukte beachtest. Kovarex-Anreicherung zum Beispiel stellt 41 U-235 und 2 U-238 her, und der Algorithmus würde davon ausgehen, beide hätten denselben Wert, aber du wirst vermutlich wissen, dass U-235 wesentlich wertvoller ist. Dieser Ansatz ist daher nicht wirklich hilfreich. Die „beste“: Jeder Teil bekommt den vollen Wert, aber merke die Nebenprodukte, damit du sie später abziehen kannst. Zum Beispiel hat Schweröl bei fortgeschrittener Ölverarbeitung Leichtöl und Flüssiggas als Nebenprodukte. Das heißt Schmiermittel hat sie auch als Nebenprodukte, weil es nur aus Schweröl hergestellt wird. Wenn wir ein Express-Teilerfließband herstellen wollen, brauchen wir unter anderem Schmiermittel und erweiterte Schaltkreise. Erweiterte Schaltkreise benötigen Flüssiggas, aber wir haben noch etwas als Nebenprodukt vom Schmiermittel über, von dem wir es abziehen können. Als einziges Nebenprodukt ist jetzt nur noch Leichtöl übrig. Was machen wir mit Leichtöl? Wir können es natürlich zu Flüssiggas spalten, um noch mehr davon zu sparen. Aber das braucht Wasser. Ist es billiger mehr Wasser oder mehr Flüssiggas zu verwenden? Berechnen wir sicherheitshalber mal beide Möglichkeiten, für alle Fälle. Wie dir vielleicht auffällt, ist dieser Ansatz unglaublich kompliziert. Es gibt viele Randfälle und Fragen zu beantworten. Wie, was machst du mit überflüssigen Nebenprodukten, wenn andere Rezepte sie nicht brauchen? Ich habe versucht eine Version dieses Ansatzes zu implementieren, und muss sagen, sie war sogar ziemlich erfolgreich. Es hat nur zirka 100 Stunden gebraucht und ich musste etwa eine Million Bugs beheben, und was war das Ergebnis? Naja, die Lösung ist immer noch nicht perfekt, auch wenn sie sehr nahe kommt. Ich kann aber auch nicht einmal mehr meinen eigenen Code verstehen. Alles zerfällt jedes mal, wenn ich irgendwas ändern will. Und am dramatischsten, die Mod in Vanilla Factorio zu laden braucht irgendwas zwischen 10 Sekunden und 10 Minuten. Nachdem ich die Mod mit so vielen anderen Mods wie möglich kompatibel halten will (und Funktionalität mit Vanilla wäre auch nice), entschied ich mich, dass das nicht die Lösung ist. Schlussendlich, nach noch mehr Denken, bin ich zu dem Algorithmus gekommen, den ich heute verwende. Er ist eigentlich ein Kompromiss zwischen den beiden oben beschriebenen Ansätzen. Er funktioniert gut und ist recht einfach, wenn auch nicht einfach genug, um ihn zu erklären, da ich etliche andere Eigenarten auch erklären müsste. Er evaluiert nicht alle Rezepte mit mehreren Produkten in allen Fällen gleich gut, aber er bereitet auch bei Randfällen keine Probleme (hoffe ich). Letzte Gedanken Damit wäre ich mit dem Einblick in das Innenleben meines Recipe Randomizer am Ende. Falls du noch weitere Fragen oder Vorschläge hast, kannst du mir auf meinem Discord-Server schreiben. Und wenn wir schon dabei sind, möchte ich allen Leuten danken, die beigetreten sind, um Bugs, Ideen und Getestetes zu posten oder mich anders während der Entwicklung unterstützt haben. Die Mod wäre ohne euch nicht so weit gekommen! COMFY Minesweeper! redlabel Um eine neue Karte vom legendären Kartenersteller mewmew und einem glänzend neuem Ryzen 9 5950X von Gerkiz zu feiern, organisiert COMFY Factorio ein spezielles Event am 1. Mai um 19 Uhr MESZ. Jeder ist inkl. Familie eingeladen, eine Antwort wird nicht benötigt. Falls sich jemand wundert, was Minesweeper ist: Es ist eine neue Karte, bei der du die Basis vergrößerst, indem du ein Minesweeper-Puzzle löst. Um eine Mine zu entschärfen, musst du einen Ofen darauf platzieren. Ihn auf einer freien Kachel zu platzieren löst eine Explosion aus, und draufzusteigen führt zum selben Ergebnis. Fehler sind teuer, da sie Beißer freilassen und Atomexplosionen verursachen. Spieler können auch Punkte bekommen (oder verlieren), je nachdem wie gut sie sind, und sich über eine Anzeigetafel vergleichen, welche die Punkte anzeigt. COMFY ist eine der führenden Mehrspieler-Factorio-Communities und einige unserer Werke sind Bergfestungen, Beißerschlachten, Fischverteidigung, Chronozug und Cave Miner. Und sehr, sehr bald eine Karte über Piraten und Segelschiffe! Bleib also dran. Du kannst der COMFY-Community mit fast 3500 Mitgliedern auf unserem Discord beitreten. Der Countdown ist vorbei Beitragen Wie immer suchen wir nach Leuten, die zu Alt-F4 beitragen wollen, sei es mit einem Artikel oder durch Hilfe bei Übersetzungen. Wenn du etwas Interessantes im Kopf hast, das du mit der Community in einer eleganten Art teilen möchtest, hier kannst du das tun. Falls du dir unsicher bist, beantworten wir gerne Fragen zu Inhalt und Struktur. Falls das nach etwas klingt, woran du interessiert bist, tritt unserem Discord bei, um es nicht zu verpassen!">
<link rel="canonical" href="https://alt-f4.blog/de/ALTF4-33/">
<meta property="og:url" content="https://alt-f4.blog/ALTF4-33/">
<meta property="og:site_name" content="Alternative Friday Factorio Fan Facts">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2021-04-30T00:00:00+00:00">
<script type="application/ld+json">
{"dateModified":"2021-04-30T00:00:00+00:00","datePublished":"2021-04-30T00:00:00+00:00","author":{"@type":"Person","name":"Villfuk02, redlabel"},"description":"In dieser wunderbaren 33. Ausgabe von Alt-F4 präsentiert Villfuk02 seine neuste Mod: Den Rezepte-Zufallsgenerator! Die Designprobleme, die man für einen guten Zufallsgenerator lösen muss, stehen hierbei besonders im Rampenlicht. Danach kündigt redlabel das neuste COMFY Event an, welches vermutlich sehr bombastisch wird. Vanilla: Geschüttelt, nicht gerührt Villfuk02 Vill‘s Recipe Randomizer (zu Deutsch: „Vills Rezepte-Zufallsgenerator“) macht genau, was der Name vermuten lässt – er würfelt Rezepte neu. Auf den ersten Blick mag das zwar nach einer sehr dummen, aber einfachen Idee klingen, allerdings wird es sehr schnell sehr komplex, wenn du versuchst es weniger dumm zu machen. Eine Beispielfabrik, welche Produktionswissenschaftspakete aus Ablenker-Kapseln, Stromschaltern und Brennstoff für Flammenwerfer herstellt. Wie es begann Angefangen habe ich mit dem Projekt im September 2020. Damals wollte ich eine Mod machen, die sowohl einfach, als auch einzigartig ist. Sie war nicht gedacht, spielbar zu sein, oder sogar gut, sondern nur etwas lustiges zum Programmieren. Nachdem ich auf ein paar Probleme gestoßen bin, gab ich mit dem Hintergedanken, dass sowieso niemand die Mod spielen würde, auf und fasste Programmieren nie wieder an. Nach zwei weiteren gescheiterten Projekten zog es mich zurück zu Factorio, diesmal als Spieler. Ich spielte Vanilla, dann Industrial Revolution 2 und dann probierte ich Space Exploration. Ich liebe Überholungsmods, weil ich dadurch neue Rezepte lernen, neue Fabriklayouts entdecken, und neue Logistikprobleme lösen kann. Aber die meisten Überholungsmods beanspruchen sehr viel Zeit und werden schnell langweilig. Das war der Punkt, an dem mir auffiel, zufällige Rezepte haben sogar einen Zweck: Sie sind wie ein unendlicher Vorrat an Überholungsmods, die dabei das Vanillagefühl behalten! Das beste dabei für mich war aber, dass ich keine neuen Maschinen oder Grafiken machen muss, weil ich ja nur mit Zahlen und Buchstaben herumspiele. Nicht so einfach wie es scheint Die Mod könnte einfach jedes Rezept nehmen und zufällige Gegenstände als Input verlangen. Das wäre ziemlich nutzlos, wenn zum Beispiel rote Wissenschaft Kernbrennstoff als Zutat brauchen würde, aber du ihn noch nicht freigeschalten hast. Daher ließ ich es sich durch die Technologien graben, und für jedes Rezept, dass freigeschaltet wird, nur Gegenstände von früheren Technologien nehmen. Es gibt natürlich Ausnahmen mit manchen Mods, bei denen du ein Rezept freischalten kannst, bevor du es auch herstellen kannst, also vielleicht sollte ich ein bisschen vorsichtiger sein. Du willst vermutlich unterirdische Fließbänder nicht aus Dampfmaschinen und Laboren herstellen, das wäre viel zu teuer. Ich brauchte einen Weg, die Rezepte auszugleichen. Daher entschied ich mich, einen Algorithmus zu implementieren, der den Wert jedes Gegenstandes anhand der benötigten Ressourcen berechnet. Wir können uns ohne Problem berechnen, dass ein Schaltkreis 1 Eisenerz und 1,5 Kupfererz benötigt: 1,5 Kupfererz plus 1 Eisenerz resultieren in einem elektronischen Schaltkreis. Sagen wir, dass Kupfer- und Eisenerz beide einen Wert von 1 haben. Das heißt, elektrische Schaltkreise einen Wert von 2,5 haben. Jetzt kann der Zufallsgenerator zum Beispiel ein Fließband (Wert 1,5) und ein Kupfererz (Wert 1) als neues Rezept für Schaltkreis festlegen. Es gibt ein bisschen Variation im Endergebnis, was die Rezepte etwas einzigartiger macht, aber viel wichtiger, wird es dadurch auch einfacher, eine gültige Kombination zu finden, was den Zufallsgenerator schneller macht. Mit diesem Stand veröffentlichte ich die Mod, und durch einiges an Feedback und Testen wurde schnell klar, dass es (natürlicherweise) viele Bugs und zwei „große“ Probleme gab. Groß unter Anführungszeichen, da die Mod trotzdem wesentlich spielbarer war, als man von so viel Zufall vermuten möge. Ich wollte aber Spielern ein angenehmes Erlebnis bieten, nicht nur ein Erlebnis. Die ersten paar Probleme Das erste Problem war Holz. Die Standardeinstellung stellte sicher, dass Holz nicht gewürfelt wird, aber viele Rezepte verwenden hölzerne Strommasten! Die Lösung hätte war ziemlich einfach und langweilig, wie du dir vorstellen kannst. Ich habe einen Marker für „unzufällige“ Ressourcen – wie Holz – hinzugefügt, und jeder Gegenstand der etwas mit diesem Marker benötigte, hat ihn auch übernommen. Das zweite war, dass selbst wenn Rezepte die richtige Menge and Ressourcen benötigt haben, sie oft zu komplex und unfair waren. Die Mod beachtete nicht die Anzahl an Schritten oder Zeit eines Fertigungsprozess. Ein gutes Beispiel ist die (rote) Automatisierungwissenschaft. Sie ist sehr billig, mit einem Wert von nur 3, aber benötigt 5 Sekunden zum Herstellen. Sie wurde in vielen einfachen Komponenten ähnlich wie Eisenzahnräder verwendet. Ihre lange Herstellungszeit hieß, dass du etliche Montagemaschinen benötigen könntest, nur um unterirdische Fließbänder herzustellen. Ein weiteres problematisches Bespiel ist, dass einfache Gegenstände wie Eisenzahnräder viele Schritte benötigen könnten, wie zum Beispiel mit Ziegelsteinen, welche aus Eisenstangen, welche wiederum aus Röhren gemacht werden könnten usw. Daher hab ich einen zweiten Wert namens Komplexität zu jedem Gegenstand hinzugefügt. Komplexität beachtet die Anzahl an Schritten, die Menge unterschiedlicher Zutaten (und Produkte) und auch die Zeit. Rohe Ressourcen ausgleichen Es wirkt, als wäre ich am perfektem Zufallsgenerator angekommen, aber wieder mal zeigten sich einige Probleme (und Bugs). Häufig nutzen viele Rezepte hauptsächlich eine Ressource (oft Eisen oder Stein), was recht fad war, da du weit nach Erz suchen musstest, weil du einfach so viel von der gewählten Zutat benötigst. Und Öl wurde öfters nicht einmal benötigt, um überhaupt eine Rakete zu starten. Für jedes Rezept war es für alle Gegenstände gleich wahrscheinlich, gewählt zu werden, daher übertrafen Gegenstände ohne Öl die paar wenigen mit Öl in Anzahl massiv. Ich habe ein bisschen probiert, den Algorithmus in die richtige Richtung zu schieben, aber nichts hat wirklich funktioniert. Ich könnte ihm einfach sagen, mehr Plastik oder Festbrennstoff oder so zu verwenden, aber was wenn du mit Mods spielen willst, und es noch mehr Gegenstände zum Priorisieren gibt? Ich will eine universelle Lösung. Mir war bereits ein Ansatz bekannt, der das lösen könnte, aber ich wollte ihn nicht implementieren, da es alles wesentlich komplizierter gemacht hätte. Das würde mehr Entwicklungszeit, mehr Bugs und potenziell wesentlich längere Ladezeiten mit sich bringen. Aber nachdem ich erfolglos versucht habe über einen einfacheren Weg ein ähnliches Ergebnis zu erzielen, entschloss ich mich doch diese kompliziertere Lösung zu nehmen. Die Idee war es die Anzahl an rohen Ressourcen statt nur dem Wert zu nehmen. Dadurch kann die Mod sicherstellen, dass jedes zufällige Ergebnis die richtige Menge an roher Ressourcen nimmt, sicherstellend dass alle Rohzutaten genutzt werden. Ähnlich wie beim gesamten Wert dürfen die Rohzutaten für jedes Rezept ein bisschen variieren, oder je nach Mod-Einstellungen auch komplett zufällig sein. Recht einfach, oder? Naja, anstatt mit einer Nummer zu rechnen muss ich jetzt mehrere Zahlen beachten und die Logik ist auch um einiges komplexer. Glücklicherweise funktioniert die Mod dank einigen Optimierungen und gründlichem Testen trotzdem noch und ist weiterhin recht schnell. Und das ist die Geschichte von Vill‘s Recipe Randomizer! Wir müssen tiefer Außer dass ich ein paar GROẞE Probleme nicht angesprochen habe (beachte die fehlenden Anführungszeichen und die Großbuchstaben), welche von Anfang an da waren. Eines davon sind Rezeptschleifen. Der Algorithmus könnte beim Versuch, den Wert eines Rezeptes zu berechnen, stecken bleiben, oder ihn falsch berechnen. Schleifen innerhalb eines Rezeptes sind einfach zu lösen: Um das Rezept zu quantifizieren entfernt der Algorithmus die Gegenstände, die auf beiden Seiten – Input und Output – auftauchen, und löst dadurch die Schleife. Er kann dann die entfernten Gegenstände wieder hinzufügen, da deren Wert jetzt bekannt ist, um das Rezept zum Würfeln fertig zu machen. In Vanilla trifft das auf den Kovarex-Anreicherungsprozess und Kohleverflüssigung zu: 40 U-235 und 2 U-238 können von Kovarex und 25 Schweröl können von Kohleverflüssigung entfernt werden. Schleifen mit mehr als einem Rezept sind etwas schwieriger. Es gibt in Vanilla keine Schleifen mit mehr als einem Rezept (abgesehen von Fässer füllen und leeren, welche standardmäßig aber sowieso nicht verändert werden), daher sind sie ziemlich einfach zu übersehen, aber in Mods gibt es sie überall! Der Zufallsgenerator kann unter bestimmten Bedingungen eventuell aus Versehen eine Schleife machen. Um das Problem zu illustrieren, brauchen wir ein Beispiel. Nehmen wir synthetische Saphire in Industrial Revolution 2. Du braucht reines Nickel, Siliziumdioxid, und Saphirstaub um Saphire herzustellen, aber Saphirstaub wird durch Zerschmettern von Saphiren gemacht, wodurch eine Schleife entsteht: Ich habe dieses Problem behoben, indem ich Schleifen, wenn sie entdeckt werden, aufschneide, und die Rezepte dann in eines zusammenfüge. Das neue Rezept wird dann statt der geöffneten Schleife für die Berechnungen verwendet. Hier werden die beiden Rezepte zusammengefügt, indem die drei Saphirstaub in der Mitte entfernt werden, und dann können wir noch zwei Saphire, die sowohl im Input als auch im Output vorhanden sind, entfernen: Wir bekommen damit ein Rezept für Saphire, das die problematischen Details weglässt! Aber was passiert, wenn es Abzweigungen in Schleifen, oder Schleifen in Schleifen gibt? Das basiert nicht auf irgendeinem bestimmten Rezept, aber ich bin mir sicher, dass etwas mindestens so kompliziertes wie im Diagramm in irgendeiner Mod existiert. Sagen wir einfach, es wird schleifig. Ich glaube ich habe das halbwegs gelöst, aber ich werde jetzt nicht weiter ins Detail gehen, wir sind hier ja schließlich nicht in einem Graphentheoriekurs, und ich bin mir auch nicht einmal sicher, ob meine Lösung überhaupt funktioniert. Mein Erzfeind Und jetzt das größte aller Probleme: Rezepte mit mehreren Produkten. Nehmen wir fortgeschrittene Ölverarbeitung als Beispiel. Standardmäßig hat Rohöl einen Wert von 0,4 (wir ignorieren Wasser fürs erste). Das heißt, das Rezept hat einen Gesamtwert von 40. Wir wissen daher, dass 25 Schweröl + 45 Leichtöl + 55 Flüssiggas einen Wert von insgesamt 40 haben, aber wie teilt sich das auf die einzelnen Produkte auf? Es gibt viele Wege, das anzugehen, und es zu versuchen hat das meiste meiner Zeit gekostet und mir viele Kopfschmerzen bereitet. Gehen wir mal durch die zwei unterschiedlichsten Möglichkeiten. Die einfachste: Jedes Produkt bekommt einen gleichen Teil des Gesamtwerts. Das ist großteils sinnvoll, bis du Abfallprodukte beachtest. Kovarex-Anreicherung zum Beispiel stellt 41 U-235 und 2 U-238 her, und der Algorithmus würde davon ausgehen, beide hätten denselben Wert, aber du wirst vermutlich wissen, dass U-235 wesentlich wertvoller ist. Dieser Ansatz ist daher nicht wirklich hilfreich. Die „beste“: Jeder Teil bekommt den vollen Wert, aber merke die Nebenprodukte, damit du sie später abziehen kannst. Zum Beispiel hat Schweröl bei fortgeschrittener Ölverarbeitung Leichtöl und Flüssiggas als Nebenprodukte. Das heißt Schmiermittel hat sie auch als Nebenprodukte, weil es nur aus Schweröl hergestellt wird. Wenn wir ein Express-Teilerfließband herstellen wollen, brauchen wir unter anderem Schmiermittel und erweiterte Schaltkreise. Erweiterte Schaltkreise benötigen Flüssiggas, aber wir haben noch etwas als Nebenprodukt vom Schmiermittel über, von dem wir es abziehen können. Als einziges Nebenprodukt ist jetzt nur noch Leichtöl übrig. Was machen wir mit Leichtöl? Wir können es natürlich zu Flüssiggas spalten, um noch mehr davon zu sparen. Aber das braucht Wasser. Ist es billiger mehr Wasser oder mehr Flüssiggas zu verwenden? Berechnen wir sicherheitshalber mal beide Möglichkeiten, für alle Fälle. Wie dir vielleicht auffällt, ist dieser Ansatz unglaublich kompliziert. Es gibt viele Randfälle und Fragen zu beantworten. Wie, was machst du mit überflüssigen Nebenprodukten, wenn andere Rezepte sie nicht brauchen? Ich habe versucht eine Version dieses Ansatzes zu implementieren, und muss sagen, sie war sogar ziemlich erfolgreich. Es hat nur zirka 100 Stunden gebraucht und ich musste etwa eine Million Bugs beheben, und was war das Ergebnis? Naja, die Lösung ist immer noch nicht perfekt, auch wenn sie sehr nahe kommt. Ich kann aber auch nicht einmal mehr meinen eigenen Code verstehen. Alles zerfällt jedes mal, wenn ich irgendwas ändern will. Und am dramatischsten, die Mod in Vanilla Factorio zu laden braucht irgendwas zwischen 10 Sekunden und 10 Minuten. Nachdem ich die Mod mit so vielen anderen Mods wie möglich kompatibel halten will (und Funktionalität mit Vanilla wäre auch nice), entschied ich mich, dass das nicht die Lösung ist. Schlussendlich, nach noch mehr Denken, bin ich zu dem Algorithmus gekommen, den ich heute verwende. Er ist eigentlich ein Kompromiss zwischen den beiden oben beschriebenen Ansätzen. Er funktioniert gut und ist recht einfach, wenn auch nicht einfach genug, um ihn zu erklären, da ich etliche andere Eigenarten auch erklären müsste. Er evaluiert nicht alle Rezepte mit mehreren Produkten in allen Fällen gleich gut, aber er bereitet auch bei Randfällen keine Probleme (hoffe ich). Letzte Gedanken Damit wäre ich mit dem Einblick in das Innenleben meines Recipe Randomizer am Ende. Falls du noch weitere Fragen oder Vorschläge hast, kannst du mir auf meinem Discord-Server schreiben. Und wenn wir schon dabei sind, möchte ich allen Leuten danken, die beigetreten sind, um Bugs, Ideen und Getestetes zu posten oder mich anders während der Entwicklung unterstützt haben. Die Mod wäre ohne euch nicht so weit gekommen! COMFY Minesweeper! redlabel Um eine neue Karte vom legendären Kartenersteller mewmew und einem glänzend neuem Ryzen 9 5950X von Gerkiz zu feiern, organisiert COMFY Factorio ein spezielles Event am 1. Mai um 19 Uhr MESZ. Jeder ist inkl. Familie eingeladen, eine Antwort wird nicht benötigt. Falls sich jemand wundert, was Minesweeper ist: Es ist eine neue Karte, bei der du die Basis vergrößerst, indem du ein Minesweeper-Puzzle löst. Um eine Mine zu entschärfen, musst du einen Ofen darauf platzieren. Ihn auf einer freien Kachel zu platzieren löst eine Explosion aus, und draufzusteigen führt zum selben Ergebnis. Fehler sind teuer, da sie Beißer freilassen und Atomexplosionen verursachen. Spieler können auch Punkte bekommen (oder verlieren), je nachdem wie gut sie sind, und sich über eine Anzeigetafel vergleichen, welche die Punkte anzeigt. COMFY ist eine der führenden Mehrspieler-Factorio-Communities und einige unserer Werke sind Bergfestungen, Beißerschlachten, Fischverteidigung, Chronozug und Cave Miner. Und sehr, sehr bald eine Karte über Piraten und Segelschiffe! Bleib also dran. Du kannst der COMFY-Community mit fast 3500 Mitgliedern auf unserem Discord beitreten. Der Countdown ist vorbei Beitragen Wie immer suchen wir nach Leuten, die zu Alt-F4 beitragen wollen, sei es mit einem Artikel oder durch Hilfe bei Übersetzungen. Wenn du etwas Interessantes im Kopf hast, das du mit der Community in einer eleganten Art teilen möchtest, hier kannst du das tun. Falls du dir unsicher bist, beantworten wir gerne Fragen zu Inhalt und Struktur. Falls das nach etwas klingt, woran du interessiert bist, tritt unserem Discord bei, um es nicht zu verpassen!","mainEntityOfPage":{"@type":"WebPage","@id":"https://alt-f4.blog/ALTF4-33/"},"url":"https://alt-f4.blog/ALTF4-33/","@type":"BlogPosting","headline":"Alt-F4 #33 – Vanilla: Geschüttelt, nicht gerührt","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
	

	
	  <meta property="og:image" content="https://alt-f4.blog/assets/ALTF4/33/thumbnail.jpg">
	  <meta name="twitter:image" content="https://alt-f4.blog/assets/ALTF4/33/thumbnail.jpg">
	

	<!-- CSS & fonts -->
	<link href="/de/assets/GLOBAL/css/titillium-web.css" rel="stylesheet">
	<link rel="stylesheet" href="/de/assets/GLOBAL/css/style.css">
	<link rel="stylesheet" href="/de/assets/GLOBAL/css/spidertron.css">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.css" rel="stylesheet" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,900,400italic%7CSignika:700,300,400,600" rel="stylesheet" type="text/css">

	<link href="/de/assets/GLOBAL/img/favicon.ico" rel="icon" type="image/x-icon">
	<link href="/de/assets/GLOBAL/img/favicon.ico" rel="shortcut icon" type="image/x-icon">

	<!-- RSS -->
	<link href="/de/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed">

	<script src="/assets/GLOBAL/js/spidertron.js"></script>
	<script src="/assets/GLOBAL/js/localization.js"></script>
	<!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
</head>


  <body>
    <!-- Navigation Bar -->
    <nav id="top" class="top-bar">
	<div class="top-bar-inner flex flex-space-between">
		<div class="sites links flex">
			<a href="/de/" class="sites-current">
				<div id="navbar-logo" role="img" aria-label="Alt-F4 Logo"></div>
			</a>
			<a href="https://alt-f4.blog/de/discord" class="">Discord</a>
			<span class="separator">|</span>
			<a href="https://factorio.com/blog" class="">FFF</a>
		</div>
		<div class="sites links flex hide-tag-line">
			<em>Der communityproduzierte Nachfolger zu den geliebten Factorio Friday Facts</em>
		</div>
		<div class="dropdown flex-end">
			<a class="button flex flex-space-between" href="#">
				<i class="fas fa-language"></i>
			</a>
			<div class="submenu">
				
				<a class="button lang-button" href="/../ALTF4-33/" onclick="setLanguage('en')">English</a>
				
				<a class="button lang-button" href="/cs/ALTF4-33/" onclick="setLanguage('cs')">Čeština</a>
				
				<a class="button button-green lang-button" href="/de/ALTF4-33/" onclick="setLanguage('de')">Deutsch</a>
				
				<a class="button lang-button" href="/es/ALTF4-33/" onclick="setLanguage('es')">Español</a>
				
				<a class="button lang-button" href="/fr/ALTF4-33/" onclick="setLanguage('fr')">Français</a>
				
				<a class="button lang-button" href="/it/ALTF4-33/" onclick="setLanguage('it')">Italiano</a>
				
				<a class="button lang-button" href="/nl/ALTF4-33/" onclick="setLanguage('nl')">Nederlands</a>
				
				<a class="button lang-button" href="/pt-br/ALTF4-33/" onclick="setLanguage('pt-br')">Português Brasileiro</a>
				
				<a class="button lang-button" href="/ru/ALTF4-33/" onclick="setLanguage('ru')">Русский</a>
				
				<a class="button lang-button" href="/zh/ALTF4-33/" onclick="setLanguage('zh')">中文</a>
				
			</div>
		</div>
	</div>
</nav>


    <!-- Main content -->
    <div class="container">
      <div class="container-inner">
        <div class="small-center"></div>
        <!-- Posts -->
        <article class="panel blog-post">
	
	<h1 class="page-title-headder">Alt-F4 #33 – Vanilla: Geschüttelt, nicht gerührt  <author>30.04.2021</author>
</h1>
	
	
	<div class="panel-inset mb0">
		
Geschrieben von <em>Villfuk02, redlabel</em>,



editiert von <em>stringweasel, Nanogamer7, Conor_, Therenas, Firerazer</em>,



<br>übersetzt von <em>Nanogamer7</em>,



lektoriert von <em>BluePsyduck, dexteritas</em>




	</div>
	
	<div class="panel-inset-lighter mt0">
		<div class="post-header">
  <div class="panel">
    <div class="outer">
      <img class="inner" src="/assets/ALTF4/33/thumbnail.jpg" alt="" style="margin: 1px;">
    </div>
  </div>
  <details class="panel toc">
    <summary>
      <h2>Inhaltsverzeichnis</h2>
    </summary>
    <div class="panel-inset mb0">
      <ul>
  <li>
<a href="#vanilla-gesch%C3%BCttelt-nicht-ger%C3%BChrt-villfuk02">Vanilla: Geschüttelt, nicht gerührt <author>Villfuk02</author></a>
    <ul>
      <li><a href="#wie-es-begann">Wie es begann</a></li>
      <li><a href="#nicht-so-einfach-wie-es-scheint">Nicht so einfach wie es scheint</a></li>
      <li><a href="#die-ersten-paar-probleme">Die ersten paar Probleme</a></li>
      <li><a href="#rohe-ressourcen-ausgleichen">Rohe Ressourcen ausgleichen</a></li>
      <li><a href="#wir-m%C3%BCssen-tiefer">Wir müssen tiefer</a></li>
      <li><a href="#mein-erzfeind">Mein Erzfeind</a></li>
      <li><a href="#letzte-gedanken">Letzte Gedanken</a></li>
    </ul>
  </li>
  <li><a href="#comfy-minesweeper-redlabel">COMFY Minesweeper! <author>redlabel</author></a></li>
  <li><a href="#beitragen">Beitragen</a></li>
</ul>

    </div>
  </details>
</div>




<p>In dieser wunderbaren 33. Ausgabe von Alt-F4 präsentiert <em>Villfuk02</em> seine neuste Mod: Den Rezepte-Zufallsgenerator! Die Designprobleme, die man für einen guten Zufallsgenerator lösen muss, stehen hierbei besonders im Rampenlicht. Danach kündigt <em>redlabel</em> das neuste COMFY Event an, welches vermutlich sehr <em>bombastisch</em> wird.</p>
      <h2 id="vanilla-geschüttelt-nicht-gerührt-villfuk02">
        
        
            <a href="#vanilla-gesch%C3%BCttelt-nicht-ger%C3%BChrt-villfuk02" class="anchor" style="text-decoration: none;">Vanilla: Geschüttelt, nicht gerührt <author>Villfuk02</author></a>
          
        
      </h2>
    

<p><a href="https://mods.factorio.com/mod/ZRecipeRandomizer"><em>Vill‘s Recipe Randomizer</em></a> (zu Deutsch: „Vills Rezepte-Zufallsgenerator“) macht genau, was der Name vermuten lässt – er würfelt Rezepte neu. Auf den ersten Blick mag das zwar nach einer sehr dummen, aber einfachen Idee klingen, allerdings wird es sehr schnell sehr komplex, wenn du versuchst es weniger dumm zu machen.</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      <figure>
        <img src="https://media.alt-f4.blog/ALTF4/33/spaghetti-sample.jpg" alt="Gratis Spaghetti-Kostprobe" style="max-width: ; max-height:  ">
        
        <figcaption>Eine Beispielfabrik, welche Produktionswissenschaftspakete aus Ablenker-Kapseln, Stromschaltern und Brennstoff für Flammenwerfer herstellt.</figcaption>
      </figure>
      
      
</div>
<p></p>
<p><!-- Spacing --></p>
      <h3 id="wie-es-begann">
        
        
            <a href="#wie-es-begann" class="anchor" style="text-decoration: none;">Wie es begann</a>
          
        
      </h3>
    

<p>Angefangen habe ich mit dem Projekt im September 2020. Damals wollte ich eine Mod machen, die sowohl einfach, als auch einzigartig ist. Sie war nicht gedacht, spielbar zu sein, oder sogar gut, sondern nur etwas lustiges zum Programmieren. Nachdem ich auf ein paar Probleme gestoßen bin, gab ich mit dem Hintergedanken, dass sowieso niemand die Mod spielen würde, auf <del>und fasste Programmieren nie wieder an.</del></p>

<p>Nach zwei weiteren gescheiterten Projekten zog es mich zurück zu Factorio, diesmal als Spieler. Ich spielte Vanilla, dann Industrial Revolution 2 und dann probierte ich Space Exploration. Ich liebe Überholungsmods, weil ich dadurch neue Rezepte lernen, neue Fabriklayouts entdecken, und neue Logistikprobleme lösen kann. Aber die meisten Überholungsmods beanspruchen sehr viel Zeit und werden schnell langweilig. Das war der Punkt, an dem mir auffiel, zufällige Rezepte haben sogar einen Zweck: Sie sind wie ein unendlicher Vorrat an Überholungsmods, die dabei das Vanillagefühl behalten! Das beste dabei für mich war aber, dass ich keine neuen Maschinen oder Grafiken machen muss, weil ich ja nur mit Zahlen und Buchstaben herumspiele.</p>
      <h3 id="nicht-so-einfach-wie-es-scheint">
        
        
            <a href="#nicht-so-einfach-wie-es-scheint" class="anchor" style="text-decoration: none;">Nicht so einfach wie es scheint</a>
          
        
      </h3>
    

<p>Die Mod könnte einfach jedes Rezept nehmen und zufällige Gegenstände als Input verlangen. Das wäre ziemlich nutzlos, wenn zum Beispiel rote Wissenschaft Kernbrennstoff als Zutat brauchen würde, aber du ihn noch nicht freigeschalten hast. Daher ließ ich es sich durch die Technologien graben, und für jedes Rezept, dass freigeschaltet wird, nur Gegenstände von früheren Technologien nehmen. Es gibt natürlich Ausnahmen mit manchen Mods, bei denen du ein Rezept freischalten kannst, bevor du es auch herstellen kannst, also vielleicht sollte ich ein bisschen vorsichtiger sein.</p>

<p>Du willst vermutlich unterirdische Fließbänder nicht aus Dampfmaschinen und Laboren herstellen, das wäre viel zu teuer. Ich brauchte einen Weg, die Rezepte auszugleichen. Daher entschied ich mich, einen Algorithmus zu implementieren, der den Wert jedes Gegenstandes anhand der benötigten Ressourcen berechnet. Wir können uns ohne Problem berechnen, dass ein Schaltkreis 1 Eisenerz und 1,5 Kupfererz benötigt:</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      <figure>
        <img src="https://media.alt-f4.blog/ALTF4/33/electronic-circuit.jpg" alt="Wie es gemacht wird: Elektronische Schaltkreise" style="max-width: ; max-height:  ">
        
        <figcaption>1,5 Kupfererz plus 1 Eisenerz resultieren in einem elektronischen Schaltkreis.</figcaption>
      </figure>
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>Sagen wir, dass Kupfer- und Eisenerz beide einen Wert von 1 haben. Das heißt, elektrische Schaltkreise einen Wert von 2,5 haben. Jetzt kann der Zufallsgenerator zum Beispiel ein Fließband (Wert 1,5) und ein Kupfererz (Wert 1) als neues Rezept für Schaltkreis festlegen. Es gibt ein bisschen Variation im Endergebnis, was die Rezepte etwas einzigartiger macht, aber viel wichtiger, wird es dadurch auch einfacher, eine gültige Kombination zu finden, was den Zufallsgenerator schneller macht.</p>

<p>Mit diesem Stand veröffentlichte ich die Mod, und durch einiges an Feedback und Testen wurde schnell klar, dass es (natürlicherweise) viele Bugs und zwei „große“ Probleme gab. <em>Groß</em> unter Anführungszeichen, da die Mod trotzdem wesentlich spielbarer war, als man von so viel Zufall vermuten möge. Ich wollte aber Spielern ein angenehmes Erlebnis bieten, nicht nur ein Erlebnis.</p>
      <h3 id="die-ersten-paar-probleme">
        
        
            <a href="#die-ersten-paar-probleme" class="anchor" style="text-decoration: none;">Die ersten paar Probleme</a>
          
        
      </h3>
    

<p>Das erste Problem war Holz. Die Standardeinstellung stellte sicher, dass Holz nicht gewürfelt wird, aber viele Rezepte verwenden hölzerne Strommasten! Die Lösung <del>hätte</del> war ziemlich einfach und langweilig, wie du dir vorstellen kannst. Ich habe einen Marker für „unzufällige“ Ressourcen – wie Holz – hinzugefügt, und jeder Gegenstand der etwas mit diesem Marker benötigte, hat ihn auch übernommen.</p>

<p>Das zweite war, dass selbst wenn Rezepte die richtige Menge and Ressourcen benötigt haben, sie oft zu komplex und unfair waren. Die Mod beachtete nicht die Anzahl an Schritten oder Zeit eines Fertigungsprozess. Ein gutes Beispiel ist die (rote) Automatisierungwissenschaft. Sie ist sehr billig, mit einem Wert von nur 3, aber benötigt 5 Sekunden zum Herstellen. Sie wurde in vielen einfachen Komponenten ähnlich wie Eisenzahnräder verwendet. Ihre lange Herstellungszeit hieß, dass du etliche Montagemaschinen benötigen könntest, nur um unterirdische Fließbänder herzustellen. Ein weiteres problematisches Bespiel ist, dass einfache Gegenstände wie Eisenzahnräder viele Schritte benötigen könnten, wie zum Beispiel mit Ziegelsteinen, welche aus Eisenstangen, welche wiederum aus Röhren gemacht werden könnten usw. Daher hab ich einen zweiten Wert namens Komplexität zu jedem Gegenstand hinzugefügt. Komplexität beachtet die Anzahl an Schritten, die Menge unterschiedlicher Zutaten (und Produkte) und auch die Zeit.</p>
      <h3 id="rohe-ressourcen-ausgleichen">
        
        
            <a href="#rohe-ressourcen-ausgleichen" class="anchor" style="text-decoration: none;">Rohe Ressourcen ausgleichen</a>
          
        
      </h3>
    

<p>Es wirkt, als wäre ich am perfektem Zufallsgenerator angekommen, aber wieder mal zeigten sich einige Probleme (und Bugs). Häufig nutzen viele Rezepte hauptsächlich eine Ressource (oft Eisen oder Stein), was recht fad war, da du weit nach Erz suchen musstest, weil du einfach so viel von der gewählten Zutat benötigst. Und Öl wurde öfters nicht einmal benötigt, um überhaupt eine Rakete zu starten. Für jedes Rezept war es für alle Gegenstände gleich wahrscheinlich, gewählt zu werden, daher übertrafen Gegenstände ohne Öl die paar wenigen mit Öl in Anzahl massiv. Ich habe ein bisschen probiert, den Algorithmus in die richtige Richtung zu schieben, aber nichts hat wirklich funktioniert. Ich könnte ihm einfach sagen, mehr Plastik oder Festbrennstoff oder so zu verwenden, aber was wenn du mit Mods spielen willst, und es noch mehr Gegenstände zum Priorisieren gibt? Ich will eine universelle Lösung.</p>

<p>Mir war bereits ein Ansatz bekannt, der das lösen könnte, aber ich wollte ihn nicht implementieren, da es alles wesentlich komplizierter gemacht hätte. Das würde mehr Entwicklungszeit, mehr Bugs und potenziell wesentlich längere Ladezeiten mit sich bringen. Aber nachdem ich erfolglos versucht habe über einen einfacheren Weg ein ähnliches Ergebnis zu erzielen, entschloss ich mich doch diese kompliziertere Lösung zu nehmen.</p>

<p>Die Idee war es die Anzahl an rohen Ressourcen statt nur dem Wert zu nehmen. Dadurch kann die Mod sicherstellen, dass jedes zufällige Ergebnis die richtige Menge an roher Ressourcen nimmt, sicherstellend dass alle Rohzutaten genutzt werden. Ähnlich wie beim gesamten Wert dürfen die Rohzutaten für jedes Rezept ein bisschen variieren, oder je nach Mod-Einstellungen auch komplett zufällig sein. Recht einfach, oder? Naja, anstatt mit einer Nummer zu rechnen muss ich jetzt mehrere Zahlen beachten und die Logik ist auch um einiges komplexer. Glücklicherweise funktioniert die Mod dank einigen Optimierungen und gründlichem Testen trotzdem noch und ist weiterhin recht schnell.</p>

<p>Und das ist die Geschichte von <em>Vill‘s Recipe Randomizer</em>!</p>
      <h3 id="wir-müssen-tiefer">
        
        
            <a href="#wir-m%C3%BCssen-tiefer" class="anchor" style="text-decoration: none;">Wir müssen tiefer</a>
          
        
      </h3>
    

<p>Außer dass ich ein paar GROẞE Probleme nicht angesprochen habe (beachte die fehlenden Anführungszeichen und die Großbuchstaben), welche von Anfang an da waren. Eines davon sind Rezeptschleifen. Der Algorithmus könnte beim Versuch, den Wert eines Rezeptes zu berechnen, stecken bleiben, oder ihn falsch berechnen. Schleifen innerhalb eines Rezeptes sind einfach zu lösen: Um das Rezept zu quantifizieren entfernt der Algorithmus die Gegenstände, die auf beiden Seiten – Input und Output – auftauchen, und löst dadurch die Schleife. Er kann dann die entfernten Gegenstände wieder hinzufügen, da deren Wert jetzt bekannt ist, um das Rezept zum Würfeln fertig zu machen. In Vanilla trifft das auf den Kovarex-Anreicherungsprozess und Kohleverflüssigung zu:</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      <figure>
        <img src="https://media.alt-f4.blog/ALTF4/33/kovarex-and-liquefaction.jpg" alt="Räum es auf!" style="max-width: ; max-height:  ">
        
        <figcaption>40 U-235 und 2 U-238 können von Kovarex und 25 Schweröl können von Kohleverflüssigung entfernt werden.</figcaption>
      </figure>
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>Schleifen mit mehr als einem Rezept sind etwas schwieriger. Es gibt in Vanilla keine Schleifen mit mehr als einem Rezept (abgesehen von Fässer füllen und leeren, welche standardmäßig aber sowieso nicht verändert werden), daher sind sie ziemlich einfach zu übersehen, aber in Mods gibt es sie überall! Der Zufallsgenerator kann unter bestimmten Bedingungen eventuell aus Versehen eine Schleife machen. Um das Problem zu illustrieren, brauchen wir ein Beispiel. Nehmen wir synthetische Saphire in Industrial Revolution 2. Du braucht reines Nickel, Siliziumdioxid, und Saphirstaub um Saphire herzustellen, aber Saphirstaub wird durch Zerschmettern von Saphiren gemacht, wodurch eine Schleife entsteht:</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      
        <img src="https://media.alt-f4.blog/ALTF4/33/sapphire-loop.jpg" alt="Saphir-Schleife" style="max-width: ; max-height:  ">
        
        
      
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>Ich habe dieses Problem behoben, indem ich Schleifen, wenn sie entdeckt werden, aufschneide, und die Rezepte dann in eines zusammenfüge. Das neue Rezept wird dann statt der geöffneten Schleife für die Berechnungen verwendet. Hier werden die beiden Rezepte zusammengefügt, indem die drei Saphirstaub in der Mitte entfernt werden, und dann können wir noch zwei Saphire, die sowohl im Input als auch im Output vorhanden sind, entfernen:</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      
        <img src="https://media.alt-f4.blog/ALTF4/33/sapphire-unlooped.jpg" alt="„Entschleifter“ Saphir" style="max-width: ; max-height:  ">
        
        
      
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>Wir bekommen damit ein Rezept für Saphire, das die problematischen Details weglässt! Aber was passiert, wenn es Abzweigungen in Schleifen, oder Schleifen in Schleifen gibt?</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      <figure>
        <img src="https://media.alt-f4.blog/ALTF4/33/loopy.jpg" alt="„Schleifiges“ Diagramm" style="max-width: ; max-height:  ">
        
        <figcaption>Das basiert nicht auf irgendeinem bestimmten Rezept, aber ich bin mir sicher, dass etwas mindestens so kompliziertes wie im Diagramm in irgendeiner Mod existiert.</figcaption>
      </figure>
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>Sagen wir einfach, es wird <em>schleifig</em>. Ich glaube ich habe das halbwegs gelöst, aber ich werde jetzt nicht weiter ins Detail gehen, wir sind hier ja schließlich nicht in einem Graphentheoriekurs, und ich bin mir auch nicht einmal sicher, ob meine Lösung überhaupt funktioniert.</p>
      <h3 id="mein-erzfeind">
        
        
            <a href="#mein-erzfeind" class="anchor" style="text-decoration: none;">Mein Erzfeind</a>
          
        
      </h3>
    

<p>Und jetzt das größte aller Probleme: Rezepte mit mehreren Produkten. Nehmen wir fortgeschrittene Ölverarbeitung als Beispiel.</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      
        <img src="https://media.alt-f4.blog/ALTF4/33/advanced-oil-processing.jpg" alt="Fortgeschrittene Ölverarbeitung" style="max-width: ; max-height:  ">
        
        
      
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>Standardmäßig hat Rohöl einen Wert von 0,4 (wir ignorieren Wasser fürs erste). Das heißt, das Rezept hat einen Gesamtwert von 40. Wir wissen daher, dass 25 Schweröl + 45 Leichtöl + 55 Flüssiggas einen Wert von insgesamt 40 haben, aber wie teilt sich das auf die einzelnen Produkte auf? Es gibt viele Wege, das anzugehen, und es zu versuchen hat das meiste meiner Zeit gekostet und mir viele Kopfschmerzen bereitet. Gehen wir mal durch die zwei unterschiedlichsten Möglichkeiten.</p>

<p>Die einfachste: Jedes Produkt bekommt einen gleichen Teil des Gesamtwerts. Das ist großteils sinnvoll, bis du Abfallprodukte beachtest. Kovarex-Anreicherung zum Beispiel stellt 41 U-235 und 2 U-238 her, und der Algorithmus würde davon ausgehen, beide hätten denselben Wert, aber du wirst vermutlich wissen, dass U-235 wesentlich wertvoller ist. Dieser Ansatz ist daher nicht wirklich hilfreich.</p>

<p>Die „beste“: Jeder Teil bekommt den vollen Wert, aber merke die Nebenprodukte, damit du sie später abziehen kannst. Zum Beispiel hat Schweröl bei fortgeschrittener Ölverarbeitung Leichtöl und Flüssiggas als Nebenprodukte. Das heißt Schmiermittel hat sie auch als Nebenprodukte, weil es nur aus Schweröl hergestellt wird. Wenn wir ein Express-Teilerfließband herstellen wollen, brauchen wir unter anderem Schmiermittel und erweiterte Schaltkreise. Erweiterte Schaltkreise benötigen Flüssiggas, aber wir haben noch etwas als Nebenprodukt vom Schmiermittel über, von dem wir es abziehen können. Als einziges Nebenprodukt ist jetzt nur noch Leichtöl übrig. Was machen wir mit Leichtöl? Wir können es natürlich zu Flüssiggas spalten, um noch mehr davon zu sparen. Aber das braucht Wasser. Ist es billiger mehr Wasser oder mehr Flüssiggas zu verwenden? Berechnen wir sicherheitshalber mal beide Möglichkeiten, für alle Fälle.</p>

<p>Wie dir vielleicht auffällt, ist dieser Ansatz unglaublich kompliziert. Es gibt viele Randfälle und Fragen zu beantworten. Wie, was machst du mit überflüssigen Nebenprodukten, wenn andere Rezepte sie nicht brauchen? Ich habe versucht eine Version dieses Ansatzes zu implementieren, und muss sagen, sie war sogar ziemlich erfolgreich. Es hat nur zirka 100 Stunden gebraucht und ich musste etwa eine Million Bugs beheben, und was war das Ergebnis? Naja, die Lösung ist immer noch nicht perfekt, auch wenn sie sehr nahe kommt. Ich kann aber auch nicht einmal mehr meinen eigenen Code verstehen. Alles zerfällt jedes mal, wenn ich irgendwas ändern will. Und am dramatischsten, die Mod in Vanilla Factorio zu laden braucht irgendwas zwischen 10 Sekunden und 10 Minuten. Nachdem ich die Mod mit so vielen anderen Mods wie möglich kompatibel halten will (und Funktionalität mit Vanilla wäre auch nice), entschied ich mich, dass das nicht die Lösung ist.</p>

<p>Schlussendlich, nach noch mehr Denken, bin ich zu dem Algorithmus gekommen, den ich heute verwende. Er ist eigentlich ein Kompromiss zwischen den beiden oben beschriebenen Ansätzen. Er funktioniert gut und ist recht einfach, wenn auch nicht einfach genug, um ihn zu erklären, da ich etliche andere Eigenarten auch erklären müsste. Er evaluiert nicht alle Rezepte mit mehreren Produkten in allen Fällen gleich gut, aber er bereitet auch bei Randfällen keine Probleme (hoffe ich).</p>
      <h3 id="letzte-gedanken">
        
        
            <a href="#letzte-gedanken" class="anchor" style="text-decoration: none;">Letzte Gedanken</a>
          
        
      </h3>
    

<p>Damit wäre ich mit dem Einblick in das Innenleben meines <em>Recipe Randomizer</em> am Ende. Falls du noch weitere Fragen oder Vorschläge hast, kannst du mir auf <a href="https://discord.gg/jn4nRrrB6d">meinem Discord-Server</a> schreiben. Und wenn wir schon dabei sind, möchte ich allen Leuten danken, die beigetreten sind, um Bugs, Ideen und Getestetes zu posten oder mich anders während der Entwicklung unterstützt haben. Die Mod wäre ohne euch nicht so weit gekommen!</p>
      <h2 id="comfy-minesweeper-redlabel">
        
        
            <a href="#comfy-minesweeper-redlabel" class="anchor" style="text-decoration: none;">COMFY Minesweeper! <author>redlabel</author></a>
          
        
      </h2>
    

<p>Um eine neue Karte vom legendären Kartenersteller <a href="https://github.com/M3wM3w">mewmew</a> und einem glänzend neuem Ryzen 9 5950X von <a href="https://github.com/Gerkiz">Gerkiz</a> zu feiern, organisiert <a href="https://getcomfy.eu/">COMFY</a> Factorio ein spezielles Event am 1. Mai um 19 Uhr MESZ. Jeder ist inkl. Familie eingeladen, eine Antwort wird nicht benötigt.</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      
        <img src="https://media.alt-f4.blog/ALTF4/33/comfyimage.jpg" alt="Minesweeper in Factorio" style="max-width: ; max-height:  ">
        
        
      
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>Falls sich jemand wundert, was Minesweeper ist: Es ist eine neue Karte, bei der du die Basis vergrößerst, indem du ein <em>Minesweeper</em>-Puzzle löst. Um eine Mine zu entschärfen, musst du einen Ofen darauf platzieren. Ihn auf einer freien Kachel zu platzieren löst eine Explosion aus, und draufzusteigen führt zum selben Ergebnis. Fehler sind teuer, da sie Beißer freilassen und Atomexplosionen verursachen. Spieler können auch Punkte bekommen (oder verlieren), je nachdem wie gut sie sind, und sich über eine Anzeigetafel vergleichen, welche die Punkte anzeigt.</p>

<p>COMFY ist eine der führenden Mehrspieler-Factorio-Communities und einige unserer <a href="https://github.com/M3wM3w/ComfyFactorio">Werke</a> sind Bergfestungen, Beißerschlachten, Fischverteidigung, Chronozug und Cave Miner. Und sehr, sehr bald eine Karte über Piraten und Segelschiffe! Bleib also dran.</p>

<p>Du kannst der COMFY-Community mit fast 3500 Mitgliedern auf unserem <a href="https://getcomfy.eu/discord">Discord</a> beitreten.</p>

<p></p>
<!-- Use include.data in the ID as it makes it unique -->
<p class="center">
  <span class="countdown" id="countdown-2021-5-1-17-00-00">
    <span id="past-text">Der Countdown ist vorbei</span>

    <span id="days"></span>
    <span id="hours"></span>
    <span id="minutes"></span>
    <span id="seconds"></span>
  </span>

  <script>
    const second = 1000
    const minute = second * 60
    const hour = minute * 60
    const day = hour * 24

    const countdownEl = document.getElementById('countdown-2021-5-1-17-00-00');

    const daysEl = document.querySelector('#countdown-2021-5-1-17-00-00 #days');
    const hoursEl = document.querySelector('#countdown-2021-5-1-17-00-00 #hours');
    const minutesEl = document.querySelector('#countdown-2021-5-1-17-00-00 #minutes');
    const secondsEl = document.querySelector('#countdown-2021-5-1-17-00-00 #seconds');

    const countdownDate = new Date(Date.UTC(...('2021:5:1:17:00:00'.split(':').map((x, i) => parseInt(x) + (i === 1 ? -1 : 0)))));

    const interval = setInterval(updateCountdown, second);

    function updateCountdown() {
      const distance = countdownDate - Date.now();

      if (distance < 0) {
        countdownEl.classList.add('past');

        clearInterval(interval);

        return;
      }

      daysEl.textContent = Math.floor(distance / day).toString().padStart(2, '0');
      hoursEl.textContent = Math.floor((distance % day) / hour).toString().padStart(2, '0');
      minutesEl.textContent = Math.floor((distance % hour) / minute).toString().padStart(2, '0');
      secondsEl.textContent = Math.floor((distance % minute) / second).toString().padStart(2, '0');
    }

    updateCountdown();
  </script>
</p>
      <h2 id="beitragen">
        
        
            <a href="#beitragen" class="anchor" style="text-decoration: none;">Beitragen</a>
          
        
      </h2>
    

<p>Wie immer suchen wir nach Leuten, die zu Alt-F4 beitragen wollen, sei es mit einem Artikel oder durch Hilfe bei Übersetzungen. Wenn du etwas Interessantes im Kopf hast, das du mit der Community in einer eleganten Art teilen möchtest, hier kannst du das tun. Falls du dir unsicher bist, beantworten wir gerne Fragen zu Inhalt und Struktur. Falls das nach  etwas klingt, woran du interessiert bist, tritt unserem <a href="https://alt-f4.blog/de/discord">Discord</a> bei, um es nicht zu verpassen!</p>





<script>
  (() => {
    if (window.innerWidth >= 720) {
      document.getElementsByClassName('toc')[0].setAttribute('open', '')
    }
  })()
</script>

		
<div class="flex flex-column flex-items-center mt8">
  
  <a class="button-green-right m4" style="width: 16em;" href="https://forums.factorio.com/viewtopic.php?f=5&t=98132">
    Im Factorio-Forum diskutieren
  </a>
  
  
  <a class="button-green-right m4" style="width: 16em;" href="https://www.reddit.com/r/factorio/comments/n1ssvv/altf4_33_vanilla_shaken_not_stirred/">
    Auf Reddit diskutieren
  </a>
  
  
  <a class="button-green-right m4" style="width: 16em;" href="https://alt-f4.blog/de/discord">
    Auf Discord diskutieren
  </a>
  
</div>


	</div>
	<div class="panel-inset mb0 p4 flex">
		<div>
		<!-- Previous Button -->
		
		<a href="/de/ALTF4-32/" class="button square-sm"><i class="fas fa-angle-double-left"></i></a>
		
		<a class="button square-sm" href="/de/">
			<i class="fas fa-home"></i>
		</a>

		<!-- Next Button -->
		
		<a href="/de/ALTF4-34/" class="button square-sm">
			<i class="fas fa-angle-double-right"></i>
		</a>
		
		</div>
	</div>
</article>

      </div>
    </div>


    <!-- Footer -->
    <footer class="footer">
  <div class="footer-inner panel">

    <div class="footer-links panel-inset slots p1 mt0 mb0">
      <a href="/de/about" class="slot" title="About">
        <div class="slot-button">
          <i class="fas fa-info"></i>
        </div>
      </a>
      <a href="https://github.com/AlternativeFFFF/Alt-F4" class="slot" title="Github">
        <div class="slot-button">
          <i class="fab fa-github"></i>
        </div>
      </a>
      <a href="https://alt-f4.blog/de/discord" class="slot" title="Discord">
        <div class="slot-button">
          <i class="fab fa-discord"></i>
        </div>
      </a>
      <a href="/de/atom.xml" type="application/atom+xml" rel="alternate" class="slot" title="ATOM Feed">
        <div class="slot-button">
          <i class="fas fa-rss"></i>
        </div>
      </a>
      <a href="https://www.freelists.org/list/alt-f4" class="slot" title="Email Newsletter">
        <div class="slot-button">
          <i class="fas fa-envelope"></i>
        </div>
      </a>

      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
    </div>
    <div class="footer-rocket panel-inset m0">
      <div class="spidertron-center">
        <div id="spidertron" class="spidertron-home" data-spidertron-scale="0.6" data-spidertron-speed="400"></div>
      </div>
      <div class="shadow-overlay"></div>
      <div class="shadow-overlay-bottom"></div>
    </div>
    <div class="footer-copyright panel-inset m0">
      Diese Webseite ist ein Fan-Projekt und steht nicht in direkter Verbindung zu Wube Software
    </div>
  </div>
</footer>

  </body>

</html>
