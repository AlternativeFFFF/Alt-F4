<!DOCTYPE html>
<html lang="fr" class="fr">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Alt-F4 n°51 - L'expérience Fluidic Power</title>
	<!-- Meta -->
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v4.1.1">
<meta property="og:title" content="Alt-F4 n°51 - L’expérience Fluidic Power">
<meta name="author" content="stringweasel">
<meta property="og:locale" content="fr">
<meta name="description" content="Pour la parution n°51 de Alt-F4, notre ancien contributeur et éditeur extraordinaire stringweasel nous régale avec la plongée dans l’histoire des mods qui tentent de rendre le réseau électrique de Factorio plus réaliste. Chacun d’entre eux a des avantages et des inconvénients, et c’est pourquoi il nous présente sa propre solution à ce vieux problème, avec de bons résultats ! Le projet Fluidic Power stringweasel Depuis ma formation en ingénierie électronique, je vois le flux d’électricité partout où je regarde. La vague de voitures qui progresse en sens inverse dans les embouteillages est, à mes yeux, le mouvement des électrons. Ce qui est encore plus intéressant, c’est la similitude entre le flux d’électricité et le mouvement des fluides. Lorsque je tire la chasse d’eau et que cela crée un tourbillon, je vois une inductance qui est chargée par un condensateur. Lorsque je ferme soudainement le robinet et que j’entends le martèlement de l’eau dans les tuyaux, je vois la pointe de tension d’une inductance qui est utilisée pour les convertisseurs Boost. Ne serait-ce pas génial d’avoir ce comportement réaliste de l’électricité dans Factorio ? Pourquoi est-ce si difficile ? Tout d’abord, dans le jeu Factorio standard, l’électricité se comporte de manière idéale, ce qui signifie qu’il n’y a pas de résistance dans les câbles. Votre réseau électrique peut transmettre une puissance infinie sur des distances infinies, indéfiniment. C’est presque comme s’ils avaient attaché des supraconducteurs refroidis par cryogénie à des poteaux en bois bon marché. Cela fonctionne très bien pour les objectifs et les contraintes de ce jeu et convient parfaitement à la plupart des styles de jeu. Cependant, il y a toujours eu quelques joueurs à la recherche d’un peu plus de défi, se demandant si l’électricité ne pourrait pas être rendue plus réaliste, ou des joueurs qui ont envie de faire appel à des transformateurs pour éviter les chutes de tension sur de longues distances. Cependant, recréer des comportements électriques plus réalistes est (sans doute) hors de portée du Factorio standard et n’arrivera probablement jamais. C’est donc aux mods de remplir cette niche un peu sadique. Dans Factorio, les mods ne peuvent modifier que des caractéristiques prédéterminées du jeu, et les options disponibles pour l’électricité sont très limitées. C’est pourquoi les moddeurs ont souvent dû trouver des solutions de substitution intéressantes. L’un des principaux problèmes est qu’une fois que les poteaux électriques sont reliés par un câble en cuivre, le jeu transfère automatiquement l’électricité de manière interne. Et ça, des mods ne peuvent pas le modifier. Le seul accès réel au système électrique consiste à fournir ou à évacuer artificiellement de l’électricité à l’aide d’une interface d’énergie électrique (ci-après appelée IEE), mais cela ne change pas comment l’électricité est distribuée. Une autre possibilité est de retirer manuellement les câbles en cuivre des poteaux électriques pour gérer manuellement le flux d’électricité, mais cela supprimera toujours aussi la visualisation de la connexion des câbles, ce qui est gênant. Cela vous obligera également à calculer vous-même le transfert d’énergie dans le code du mod et à gérer artificiellement le réseau électrique, tout comme le jeu le ferait normalement en coulisse. Le problème est que les calculs effectués par un mod seront toujours plusieurs fois plus lents que si c’était le moteur du jeu qui les faisait. C’est pourquoi l’un des développeurs de Factorio Rseding91 a déclaré ce qui suit il y a quelques années, après que quelqu’un ait demandé un mod pour implémenter une chute de tension. [La tension] n’est pas la seule chose que vous allez vous inquiéter de voir chuter. Si vous utilisez un tel mod, vos UPS vont s’effondrer une fois que vous aurez construit plus d’un exemplaire de n’importe quoi :P [Voltage is] not the only thing you’re going to be worrying about dropping. Your UPS will TANK once you build more than a few of anything if you used such a mod :P — Rseding91, Développeur de Factorio Bien entendu, cela ne signifie pas que c’est impossible, même si ce n’est pas aussi performant que le Factorio standard. Les mods ont trouvé de magnifiques moyens de contourner toutes sortes d’obstacles, y compris ces limitations, et ont créé toutes sortes de mécanismes de jeu formidables, autrefois considérés comme irréalistes. Une brève histoire des refontes de l’électricité L’un des premiers mods de refonte de l’énergie a probablement été Flow Network, créé à l’époque de la version 0.13 de Factorio. En gros, un accumulateur invisible est placé sous chaque poteau électrique, créant ainsi une entité composite, une astuce très couramment utilisée dans les mods. Le câble en cuivre est ensuite retiré et remplacé par un câble logique rouge pour supprimer le transfert classique d’électricité, tout en conservant la possibilité de visualiser la connexion. L’énergie est ensuite distribuée manuellement entre ces accumulateurs cachés à l’aide d’un script personnalisé. Malheureusement, comme mentionné précédemment, cette méthode est très lente, car tous les calculs d’électricité sont effectués dans le mod et non gérés par Factorio lui-même. Ce système a cependant l’avantage d’être très personnalisable. Exemple de distribution électrique avec FlowNetwork, montrant la tension à un poteau électrique, le courant traversant le poteau et la chute de tension à ce poteau. Une autre tentative a vu le jour avec Factorio 0.15, appelée High Voltage. Il s’agit d’un mod assez intéressant avec beaucoup de parties mobiles. L’électricité est distribuée soit à haute tension, soit à tension normale, et les transformateurs et autres équipements sont soit des accumulateurs, soit des IEE. La distribution de l’électricité à haute tension est ensuite calculée manuellement avec des formules spécifiques, très similaire à ce que Flow Network avait fait. Cela a permis à l’auteur d’introduire des mécanismes intéressants comme les transformateurs qui ont besoin de temps pour “tourner”. La tension normale, quant à elle, alimente simplement vos machines et est distribuée à l’aide de câbles en cuivre, comme dans le jeu original, ce qui signifie qu’aucun calcul de modélisation n’est nécessaire. Par ailleurs, l’auteur a introduit un type de chute de tension sur la distance qui ne nécessite un calcul que lorsqu’un poteau électrique est placé. Si le poteau électrique placé est trop éloigné du transformateur, il ne pourra alimenter aucune machine. Ce qui se passe, c’est que le poteau électrique est silencieusement remplacé par un poteau avec une distance d’alimentation de zéro, ce qui signifie que le poteau sera toujours connecté au courant, mais qu’il ne pourra pas transmettre ce courant aux machines. Une solution plutôt brillante. Distribution d’énergie à haute tension montrant que les poteaux électriques se désactivent lorsqu’ils sont trop éloignés du transformateur. Il affiche également une superposition (lignes bleues et rouges) lors de la sélection d’un poteau électrique qui est très similaire à Fluidic Power Ces deux mods étaient très gourmands en performances et n’auraient probablement pas été adaptés aux grandes usines. Et ils n’ont jamais été mis à jour pour les nouvelles versions de Factorio. À mon avis, la meilleure solution moderne est probablement Power Overload de Xorimuth. Ici, le but est de diviser le réseau électrique en sous-réseaux distincts à l’aide de transformateurs. Il n’y a pas de changement réel de la puissance passant par un transformateur, et le transfert de puissance à travers celui-ci est calculé par le mod lui-même. Si un sous-réseau donné a un poteau électrique qui tire plus de puissance qu’il ne peut en supporter, il a une chance d’exploser ! Ce qui rend ce mod étonnant, c’est la propreté de son aspect et de sa convivialité, avec toutes les connexions en cuivre encore visibles. C’est parce que la plupart des composants nécessaires, comme les IEE que l’auteur exige pour la manipulation de la puissance, est déporté sur une surface complètement différente, tous connectés par des câbles en cuivre transdimentionnels ! Distribution de l’électricité de Power Overload, avec un transformateur qui ressemble à un commutateur d’alimentation électrique. Une dernière mention honorable serait Electric Transformators sur lequel je suis tombé par hasard un mois ou deux après la sortie de Fluidic Power. Il a une approche similaire à celle de Power Overload, mais sans les poteaux électriques qui explosent, ce qui signifie qu’il ne punit pas le fait de ne pas utiliser les transformateurs. Il a cependant trouvé une façon intéressante de construire des transformateurs qui ne nécessitent aucun calcul de puissance de la part du mod. Chaque transformateur est une entité composite avec une chaudière qui crée un fluide à partir de l’électricité, puis un générateur qui le retransforme en électricité. Cela signifie que les réseaux électriques sont déconnectés, mais que les calculs entre les réseaux sont toujours effectués par le moteur de jeu (beaucoup plus performant). Electric Transformators distribue l’électricité par le biais d’un transformateur au look plutôt sympa. Ces mods sont tous géniaux à leur manière et peuvent créer un style de jeu étonnant. Cependant, je me demandais si l’électricité pouvait être encore plus réaliste ? Pourrait-elle imiter encore plus fidèlement les fluides ? Et surtout, pouvons-nous créer un mécanisme qui pénaliserait de manière naturelle certains réseaux électriques en limitant le débit, ce qui encouragerait l’utilisation de transformateurs ? En quoi ai-je été différent ? Heureusement, Factorio dispose d’une simulation intégrée des fluides, qui est très bien optimisée et fonctionne avec le moteur du jeu. Cette simulation gère le pétrole dans vos réservoirs de stockage et la vapeur dans vos centrales nucléaires. Elle n’est pas parfaite et peut causer quelques maux de tête, mais elle fonctionne suffisamment bien. Cette simulation de fluide est exactement ce qu’il me faut pour imiter l’électricité qui circule comme un fluide. J’ai donc entrepris de la mettre en œuvre. Après de nombreuses heures à me démener avec la phase de données de Factorio, et à me battre avec des boîtes de fluides et des entités composites pendant bien trop longtemps, je suis finalement tombé sur une solution qui fonctionne. J’ai réussi à convertir l’électricité en un fluide (que j’appelle le fluide d’énergie) et à transformer tous les poteaux en tuyaux. Vous trouverez ci-dessous un exemple de machine à vapeur alimentant un four électrique à l’aide de Fluidic Power, montrant à la fois ce que vous verrez en utilisant le mod (à gauche) et ce qui se passe en coulisses (à droite). JuxtaposeJS De gauche à droite, on peut voir la production d’énergie, l’élévation de la tension, l’abaissement de la tension et la consommation d’énergie. Le fluide d’énergie s’écoulera vers les autres poteaux comme un fluide, tout comme l’eau ou tout autre fluide, et de là, il alimentera vos entités. L’unité de ce fluide d’énergie est le Joule (par exemple 10kJ), ce qui signifie que c’est de l’énergie qui est distribuée à travers les poteaux. L’unité aurait probablement pu être le Volt ou même le Coulomb (comme pour la charge électrique), mais l’utilisation de l’énergie s’intègre facilement aux mécanismes existants de Factorio. Cette mise en œuvre nécessite toutefois deux types de poteaux, à savoir les poteaux normaux et les poteaux sources. Les poteaux sources sont placés à côté de vos générateurs d’énergie, et ils créent le fluide d’énergie. Pour ce faire, on place sous le poteau une mini machine d’assemblage qui crée le fluide au bon débit en fonction d’une consommation d’énergie donnée. Pour alimenter vos machines, vous avez besoin de poteaux électriques normaux, sous lesquels se trouvent de mini générateurs (comme la machine à vapeur) qui retransforment le fluide en électricité. Cela permet également au fluide d’énergie de circuler à travers plusieurs poteaux jusqu’à l’endroit où il est nécessaire, tout comme vous pouvez enchaîner les machines à vapeur. Cela signifie également que je peux limiter la puissance que chaque poteau peut fournir aux machines qui l’entourent ! Voici le pseudo-code permettant de s’assurer que les poteaux électriques ont les bonnes caractéristiques. // La production d’énergie est déterminée par la consommation d’énergie de la machine d’assemblage du poteau source. power_production = (fluid_fuel_value * units_per_craft) / crafting_time // La consommation d’énergie est déterminée par le taux d’utilisation du fluide du générateur du poteau normal. power_consumption = fluid_fuel_value * fluid_usage_per_tick * 60 Viennent ensuite les transformateurs, qui ont un rôle vital à jouer dans un mod comme celui-ci, car comme nous le savons tous, les fluides ne se propagent pas très loin à haut débit. Dans le monde réel, un transformateur augmente la tension pour une distribution d’énergie plus efficace (pour faire simple). Fluidic Power n’a pas de tension à augmenter, mais le débit requis peut être simplifié en convertissant simplement l’énergie du fluide en une unité plus grande. Par exemple, la “haute tension” peut être obtenue en convertissant l’unité d’énergie du fluide à 1MJ au lieu de 1kJ. Cela signifie que pour la même quantité de flux de fluide, plus d’énergie circulera. Ce que j’apprécie vraiment dans cette implémentation, c’est la simplicité extrême de ces transformateurs. Tous les mods que j’ai mentionnés devaient calculer manuellement le transfert de puissance dans un transformateur ou créer des entités composites complexes, alors que j’ai simplement dû créer une machine d’assemblage avec une recette spécifique. Cette recette ne change pas la quantité totale d’énergie, mais la convertit en une forme plus ou moins dense. Le temps de fabrication de cette recette, ou la quantité d’unités de fluide qu’elle peut transformer, peut alors dicter la puissance d’entrée/sortie du transformateur ! // Exemple de recette de transformateur élévateur 1000 units of 1kJ fluid --&gt; 1 unit of 1MJ fluid // Débit de puissance du transformateur power_rating = fluid_output_amount * fluid_output_unit / time_per_craft Avec un minimum de bricolage, cela a permis d’obtenir un mécanisme de jeu intuitif et amusant. Le système est conçu de manière à ce que seule la tension la plus basse puisse alimenter vos machines ou accepter l’énergie générée. Ensuite, une fois que la tension est augmentée pour faciliter la distribution, le fluide haute tension ne peut circuler que via les grands poteaux électriques. Ces grands poteaux électriques sont également limités et ne peuvent alimenter aucune machine ni accepter aucune énergie générée. C’est probablement la partie de cette implémentation que je préfère. Cela signifie qu’il y a une incitation directe à créer un réseau de haute tension à travers votre base, et partout où vous voulez utiliser de l’énergie, vous devez utiliser des transformateurs. Exemple de ligne principale à haute tension (ligne pleine dans le jeu) avec des transformateurs abaissant la tension vers les machines (ligne pointillée dans le jeu). Cela permet une distribution simplifiée du courant. Enfin, le fait que l’énergie soit simulée comme un fluide modifie la conception des accumulateurs. Il ne s’agit plus d’une entité intelligente qui n’accepte que les surplus d’énergie et qui ne libère toute son énergie que lorsqu’elle est demandée. Au lieu de cela, c’est un simple réservoir de stockage qui agit comme un gros condensateur aveugle. Il n’accepte que le courant basse tension, ce qui signifie que vos parcs d’accumulateurs auront besoin de beaucoup de transformateurs. Il est possible de créer le même comportement que les accumulateurs classiques avec des circuits logiques amusants, mais sans cela, ils fonctionnent quand même assez bien, bien que moins efficacement. En conclusion Dans l’ensemble, j’ai été surpris et excité de trouver une implémentation qui remplissait la plupart de mes objectifs et créait naturellement les défis et les obstacles que j’avais imaginés. Et je n’ai pas eu à créer beaucoup de limitations artificielles pour le joueur, ce qui est un grand bonus. Je n’ai créé que le système fondamental et il se régule tout seul ! J’abuse de certains mécanismes, ce qui introduit quelques bizarreries comme le mélange accidentel de différents voltages ou le fait de ne pas montrer les connexions physiques en cuivre, mais c’est en fait très amusant à jouer. Cependant, une question reste : dans quelle mesure les performances de ce mod le rend-il encore jouable ? Ce mod nécessite beaucoup plus de calculs de fluide qu’un jeu traditionnel, et abuse de certains autres mécanismes. Le moteur hautement optimisé de Factorio peut-il tenir le coup, alors qu’il a été prédit qu’un tel mod ferait exploser vos UPS ? Je reviendrai plus en détail sur ce sujet la semaine prochaine. Pour finir sur un cliffhanger, ce que j’ai découvert pourrait vous surprendre. En tout cas, moi, ça m’a surpris. Lien vers la deuxième partie Contribuer Comme toujours, nous attendons vos contributions pour les Alt-F4, que cela soit par la soumission d’un article ou en aidant pour les traductions. Si vous avez quelque chose d’intéressant en tête que vous souhaitez partager avec la communauté, vous êtes au bon endroit. Si vous n’êtes pas sûr, nous serons heureux de vous aider en discutant structure, contenu et idées. Donc si vous voulez vous impliquer dans les Alt-F4, rejoignez-le Discord pour ne rien rater !">
<meta property="og:description" content="Pour la parution n°51 de Alt-F4, notre ancien contributeur et éditeur extraordinaire stringweasel nous régale avec la plongée dans l’histoire des mods qui tentent de rendre le réseau électrique de Factorio plus réaliste. Chacun d’entre eux a des avantages et des inconvénients, et c’est pourquoi il nous présente sa propre solution à ce vieux problème, avec de bons résultats ! Le projet Fluidic Power stringweasel Depuis ma formation en ingénierie électronique, je vois le flux d’électricité partout où je regarde. La vague de voitures qui progresse en sens inverse dans les embouteillages est, à mes yeux, le mouvement des électrons. Ce qui est encore plus intéressant, c’est la similitude entre le flux d’électricité et le mouvement des fluides. Lorsque je tire la chasse d’eau et que cela crée un tourbillon, je vois une inductance qui est chargée par un condensateur. Lorsque je ferme soudainement le robinet et que j’entends le martèlement de l’eau dans les tuyaux, je vois la pointe de tension d’une inductance qui est utilisée pour les convertisseurs Boost. Ne serait-ce pas génial d’avoir ce comportement réaliste de l’électricité dans Factorio ? Pourquoi est-ce si difficile ? Tout d’abord, dans le jeu Factorio standard, l’électricité se comporte de manière idéale, ce qui signifie qu’il n’y a pas de résistance dans les câbles. Votre réseau électrique peut transmettre une puissance infinie sur des distances infinies, indéfiniment. C’est presque comme s’ils avaient attaché des supraconducteurs refroidis par cryogénie à des poteaux en bois bon marché. Cela fonctionne très bien pour les objectifs et les contraintes de ce jeu et convient parfaitement à la plupart des styles de jeu. Cependant, il y a toujours eu quelques joueurs à la recherche d’un peu plus de défi, se demandant si l’électricité ne pourrait pas être rendue plus réaliste, ou des joueurs qui ont envie de faire appel à des transformateurs pour éviter les chutes de tension sur de longues distances. Cependant, recréer des comportements électriques plus réalistes est (sans doute) hors de portée du Factorio standard et n’arrivera probablement jamais. C’est donc aux mods de remplir cette niche un peu sadique. Dans Factorio, les mods ne peuvent modifier que des caractéristiques prédéterminées du jeu, et les options disponibles pour l’électricité sont très limitées. C’est pourquoi les moddeurs ont souvent dû trouver des solutions de substitution intéressantes. L’un des principaux problèmes est qu’une fois que les poteaux électriques sont reliés par un câble en cuivre, le jeu transfère automatiquement l’électricité de manière interne. Et ça, des mods ne peuvent pas le modifier. Le seul accès réel au système électrique consiste à fournir ou à évacuer artificiellement de l’électricité à l’aide d’une interface d’énergie électrique (ci-après appelée IEE), mais cela ne change pas comment l’électricité est distribuée. Une autre possibilité est de retirer manuellement les câbles en cuivre des poteaux électriques pour gérer manuellement le flux d’électricité, mais cela supprimera toujours aussi la visualisation de la connexion des câbles, ce qui est gênant. Cela vous obligera également à calculer vous-même le transfert d’énergie dans le code du mod et à gérer artificiellement le réseau électrique, tout comme le jeu le ferait normalement en coulisse. Le problème est que les calculs effectués par un mod seront toujours plusieurs fois plus lents que si c’était le moteur du jeu qui les faisait. C’est pourquoi l’un des développeurs de Factorio Rseding91 a déclaré ce qui suit il y a quelques années, après que quelqu’un ait demandé un mod pour implémenter une chute de tension. [La tension] n’est pas la seule chose que vous allez vous inquiéter de voir chuter. Si vous utilisez un tel mod, vos UPS vont s’effondrer une fois que vous aurez construit plus d’un exemplaire de n’importe quoi :P [Voltage is] not the only thing you’re going to be worrying about dropping. Your UPS will TANK once you build more than a few of anything if you used such a mod :P — Rseding91, Développeur de Factorio Bien entendu, cela ne signifie pas que c’est impossible, même si ce n’est pas aussi performant que le Factorio standard. Les mods ont trouvé de magnifiques moyens de contourner toutes sortes d’obstacles, y compris ces limitations, et ont créé toutes sortes de mécanismes de jeu formidables, autrefois considérés comme irréalistes. Une brève histoire des refontes de l’électricité L’un des premiers mods de refonte de l’énergie a probablement été Flow Network, créé à l’époque de la version 0.13 de Factorio. En gros, un accumulateur invisible est placé sous chaque poteau électrique, créant ainsi une entité composite, une astuce très couramment utilisée dans les mods. Le câble en cuivre est ensuite retiré et remplacé par un câble logique rouge pour supprimer le transfert classique d’électricité, tout en conservant la possibilité de visualiser la connexion. L’énergie est ensuite distribuée manuellement entre ces accumulateurs cachés à l’aide d’un script personnalisé. Malheureusement, comme mentionné précédemment, cette méthode est très lente, car tous les calculs d’électricité sont effectués dans le mod et non gérés par Factorio lui-même. Ce système a cependant l’avantage d’être très personnalisable. Exemple de distribution électrique avec FlowNetwork, montrant la tension à un poteau électrique, le courant traversant le poteau et la chute de tension à ce poteau. Une autre tentative a vu le jour avec Factorio 0.15, appelée High Voltage. Il s’agit d’un mod assez intéressant avec beaucoup de parties mobiles. L’électricité est distribuée soit à haute tension, soit à tension normale, et les transformateurs et autres équipements sont soit des accumulateurs, soit des IEE. La distribution de l’électricité à haute tension est ensuite calculée manuellement avec des formules spécifiques, très similaire à ce que Flow Network avait fait. Cela a permis à l’auteur d’introduire des mécanismes intéressants comme les transformateurs qui ont besoin de temps pour “tourner”. La tension normale, quant à elle, alimente simplement vos machines et est distribuée à l’aide de câbles en cuivre, comme dans le jeu original, ce qui signifie qu’aucun calcul de modélisation n’est nécessaire. Par ailleurs, l’auteur a introduit un type de chute de tension sur la distance qui ne nécessite un calcul que lorsqu’un poteau électrique est placé. Si le poteau électrique placé est trop éloigné du transformateur, il ne pourra alimenter aucune machine. Ce qui se passe, c’est que le poteau électrique est silencieusement remplacé par un poteau avec une distance d’alimentation de zéro, ce qui signifie que le poteau sera toujours connecté au courant, mais qu’il ne pourra pas transmettre ce courant aux machines. Une solution plutôt brillante. Distribution d’énergie à haute tension montrant que les poteaux électriques se désactivent lorsqu’ils sont trop éloignés du transformateur. Il affiche également une superposition (lignes bleues et rouges) lors de la sélection d’un poteau électrique qui est très similaire à Fluidic Power Ces deux mods étaient très gourmands en performances et n’auraient probablement pas été adaptés aux grandes usines. Et ils n’ont jamais été mis à jour pour les nouvelles versions de Factorio. À mon avis, la meilleure solution moderne est probablement Power Overload de Xorimuth. Ici, le but est de diviser le réseau électrique en sous-réseaux distincts à l’aide de transformateurs. Il n’y a pas de changement réel de la puissance passant par un transformateur, et le transfert de puissance à travers celui-ci est calculé par le mod lui-même. Si un sous-réseau donné a un poteau électrique qui tire plus de puissance qu’il ne peut en supporter, il a une chance d’exploser ! Ce qui rend ce mod étonnant, c’est la propreté de son aspect et de sa convivialité, avec toutes les connexions en cuivre encore visibles. C’est parce que la plupart des composants nécessaires, comme les IEE que l’auteur exige pour la manipulation de la puissance, est déporté sur une surface complètement différente, tous connectés par des câbles en cuivre transdimentionnels ! Distribution de l’électricité de Power Overload, avec un transformateur qui ressemble à un commutateur d’alimentation électrique. Une dernière mention honorable serait Electric Transformators sur lequel je suis tombé par hasard un mois ou deux après la sortie de Fluidic Power. Il a une approche similaire à celle de Power Overload, mais sans les poteaux électriques qui explosent, ce qui signifie qu’il ne punit pas le fait de ne pas utiliser les transformateurs. Il a cependant trouvé une façon intéressante de construire des transformateurs qui ne nécessitent aucun calcul de puissance de la part du mod. Chaque transformateur est une entité composite avec une chaudière qui crée un fluide à partir de l’électricité, puis un générateur qui le retransforme en électricité. Cela signifie que les réseaux électriques sont déconnectés, mais que les calculs entre les réseaux sont toujours effectués par le moteur de jeu (beaucoup plus performant). Electric Transformators distribue l’électricité par le biais d’un transformateur au look plutôt sympa. Ces mods sont tous géniaux à leur manière et peuvent créer un style de jeu étonnant. Cependant, je me demandais si l’électricité pouvait être encore plus réaliste ? Pourrait-elle imiter encore plus fidèlement les fluides ? Et surtout, pouvons-nous créer un mécanisme qui pénaliserait de manière naturelle certains réseaux électriques en limitant le débit, ce qui encouragerait l’utilisation de transformateurs ? En quoi ai-je été différent ? Heureusement, Factorio dispose d’une simulation intégrée des fluides, qui est très bien optimisée et fonctionne avec le moteur du jeu. Cette simulation gère le pétrole dans vos réservoirs de stockage et la vapeur dans vos centrales nucléaires. Elle n’est pas parfaite et peut causer quelques maux de tête, mais elle fonctionne suffisamment bien. Cette simulation de fluide est exactement ce qu’il me faut pour imiter l’électricité qui circule comme un fluide. J’ai donc entrepris de la mettre en œuvre. Après de nombreuses heures à me démener avec la phase de données de Factorio, et à me battre avec des boîtes de fluides et des entités composites pendant bien trop longtemps, je suis finalement tombé sur une solution qui fonctionne. J’ai réussi à convertir l’électricité en un fluide (que j’appelle le fluide d’énergie) et à transformer tous les poteaux en tuyaux. Vous trouverez ci-dessous un exemple de machine à vapeur alimentant un four électrique à l’aide de Fluidic Power, montrant à la fois ce que vous verrez en utilisant le mod (à gauche) et ce qui se passe en coulisses (à droite). JuxtaposeJS De gauche à droite, on peut voir la production d’énergie, l’élévation de la tension, l’abaissement de la tension et la consommation d’énergie. Le fluide d’énergie s’écoulera vers les autres poteaux comme un fluide, tout comme l’eau ou tout autre fluide, et de là, il alimentera vos entités. L’unité de ce fluide d’énergie est le Joule (par exemple 10kJ), ce qui signifie que c’est de l’énergie qui est distribuée à travers les poteaux. L’unité aurait probablement pu être le Volt ou même le Coulomb (comme pour la charge électrique), mais l’utilisation de l’énergie s’intègre facilement aux mécanismes existants de Factorio. Cette mise en œuvre nécessite toutefois deux types de poteaux, à savoir les poteaux normaux et les poteaux sources. Les poteaux sources sont placés à côté de vos générateurs d’énergie, et ils créent le fluide d’énergie. Pour ce faire, on place sous le poteau une mini machine d’assemblage qui crée le fluide au bon débit en fonction d’une consommation d’énergie donnée. Pour alimenter vos machines, vous avez besoin de poteaux électriques normaux, sous lesquels se trouvent de mini générateurs (comme la machine à vapeur) qui retransforment le fluide en électricité. Cela permet également au fluide d’énergie de circuler à travers plusieurs poteaux jusqu’à l’endroit où il est nécessaire, tout comme vous pouvez enchaîner les machines à vapeur. Cela signifie également que je peux limiter la puissance que chaque poteau peut fournir aux machines qui l’entourent ! Voici le pseudo-code permettant de s’assurer que les poteaux électriques ont les bonnes caractéristiques. // La production d’énergie est déterminée par la consommation d’énergie de la machine d’assemblage du poteau source. power_production = (fluid_fuel_value * units_per_craft) / crafting_time // La consommation d’énergie est déterminée par le taux d’utilisation du fluide du générateur du poteau normal. power_consumption = fluid_fuel_value * fluid_usage_per_tick * 60 Viennent ensuite les transformateurs, qui ont un rôle vital à jouer dans un mod comme celui-ci, car comme nous le savons tous, les fluides ne se propagent pas très loin à haut débit. Dans le monde réel, un transformateur augmente la tension pour une distribution d’énergie plus efficace (pour faire simple). Fluidic Power n’a pas de tension à augmenter, mais le débit requis peut être simplifié en convertissant simplement l’énergie du fluide en une unité plus grande. Par exemple, la “haute tension” peut être obtenue en convertissant l’unité d’énergie du fluide à 1MJ au lieu de 1kJ. Cela signifie que pour la même quantité de flux de fluide, plus d’énergie circulera. Ce que j’apprécie vraiment dans cette implémentation, c’est la simplicité extrême de ces transformateurs. Tous les mods que j’ai mentionnés devaient calculer manuellement le transfert de puissance dans un transformateur ou créer des entités composites complexes, alors que j’ai simplement dû créer une machine d’assemblage avec une recette spécifique. Cette recette ne change pas la quantité totale d’énergie, mais la convertit en une forme plus ou moins dense. Le temps de fabrication de cette recette, ou la quantité d’unités de fluide qu’elle peut transformer, peut alors dicter la puissance d’entrée/sortie du transformateur ! // Exemple de recette de transformateur élévateur 1000 units of 1kJ fluid --&gt; 1 unit of 1MJ fluid // Débit de puissance du transformateur power_rating = fluid_output_amount * fluid_output_unit / time_per_craft Avec un minimum de bricolage, cela a permis d’obtenir un mécanisme de jeu intuitif et amusant. Le système est conçu de manière à ce que seule la tension la plus basse puisse alimenter vos machines ou accepter l’énergie générée. Ensuite, une fois que la tension est augmentée pour faciliter la distribution, le fluide haute tension ne peut circuler que via les grands poteaux électriques. Ces grands poteaux électriques sont également limités et ne peuvent alimenter aucune machine ni accepter aucune énergie générée. C’est probablement la partie de cette implémentation que je préfère. Cela signifie qu’il y a une incitation directe à créer un réseau de haute tension à travers votre base, et partout où vous voulez utiliser de l’énergie, vous devez utiliser des transformateurs. Exemple de ligne principale à haute tension (ligne pleine dans le jeu) avec des transformateurs abaissant la tension vers les machines (ligne pointillée dans le jeu). Cela permet une distribution simplifiée du courant. Enfin, le fait que l’énergie soit simulée comme un fluide modifie la conception des accumulateurs. Il ne s’agit plus d’une entité intelligente qui n’accepte que les surplus d’énergie et qui ne libère toute son énergie que lorsqu’elle est demandée. Au lieu de cela, c’est un simple réservoir de stockage qui agit comme un gros condensateur aveugle. Il n’accepte que le courant basse tension, ce qui signifie que vos parcs d’accumulateurs auront besoin de beaucoup de transformateurs. Il est possible de créer le même comportement que les accumulateurs classiques avec des circuits logiques amusants, mais sans cela, ils fonctionnent quand même assez bien, bien que moins efficacement. En conclusion Dans l’ensemble, j’ai été surpris et excité de trouver une implémentation qui remplissait la plupart de mes objectifs et créait naturellement les défis et les obstacles que j’avais imaginés. Et je n’ai pas eu à créer beaucoup de limitations artificielles pour le joueur, ce qui est un grand bonus. Je n’ai créé que le système fondamental et il se régule tout seul ! J’abuse de certains mécanismes, ce qui introduit quelques bizarreries comme le mélange accidentel de différents voltages ou le fait de ne pas montrer les connexions physiques en cuivre, mais c’est en fait très amusant à jouer. Cependant, une question reste : dans quelle mesure les performances de ce mod le rend-il encore jouable ? Ce mod nécessite beaucoup plus de calculs de fluide qu’un jeu traditionnel, et abuse de certains autres mécanismes. Le moteur hautement optimisé de Factorio peut-il tenir le coup, alors qu’il a été prédit qu’un tel mod ferait exploser vos UPS ? Je reviendrai plus en détail sur ce sujet la semaine prochaine. Pour finir sur un cliffhanger, ce que j’ai découvert pourrait vous surprendre. En tout cas, moi, ça m’a surpris. Lien vers la deuxième partie Contribuer Comme toujours, nous attendons vos contributions pour les Alt-F4, que cela soit par la soumission d’un article ou en aidant pour les traductions. Si vous avez quelque chose d’intéressant en tête que vous souhaitez partager avec la communauté, vous êtes au bon endroit. Si vous n’êtes pas sûr, nous serons heureux de vous aider en discutant structure, contenu et idées. Donc si vous voulez vous impliquer dans les Alt-F4, rejoignez-le Discord pour ne rien rater !">
<link rel="canonical" href="https://alt-f4.blog/fr/ALTF4-51/">
<meta property="og:url" content="https://alt-f4.blog/ALTF4-51/">
<meta property="og:site_name" content="Alternative Friday Factorio Fan Facts">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2021-11-05T00:00:00+00:00">
<script type="application/ld+json">
{"datePublished":"2021-11-05T00:00:00+00:00","author":{"@type":"Person","name":"stringweasel"},"description":"Pour la parution n°51 de Alt-F4, notre ancien contributeur et éditeur extraordinaire stringweasel nous régale avec la plongée dans l’histoire des mods qui tentent de rendre le réseau électrique de Factorio plus réaliste. Chacun d’entre eux a des avantages et des inconvénients, et c’est pourquoi il nous présente sa propre solution à ce vieux problème, avec de bons résultats ! Le projet Fluidic Power stringweasel Depuis ma formation en ingénierie électronique, je vois le flux d’électricité partout où je regarde. La vague de voitures qui progresse en sens inverse dans les embouteillages est, à mes yeux, le mouvement des électrons. Ce qui est encore plus intéressant, c’est la similitude entre le flux d’électricité et le mouvement des fluides. Lorsque je tire la chasse d’eau et que cela crée un tourbillon, je vois une inductance qui est chargée par un condensateur. Lorsque je ferme soudainement le robinet et que j’entends le martèlement de l’eau dans les tuyaux, je vois la pointe de tension d’une inductance qui est utilisée pour les convertisseurs Boost. Ne serait-ce pas génial d’avoir ce comportement réaliste de l’électricité dans Factorio ? Pourquoi est-ce si difficile ? Tout d’abord, dans le jeu Factorio standard, l’électricité se comporte de manière idéale, ce qui signifie qu’il n’y a pas de résistance dans les câbles. Votre réseau électrique peut transmettre une puissance infinie sur des distances infinies, indéfiniment. C’est presque comme s’ils avaient attaché des supraconducteurs refroidis par cryogénie à des poteaux en bois bon marché. Cela fonctionne très bien pour les objectifs et les contraintes de ce jeu et convient parfaitement à la plupart des styles de jeu. Cependant, il y a toujours eu quelques joueurs à la recherche d’un peu plus de défi, se demandant si l’électricité ne pourrait pas être rendue plus réaliste, ou des joueurs qui ont envie de faire appel à des transformateurs pour éviter les chutes de tension sur de longues distances. Cependant, recréer des comportements électriques plus réalistes est (sans doute) hors de portée du Factorio standard et n’arrivera probablement jamais. C’est donc aux mods de remplir cette niche un peu sadique. Dans Factorio, les mods ne peuvent modifier que des caractéristiques prédéterminées du jeu, et les options disponibles pour l’électricité sont très limitées. C’est pourquoi les moddeurs ont souvent dû trouver des solutions de substitution intéressantes. L’un des principaux problèmes est qu’une fois que les poteaux électriques sont reliés par un câble en cuivre, le jeu transfère automatiquement l’électricité de manière interne. Et ça, des mods ne peuvent pas le modifier. Le seul accès réel au système électrique consiste à fournir ou à évacuer artificiellement de l’électricité à l’aide d’une interface d’énergie électrique (ci-après appelée IEE), mais cela ne change pas comment l’électricité est distribuée. Une autre possibilité est de retirer manuellement les câbles en cuivre des poteaux électriques pour gérer manuellement le flux d’électricité, mais cela supprimera toujours aussi la visualisation de la connexion des câbles, ce qui est gênant. Cela vous obligera également à calculer vous-même le transfert d’énergie dans le code du mod et à gérer artificiellement le réseau électrique, tout comme le jeu le ferait normalement en coulisse. Le problème est que les calculs effectués par un mod seront toujours plusieurs fois plus lents que si c’était le moteur du jeu qui les faisait. C’est pourquoi l’un des développeurs de Factorio Rseding91 a déclaré ce qui suit il y a quelques années, après que quelqu’un ait demandé un mod pour implémenter une chute de tension. [La tension] n’est pas la seule chose que vous allez vous inquiéter de voir chuter. Si vous utilisez un tel mod, vos UPS vont s’effondrer une fois que vous aurez construit plus d’un exemplaire de n’importe quoi :P [Voltage is] not the only thing you’re going to be worrying about dropping. Your UPS will TANK once you build more than a few of anything if you used such a mod :P — Rseding91, Développeur de Factorio Bien entendu, cela ne signifie pas que c’est impossible, même si ce n’est pas aussi performant que le Factorio standard. Les mods ont trouvé de magnifiques moyens de contourner toutes sortes d’obstacles, y compris ces limitations, et ont créé toutes sortes de mécanismes de jeu formidables, autrefois considérés comme irréalistes. Une brève histoire des refontes de l’électricité L’un des premiers mods de refonte de l’énergie a probablement été Flow Network, créé à l’époque de la version 0.13 de Factorio. En gros, un accumulateur invisible est placé sous chaque poteau électrique, créant ainsi une entité composite, une astuce très couramment utilisée dans les mods. Le câble en cuivre est ensuite retiré et remplacé par un câble logique rouge pour supprimer le transfert classique d’électricité, tout en conservant la possibilité de visualiser la connexion. L’énergie est ensuite distribuée manuellement entre ces accumulateurs cachés à l’aide d’un script personnalisé. Malheureusement, comme mentionné précédemment, cette méthode est très lente, car tous les calculs d’électricité sont effectués dans le mod et non gérés par Factorio lui-même. Ce système a cependant l’avantage d’être très personnalisable. Exemple de distribution électrique avec FlowNetwork, montrant la tension à un poteau électrique, le courant traversant le poteau et la chute de tension à ce poteau. Une autre tentative a vu le jour avec Factorio 0.15, appelée High Voltage. Il s’agit d’un mod assez intéressant avec beaucoup de parties mobiles. L’électricité est distribuée soit à haute tension, soit à tension normale, et les transformateurs et autres équipements sont soit des accumulateurs, soit des IEE. La distribution de l’électricité à haute tension est ensuite calculée manuellement avec des formules spécifiques, très similaire à ce que Flow Network avait fait. Cela a permis à l’auteur d’introduire des mécanismes intéressants comme les transformateurs qui ont besoin de temps pour “tourner”. La tension normale, quant à elle, alimente simplement vos machines et est distribuée à l’aide de câbles en cuivre, comme dans le jeu original, ce qui signifie qu’aucun calcul de modélisation n’est nécessaire. Par ailleurs, l’auteur a introduit un type de chute de tension sur la distance qui ne nécessite un calcul que lorsqu’un poteau électrique est placé. Si le poteau électrique placé est trop éloigné du transformateur, il ne pourra alimenter aucune machine. Ce qui se passe, c’est que le poteau électrique est silencieusement remplacé par un poteau avec une distance d’alimentation de zéro, ce qui signifie que le poteau sera toujours connecté au courant, mais qu’il ne pourra pas transmettre ce courant aux machines. Une solution plutôt brillante. Distribution d’énergie à haute tension montrant que les poteaux électriques se désactivent lorsqu’ils sont trop éloignés du transformateur. Il affiche également une superposition (lignes bleues et rouges) lors de la sélection d’un poteau électrique qui est très similaire à Fluidic Power Ces deux mods étaient très gourmands en performances et n’auraient probablement pas été adaptés aux grandes usines. Et ils n’ont jamais été mis à jour pour les nouvelles versions de Factorio. À mon avis, la meilleure solution moderne est probablement Power Overload de Xorimuth. Ici, le but est de diviser le réseau électrique en sous-réseaux distincts à l’aide de transformateurs. Il n’y a pas de changement réel de la puissance passant par un transformateur, et le transfert de puissance à travers celui-ci est calculé par le mod lui-même. Si un sous-réseau donné a un poteau électrique qui tire plus de puissance qu’il ne peut en supporter, il a une chance d’exploser ! Ce qui rend ce mod étonnant, c’est la propreté de son aspect et de sa convivialité, avec toutes les connexions en cuivre encore visibles. C’est parce que la plupart des composants nécessaires, comme les IEE que l’auteur exige pour la manipulation de la puissance, est déporté sur une surface complètement différente, tous connectés par des câbles en cuivre transdimentionnels ! Distribution de l’électricité de Power Overload, avec un transformateur qui ressemble à un commutateur d’alimentation électrique. Une dernière mention honorable serait Electric Transformators sur lequel je suis tombé par hasard un mois ou deux après la sortie de Fluidic Power. Il a une approche similaire à celle de Power Overload, mais sans les poteaux électriques qui explosent, ce qui signifie qu’il ne punit pas le fait de ne pas utiliser les transformateurs. Il a cependant trouvé une façon intéressante de construire des transformateurs qui ne nécessitent aucun calcul de puissance de la part du mod. Chaque transformateur est une entité composite avec une chaudière qui crée un fluide à partir de l’électricité, puis un générateur qui le retransforme en électricité. Cela signifie que les réseaux électriques sont déconnectés, mais que les calculs entre les réseaux sont toujours effectués par le moteur de jeu (beaucoup plus performant). Electric Transformators distribue l’électricité par le biais d’un transformateur au look plutôt sympa. Ces mods sont tous géniaux à leur manière et peuvent créer un style de jeu étonnant. Cependant, je me demandais si l’électricité pouvait être encore plus réaliste ? Pourrait-elle imiter encore plus fidèlement les fluides ? Et surtout, pouvons-nous créer un mécanisme qui pénaliserait de manière naturelle certains réseaux électriques en limitant le débit, ce qui encouragerait l’utilisation de transformateurs ? En quoi ai-je été différent ? Heureusement, Factorio dispose d’une simulation intégrée des fluides, qui est très bien optimisée et fonctionne avec le moteur du jeu. Cette simulation gère le pétrole dans vos réservoirs de stockage et la vapeur dans vos centrales nucléaires. Elle n’est pas parfaite et peut causer quelques maux de tête, mais elle fonctionne suffisamment bien. Cette simulation de fluide est exactement ce qu’il me faut pour imiter l’électricité qui circule comme un fluide. J’ai donc entrepris de la mettre en œuvre. Après de nombreuses heures à me démener avec la phase de données de Factorio, et à me battre avec des boîtes de fluides et des entités composites pendant bien trop longtemps, je suis finalement tombé sur une solution qui fonctionne. J’ai réussi à convertir l’électricité en un fluide (que j’appelle le fluide d’énergie) et à transformer tous les poteaux en tuyaux. Vous trouverez ci-dessous un exemple de machine à vapeur alimentant un four électrique à l’aide de Fluidic Power, montrant à la fois ce que vous verrez en utilisant le mod (à gauche) et ce qui se passe en coulisses (à droite). JuxtaposeJS De gauche à droite, on peut voir la production d’énergie, l’élévation de la tension, l’abaissement de la tension et la consommation d’énergie. Le fluide d’énergie s’écoulera vers les autres poteaux comme un fluide, tout comme l’eau ou tout autre fluide, et de là, il alimentera vos entités. L’unité de ce fluide d’énergie est le Joule (par exemple 10kJ), ce qui signifie que c’est de l’énergie qui est distribuée à travers les poteaux. L’unité aurait probablement pu être le Volt ou même le Coulomb (comme pour la charge électrique), mais l’utilisation de l’énergie s’intègre facilement aux mécanismes existants de Factorio. Cette mise en œuvre nécessite toutefois deux types de poteaux, à savoir les poteaux normaux et les poteaux sources. Les poteaux sources sont placés à côté de vos générateurs d’énergie, et ils créent le fluide d’énergie. Pour ce faire, on place sous le poteau une mini machine d’assemblage qui crée le fluide au bon débit en fonction d’une consommation d’énergie donnée. Pour alimenter vos machines, vous avez besoin de poteaux électriques normaux, sous lesquels se trouvent de mini générateurs (comme la machine à vapeur) qui retransforment le fluide en électricité. Cela permet également au fluide d’énergie de circuler à travers plusieurs poteaux jusqu’à l’endroit où il est nécessaire, tout comme vous pouvez enchaîner les machines à vapeur. Cela signifie également que je peux limiter la puissance que chaque poteau peut fournir aux machines qui l’entourent ! Voici le pseudo-code permettant de s’assurer que les poteaux électriques ont les bonnes caractéristiques. // La production d’énergie est déterminée par la consommation d’énergie de la machine d’assemblage du poteau source. power_production = (fluid_fuel_value * units_per_craft) / crafting_time // La consommation d’énergie est déterminée par le taux d’utilisation du fluide du générateur du poteau normal. power_consumption = fluid_fuel_value * fluid_usage_per_tick * 60 Viennent ensuite les transformateurs, qui ont un rôle vital à jouer dans un mod comme celui-ci, car comme nous le savons tous, les fluides ne se propagent pas très loin à haut débit. Dans le monde réel, un transformateur augmente la tension pour une distribution d’énergie plus efficace (pour faire simple). Fluidic Power n’a pas de tension à augmenter, mais le débit requis peut être simplifié en convertissant simplement l’énergie du fluide en une unité plus grande. Par exemple, la “haute tension” peut être obtenue en convertissant l’unité d’énergie du fluide à 1MJ au lieu de 1kJ. Cela signifie que pour la même quantité de flux de fluide, plus d’énergie circulera. Ce que j’apprécie vraiment dans cette implémentation, c’est la simplicité extrême de ces transformateurs. Tous les mods que j’ai mentionnés devaient calculer manuellement le transfert de puissance dans un transformateur ou créer des entités composites complexes, alors que j’ai simplement dû créer une machine d’assemblage avec une recette spécifique. Cette recette ne change pas la quantité totale d’énergie, mais la convertit en une forme plus ou moins dense. Le temps de fabrication de cette recette, ou la quantité d’unités de fluide qu’elle peut transformer, peut alors dicter la puissance d’entrée/sortie du transformateur ! // Exemple de recette de transformateur élévateur 1000 units of 1kJ fluid --&gt; 1 unit of 1MJ fluid // Débit de puissance du transformateur power_rating = fluid_output_amount * fluid_output_unit / time_per_craft Avec un minimum de bricolage, cela a permis d’obtenir un mécanisme de jeu intuitif et amusant. Le système est conçu de manière à ce que seule la tension la plus basse puisse alimenter vos machines ou accepter l’énergie générée. Ensuite, une fois que la tension est augmentée pour faciliter la distribution, le fluide haute tension ne peut circuler que via les grands poteaux électriques. Ces grands poteaux électriques sont également limités et ne peuvent alimenter aucune machine ni accepter aucune énergie générée. C’est probablement la partie de cette implémentation que je préfère. Cela signifie qu’il y a une incitation directe à créer un réseau de haute tension à travers votre base, et partout où vous voulez utiliser de l’énergie, vous devez utiliser des transformateurs. Exemple de ligne principale à haute tension (ligne pleine dans le jeu) avec des transformateurs abaissant la tension vers les machines (ligne pointillée dans le jeu). Cela permet une distribution simplifiée du courant. Enfin, le fait que l’énergie soit simulée comme un fluide modifie la conception des accumulateurs. Il ne s’agit plus d’une entité intelligente qui n’accepte que les surplus d’énergie et qui ne libère toute son énergie que lorsqu’elle est demandée. Au lieu de cela, c’est un simple réservoir de stockage qui agit comme un gros condensateur aveugle. Il n’accepte que le courant basse tension, ce qui signifie que vos parcs d’accumulateurs auront besoin de beaucoup de transformateurs. Il est possible de créer le même comportement que les accumulateurs classiques avec des circuits logiques amusants, mais sans cela, ils fonctionnent quand même assez bien, bien que moins efficacement. En conclusion Dans l’ensemble, j’ai été surpris et excité de trouver une implémentation qui remplissait la plupart de mes objectifs et créait naturellement les défis et les obstacles que j’avais imaginés. Et je n’ai pas eu à créer beaucoup de limitations artificielles pour le joueur, ce qui est un grand bonus. Je n’ai créé que le système fondamental et il se régule tout seul ! J’abuse de certains mécanismes, ce qui introduit quelques bizarreries comme le mélange accidentel de différents voltages ou le fait de ne pas montrer les connexions physiques en cuivre, mais c’est en fait très amusant à jouer. Cependant, une question reste : dans quelle mesure les performances de ce mod le rend-il encore jouable ? Ce mod nécessite beaucoup plus de calculs de fluide qu’un jeu traditionnel, et abuse de certains autres mécanismes. Le moteur hautement optimisé de Factorio peut-il tenir le coup, alors qu’il a été prédit qu’un tel mod ferait exploser vos UPS ? Je reviendrai plus en détail sur ce sujet la semaine prochaine. Pour finir sur un cliffhanger, ce que j’ai découvert pourrait vous surprendre. En tout cas, moi, ça m’a surpris. Lien vers la deuxième partie Contribuer Comme toujours, nous attendons vos contributions pour les Alt-F4, que cela soit par la soumission d’un article ou en aidant pour les traductions. Si vous avez quelque chose d’intéressant en tête que vous souhaitez partager avec la communauté, vous êtes au bon endroit. Si vous n’êtes pas sûr, nous serons heureux de vous aider en discutant structure, contenu et idées. Donc si vous voulez vous impliquer dans les Alt-F4, rejoignez-le Discord pour ne rien rater !","url":"https://alt-f4.blog/ALTF4-51/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://alt-f4.blog/ALTF4-51/"},"headline":"Alt-F4 n°51 - L’expérience Fluidic Power","dateModified":"2021-11-05T00:00:00+00:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
	

	
	  <meta property="og:image" content="https://alt-f4.blog/assets/ALTF4/51/thumbnail.jpg">
	  <meta name="twitter:image" content="https://alt-f4.blog/assets/ALTF4/51/thumbnail.jpg">
	

	<!-- CSS & fonts -->
	<link href="/fr/assets/GLOBAL/css/titillium-web.css" rel="stylesheet">
	<link rel="stylesheet" href="/fr/assets/GLOBAL/css/style.css">
	<link rel="stylesheet" href="/fr/assets/GLOBAL/css/spidertron.css">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.css" rel="stylesheet" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,900,400italic%7CSignika:700,300,400,600" rel="stylesheet" type="text/css">

	<link href="/fr/assets/GLOBAL/img/favicon.ico" rel="icon" type="image/x-icon">
	<link href="/fr/assets/GLOBAL/img/favicon.ico" rel="shortcut icon" type="image/x-icon">

	<!-- RSS -->
	<link href="/fr/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed">

	<script src="/assets/GLOBAL/js/spidertron.js"></script>
	<script src="/assets/GLOBAL/js/localization.js"></script>
	<!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
</head>


  <body>
    <!-- Navigation Bar -->
    <nav id="top" class="top-bar">
	<div class="top-bar-inner flex flex-space-between">
		<div class="sites links flex">
			<a href="/fr/" class="sites-current">
				<div id="navbar-logo" role="img" aria-label="Alt-F4 Logo"></div>
			</a>
			<a href="https://alt-f4.blog/fr/discord" class="">Discord</a>
			<span class="separator">|</span>
			<a href="https://factorio.com/blog" class="">FFF</a>
		</div>
		<div class="sites links flex hide-tag-line">
			<em>La suite communautaire aux tant appréciés Faits du vendredi sur Factorio</em>
		</div>
		<div class="dropdown flex-end">
			<a class="button flex flex-space-between" href="#">
				<i class="fas fa-language"></i>
			</a>
			<div class="submenu">
				
				<a class="button lang-button" href="/../ALTF4-51/" onclick="setLanguage('en')">English</a>
				
				<a class="button lang-button" href="/cs/ALTF4-51/" onclick="setLanguage('cs')">Čeština</a>
				
				<a class="button lang-button" href="/de/ALTF4-51/" onclick="setLanguage('de')">Deutsch</a>
				
				<a class="button lang-button" href="/es/ALTF4-51/" onclick="setLanguage('es')">Español</a>
				
				<a class="button button-green lang-button" href="/fr/ALTF4-51/" onclick="setLanguage('fr')">Français</a>
				
				<a class="button lang-button" href="/it/ALTF4-51/" onclick="setLanguage('it')">Italiano</a>
				
				<a class="button lang-button" href="/nl/ALTF4-51/" onclick="setLanguage('nl')">Nederlands</a>
				
				<a class="button lang-button" href="/pt-br/ALTF4-51/" onclick="setLanguage('pt-br')">Português Brasileiro</a>
				
				<a class="button lang-button" href="/ru/ALTF4-51/" onclick="setLanguage('ru')">Русский</a>
				
				<a class="button lang-button" href="/zh/ALTF4-51/" onclick="setLanguage('zh')">中文</a>
				
			</div>
		</div>
	</div>
</nav>


    <!-- Main content -->
    <div class="container">
      <div class="container-inner">
        <div class="small-center"></div>
        <!-- Posts -->
        <article class="panel blog-post">
	
	<h1 class="page-title-headder">Alt-F4 n°51 - L'expérience Fluidic Power  <author>05-11-2021</author>
</h1>
	
	
	<div class="panel-inset mb0">
		
Écrit par <em>stringweasel</em>,



édité par <em>Nanogamer7, Conor_, Therenas, Firerazer</em>,



<br>traduit par <em>bev, Firerazer</em>






	</div>
	
	<div class="panel-inset-lighter mt0">
		<div class="post-header">
  <div class="panel">
    <div class="outer">
      <img class="inner" src="/assets/ALTF4/51/thumbnail.jpg" alt="" style="margin: 1px;">
    </div>
  </div>
  <details class="panel toc">
    <summary>
      <h2>Sommaire</h2>
    </summary>
    <div class="panel-inset mb0">
      <ul>
  <li>
<a href="#le-projet-fluidic-power-stringweasel">Le projet Fluidic Power <author>stringweasel</author></a>
    <ul>
      <li><a href="#pourquoi-est-ce-si-difficile-">Pourquoi est-ce si difficile ?</a></li>
      <li><a href="#une-br%C3%A8ve-histoire-des-refontes-de-l%C3%A9lectricit%C3%A9">Une brève histoire des refontes de l’électricité</a></li>
      <li><a href="#en-quoi-ai-je-%C3%A9t%C3%A9-diff%C3%A9rent-">En quoi ai-je été différent ?</a></li>
      <li><a href="#en-conclusion">En conclusion</a></li>
    </ul>
  </li>
  <li><a href="#contribuer">Contribuer</a></li>
</ul>

    </div>
  </details>
</div>




<p>Pour la parution n°51 de Alt-F4, notre ancien contributeur et éditeur extraordinaire <em>stringweasel</em> nous régale avec la plongée dans l’histoire des mods qui tentent de rendre le réseau électrique de Factorio plus réaliste. Chacun d’entre eux a des avantages et des inconvénients, et c’est pourquoi il nous présente sa propre solution à ce vieux problème, avec de bons résultats !</p>
      <h2 id="le-projet-fluidic-power-stringweasel">
        
        
            <a href="#le-projet-fluidic-power-stringweasel" class="anchor" style="text-decoration: none;">Le projet </a><a href="https://mods.factorio.com/mod/FluidicPower">Fluidic Power</a> <author>stringweasel</author>
          
        
      </h2>
    

<p>Depuis ma formation en ingénierie électronique, je vois le flux d’électricité partout où je regarde. La vague de voitures qui progresse en sens inverse dans les embouteillages est, à mes yeux, le mouvement des électrons. Ce qui est encore plus intéressant, c’est la similitude entre le flux d’électricité et le mouvement des fluides. Lorsque je tire la chasse d’eau et que cela crée un tourbillon, je vois une inductance qui est chargée par un condensateur. Lorsque je ferme soudainement le robinet et que j’entends le martèlement de l’eau dans les tuyaux, je vois la pointe de tension d’une inductance qui est utilisée pour les <a href="https://fr.wikipedia.org/wiki/Convertisseur_Boost">convertisseurs Boost</a>. Ne serait-ce pas génial d’avoir ce comportement réaliste de l’électricité dans Factorio ?</p>
      <h3 id="pourquoi-est-ce-si-difficile-">
        
        
            <a href="#pourquoi-est-ce-si-difficile-" class="anchor" style="text-decoration: none;">Pourquoi est-ce si difficile ?</a>
          
        
      </h3>
    

<p>Tout d’abord, dans le jeu Factorio standard, l’électricité se comporte de manière idéale, ce qui signifie qu’il n’y a pas de résistance dans les câbles. Votre réseau électrique peut transmettre une puissance infinie sur des distances infinies, indéfiniment. C’est presque comme s’ils avaient attaché des <a href="https://fr.wikipedia.org/wiki/Supraconductivit%C3%A9">supraconducteurs</a> refroidis par cryogénie à des poteaux en bois bon marché. Cela fonctionne très bien pour les objectifs et les contraintes de ce jeu et convient parfaitement à la plupart des styles de jeu. Cependant, il y a toujours eu quelques joueurs à la recherche d’un peu plus de défi, se demandant si l’électricité ne pourrait pas être rendue <a href="https://forums.factorio.com/viewtopic.php?t=68761">plus réaliste</a>, ou des joueurs qui ont envie de faire appel à des transformateurs pour éviter les chutes de tension sur de longues distances.</p>

<p>Cependant, recréer des comportements électriques plus réalistes est (sans doute) hors de portée du Factorio standard et <a href="https://forums.factorio.com/viewtopic.php?p=301132#p301132">n’arrivera probablement jamais</a>. C’est donc aux mods de remplir cette niche un peu sadique. Dans Factorio, les mods ne peuvent modifier que des <a href="https://lua-api.factorio.com/next/">caractéristiques prédéterminées</a> du jeu, et les options disponibles pour l’électricité sont très limitées. C’est pourquoi les moddeurs ont souvent dû trouver des solutions de substitution intéressantes. L’un des principaux problèmes est qu’une fois que les poteaux électriques sont reliés par un câble en cuivre, le jeu transfère automatiquement l’électricité de manière interne. Et ça, des mods ne peuvent pas le modifier. Le seul accès réel au système électrique consiste à fournir ou à évacuer artificiellement de l’électricité à l’aide d’une <a href="https://wiki.factorio.com/Prototype/ElectricEnergyInterface">interface d’énergie électrique</a> (ci-après appelée <em>IEE</em>), mais cela ne change pas <em>comment</em> l’électricité est distribuée.</p>

<p>Une autre possibilité est de retirer manuellement les câbles en cuivre des poteaux électriques pour gérer manuellement le flux d’électricité, mais cela supprimera toujours aussi la visualisation de la connexion des câbles, ce qui est gênant. Cela vous obligera également à calculer vous-même le transfert d’énergie dans le code du mod et à gérer artificiellement le réseau électrique, tout comme le jeu le ferait normalement en coulisse. Le problème est que les calculs effectués par un mod seront toujours plusieurs fois plus lents que si c’était le moteur du jeu qui les faisait. C’est pourquoi l’un des développeurs de Factorio <em>Rseding91</em> a déclaré ce qui suit il y a quelques années, après que quelqu’un ait demandé un mod pour implémenter une <a href="https://fr.wikipedia.org/wiki/Tension_%C3%A9lectrique">chute de tension</a>.</p>

<div class="m0 h100 quote">
  <blockquote cite="">
    <div class="panel-inset-lighter ">
    
      <div class="translation">
        <p>[La tension] n’est pas la seule chose que vous allez vous inquiéter de voir chuter. Si vous utilisez un tel mod, vos UPS vont s’effondrer une fois que vous aurez construit plus d’un exemplaire de n’importe quoi :P</p>

      </div>
      <span></span>
    
      <div class="original">
        <p>[Voltage is] not the only thing you’re going to be worrying about dropping. Your UPS will TANK once you build more than a few of anything if you used such a mod :P</p>

      </div>
    </div>
    <author>
    — <a href="https://www.reddit.com/r/factorio/comments/6wwkhx/comment/dmcea1c/">Rseding91, Développeur de Factorio </a>
    </author>
  </blockquote>
</div>

<p>Bien entendu, cela ne signifie pas que c’est impossible, même si ce n’est pas aussi performant que le Factorio standard. Les mods ont trouvé de magnifiques moyens de contourner toutes sortes d’obstacles, y compris ces limitations, et ont créé toutes sortes de mécanismes de jeu formidables, autrefois considérés comme irréalistes.</p>
      <h3 id="une-brève-histoire-des-refontes-de-lélectricité">
        
        
            <a href="#une-br%C3%A8ve-histoire-des-refontes-de-l%C3%A9lectricit%C3%A9" class="anchor" style="text-decoration: none;">Une brève histoire des refontes de l’électricité</a>
          
        
      </h3>
    

<p>L’un des premiers mods de refonte de l’énergie a probablement été <a href="https://mods.factorio.com/mods/Simdezimon/flownetwork">Flow Network</a>, créé à l’époque de la version 0.13 de Factorio. En gros, un accumulateur invisible est placé sous chaque poteau électrique, créant ainsi une entité composite, une astuce très couramment utilisée dans les mods. Le câble en cuivre est ensuite retiré et remplacé par un câble logique rouge pour supprimer le transfert classique d’électricité, tout en conservant la possibilité de visualiser la connexion. L’énergie est ensuite distribuée manuellement entre ces accumulateurs cachés à l’aide d’un script personnalisé.  Malheureusement, comme mentionné précédemment, cette méthode est très lente, car <em>tous</em> les calculs d’électricité sont effectués dans le mod et non gérés par Factorio lui-même. Ce système a cependant l’avantage d’être très personnalisable.</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      <figure>
        <img src="https://media.alt-f4.blog/ALTF4/51/flow-network.jpg" alt="Exemple de distribution électrique avec FlowNetwork, montrant la tension à un poteau électrique, le courant traversant le poteau et la chute de tension à ce poteau." style="max-width: ; max-height:  ">
        
        <figcaption>Exemple de distribution électrique avec FlowNetwork, montrant la tension à un poteau électrique, le courant traversant le poteau et la chute de tension à ce poteau.</figcaption>
      </figure>
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>Une autre tentative a vu le jour avec Factorio 0.15, appelée <a href="https://mods.factorio.com/mod/highvoltage">High Voltage</a>. Il s’agit d’un mod assez intéressant avec beaucoup de parties mobiles. L’électricité est distribuée soit à haute tension, soit à tension normale, et les transformateurs et autres équipements sont soit des accumulateurs, soit des IEE. La distribution de l’électricité à haute tension est ensuite calculée manuellement avec des formules spécifiques, très similaire à ce que Flow Network avait fait. Cela a permis à l’auteur d’introduire des mécanismes intéressants comme les transformateurs qui ont besoin de temps pour “tourner”. La tension normale, quant à elle, alimente simplement vos machines et est distribuée à l’aide de câbles en cuivre, comme dans le jeu original, ce qui signifie qu’aucun calcul de modélisation n’est nécessaire. Par ailleurs, l’auteur a introduit un type de chute de tension sur la distance qui ne nécessite un calcul que lorsqu’un poteau électrique est placé. Si le poteau électrique placé est trop éloigné du transformateur, il ne pourra alimenter aucune machine. Ce qui se passe, c’est que le poteau électrique est silencieusement remplacé par un poteau avec une <a href="https://wiki.factorio.com/Prototype/ElectricPole#supply_area_distance">distance d’alimentation</a> de zéro, ce qui signifie que le poteau sera toujours connecté au courant, mais qu’il ne pourra pas transmettre ce courant aux machines. Une solution plutôt brillante.</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      <figure>
        <img src="https://media.alt-f4.blog/ALTF4/51/high-voltage.jpg" alt="Distribution d’énergie à haute tension montrant que les poteaux électriques se désactivent lorsqu’ils sont trop éloignés du transformateur. Il affiche également une superposition (lignes bleues et rouges) lors de la sélection d’un poteau électrique qui est très similaire à Fluidic Power" style="max-width: ; max-height:  ">
        
        <figcaption>Distribution d’énergie à haute tension montrant que les poteaux électriques se désactivent lorsqu’ils sont trop éloignés du transformateur. Il affiche également une superposition (lignes bleues et rouges) lors de la sélection d’un poteau électrique qui est très similaire à Fluidic Power</figcaption>
      </figure>
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>Ces deux mods étaient très gourmands en performances et n’auraient probablement pas été adaptés aux grandes usines. Et ils n’ont jamais été mis à jour pour les nouvelles versions de Factorio. À mon avis, la meilleure solution moderne est probablement <a href="https://mods.factorio.com/mod/PowerOverload">Power Overload</a> de Xorimuth. Ici, le but est de diviser le réseau électrique en sous-réseaux distincts à l’aide de transformateurs. Il n’y a pas de changement réel de la puissance passant par un transformateur, et le transfert de puissance à travers celui-ci est calculé par le mod lui-même. Si un sous-réseau donné a un poteau électrique qui tire plus de puissance qu’il ne peut en supporter, il a une chance d’exploser ! Ce qui rend ce mod étonnant, c’est la propreté de son aspect et de sa convivialité, avec toutes les connexions en cuivre encore visibles. C’est parce que la plupart des composants nécessaires, comme les IEE que l’auteur exige pour la manipulation de la puissance, est déporté sur une surface complètement différente, tous connectés par des câbles en cuivre transdimentionnels !</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      <figure>
        <img src="https://media.alt-f4.blog/ALTF4/51/power-overload.jpg" alt="Distribution de l’électricité de Power Overload, avec un transformateur qui ressemble à un commutateur d’alimentation électrique." style="max-width: ; max-height:  ">
        
        <figcaption>Distribution de l’électricité de Power Overload, avec un transformateur qui ressemble à un commutateur d’alimentation électrique.</figcaption>
      </figure>
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>Une dernière mention honorable serait <a href="https://mods.factorio.com/mod/Electric_Transformators">Electric Transformators</a> sur lequel je suis tombé par hasard un mois ou deux après la sortie de Fluidic Power. Il a une approche similaire à celle de Power Overload, mais sans les poteaux électriques qui explosent, ce qui signifie qu’il ne punit pas le fait de <em>ne pas</em> utiliser les transformateurs. Il a cependant trouvé une façon intéressante de construire des transformateurs qui ne nécessitent aucun calcul de puissance de la part du mod. Chaque transformateur est une entité composite avec une chaudière qui crée un fluide à partir de l’électricité, puis un générateur qui le retransforme en électricité. Cela signifie que les réseaux électriques sont déconnectés, mais que les calculs entre les réseaux sont toujours effectués par le moteur de jeu (beaucoup plus performant).</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      <figure>
        <img src="https://media.alt-f4.blog/ALTF4/51/electric-transformators.jpg" alt="Electric Transformators distribue l’électricité par le biais d’un transformateur au look plutôt sympa." style="max-width: ; max-height:  ">
        
        <figcaption>Electric Transformators distribue l’électricité par le biais d’un transformateur au look plutôt sympa.</figcaption>
      </figure>
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>Ces mods sont tous géniaux à leur manière et peuvent créer un style de jeu étonnant. Cependant, je me demandais si l’électricité pouvait être encore plus réaliste ? Pourrait-elle imiter encore plus fidèlement les fluides ? Et surtout, pouvons-nous créer un mécanisme qui pénaliserait de manière naturelle certains réseaux électriques en limitant le débit, ce qui encouragerait l’utilisation de transformateurs ?</p>
      <h3 id="en-quoi-ai-je-été-différent-">
        
        
            <a href="#en-quoi-ai-je-%C3%A9t%C3%A9-diff%C3%A9rent-" class="anchor" style="text-decoration: none;">En quoi ai-je été différent ?</a>
          
        
      </h3>
    

<p>Heureusement, Factorio dispose d’une simulation intégrée des fluides, qui est très bien optimisée et fonctionne avec le moteur du jeu. Cette simulation gère le pétrole dans vos réservoirs de stockage et la vapeur dans vos centrales nucléaires. Elle <a href="https://factorio.com/blog/post/fff-260">n’est pas parfaite</a> et peut causer quelques maux de tête, mais elle fonctionne suffisamment bien. Cette simulation de fluide est exactement ce qu’il me faut pour imiter l’électricité qui circule comme un fluide. J’ai donc entrepris de la mettre en œuvre.</p>

<p>Après de nombreuses heures à me démener avec la <a href="https://lua-api.factorio.com/latest/Data-Lifecycle.html">phase de données</a> de Factorio, et à me battre avec des boîtes de fluides et des entités composites pendant bien trop longtemps, je suis finalement tombé sur une solution qui fonctionne. J’ai réussi à convertir l’électricité en un fluide (que j’appelle le fluide d’énergie) et à transformer tous les poteaux en tuyaux. Vous trouverez ci-dessous un exemple de machine à vapeur alimentant un four électrique à l’aide de Fluidic Power, montrant à la fois ce que vous verrez en utilisant le mod (à gauche) et ce qui se passe en coulisses (à droite).</p>

<p>
  <figure>
    <div class="juxtapose juxtapose-" style="max-width: ; max-height: ; margin: 20px auto auto; height: 100%; width: 100%;">
      <div class="jx-slider">
        <div class="jx-handle" style="left: 50%;">
          <div class="jx-arrow jx-left"></div>
          <div class="jx-control">
            <div class="jx-controller" tabindex="0" role="slider" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">
            </div>
          </div>
          <div class="jx-arrow jx-right"></div>
        </div>
        <div class="jx-image jx-left" style="width: 50%;">
          <img src="https://media.alt-f4.blog/ALTF4/51/fluidic-example.jpg" alt="Old Image">
        </div>
        <div class="jx-image jx-right" style="width: 50%;">
          <img src="https://media.alt-f4.blog/ALTF4/51/fluidic-example-decom.jpg" alt="New Image">
        </div>
        <a href="https://juxtapose.knightlab.com" target="_blank" rel="noopener" class="jx-knightlab">
          <div class="knightlab-logo">
          </div>
          <span class="juxtapose-name">JuxtaposeJS</span>
        </a>
      </div>
    </div>
    <figcaption>De gauche à droite, on peut voir la production d’énergie, l’élévation de la tension, l’abaissement de la tension et la consommation d’énergie.</figcaption>
  </figure>
</p>

<p>Le fluide d’énergie s’écoulera vers les autres poteaux comme un fluide, tout comme l’eau ou tout autre fluide, et de là, il alimentera vos entités. L’unité de ce fluide d’énergie est le Joule (par exemple <code class="language-plaintext highlighter-rouge">10kJ</code>), ce qui signifie que c’est de l’<em>énergie</em> qui est distribuée à travers les poteaux. L’unité aurait probablement pu être le Volt ou même le Coulomb (comme pour la <a href="https://fr.wikipedia.org/wiki/Charge_%C3%A9lectrique">charge électrique</a>), mais l’utilisation de l’énergie s’intègre facilement aux mécanismes existants de Factorio.</p>

<p>Cette mise en œuvre nécessite toutefois deux types de poteaux, à savoir les poteaux normaux et les poteaux sources. Les poteaux sources sont placés à côté de vos générateurs d’énergie, et ils créent le fluide d’énergie. Pour ce faire, on place sous le poteau une mini machine d’assemblage qui crée le fluide au bon débit en fonction d’une consommation d’énergie donnée. Pour alimenter vos machines, vous avez besoin de poteaux électriques normaux, sous lesquels se trouvent de mini générateurs (comme la <a href="https://wiki.factorio.com/Steam_engine/fr">machine à vapeur</a>) qui retransforment le fluide en électricité. Cela permet également au fluide d’énergie de circuler à travers plusieurs poteaux jusqu’à l’endroit où il est nécessaire, tout comme vous pouvez enchaîner les machines à vapeur. Cela signifie également que je peux <a href="https://wiki.factorio.com/Prototype/Generator#fluid_usage_per_tick">limiter</a> la puissance que chaque poteau peut fournir aux machines qui l’entourent !</p>

<p>Voici le pseudo-code permettant de s’assurer que les poteaux électriques ont les bonnes caractéristiques.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// La production d’énergie est déterminée par la consommation d’énergie de la machine d’assemblage du poteau source.</span>
<span class="n">power_production</span> <span class="o">=</span> <span class="o">(</span><span class="n">fluid_fuel_value</span> <span class="o">*</span> <span class="n">units_per_craft</span><span class="o">)</span> <span class="o">/</span> <span class="n">crafting_time</span>

<span class="c1">// La consommation d’énergie est déterminée par le taux d’utilisation du fluide du générateur du poteau normal.</span>
<span class="n">power_consumption</span> <span class="o">=</span> <span class="n">fluid_fuel_value</span> <span class="o">*</span> <span class="n">fluid_usage_per_tick</span> <span class="o">*</span> <span class="mi">60</span>
</code></pre></div></div>

<p>Viennent ensuite les transformateurs, qui ont un rôle vital à jouer dans un mod comme celui-ci, car comme nous le savons tous, les fluides <a href="https://wiki.factorio.com/Fluid_system#Pipelines">ne se propagent pas très loin</a> à haut débit. Dans le monde réel, un transformateur augmente la tension pour une distribution d’énergie plus efficace (pour faire <em>simple</em>). Fluidic Power n’a pas de tension à augmenter, mais le débit requis peut être simplifié en convertissant simplement l’énergie du fluide en une unité plus grande. Par exemple, la “haute tension” peut être obtenue en convertissant l’unité d’énergie du fluide à <code class="language-plaintext highlighter-rouge">1MJ</code> au lieu de <code class="language-plaintext highlighter-rouge">1kJ</code>. Cela signifie que pour la même quantité de flux de fluide, plus d’<em>énergie</em> circulera. Ce que j’apprécie vraiment dans cette implémentation, c’est la simplicité extrême de ces transformateurs. Tous les mods que j’ai mentionnés devaient calculer manuellement le transfert de puissance dans un transformateur ou créer des entités composites complexes, alors que j’ai simplement dû créer une machine d’assemblage avec une recette spécifique. Cette recette ne change pas la quantité totale d’énergie, mais la convertit en une forme plus ou moins dense. Le temps de fabrication de cette recette, ou la quantité d’unités de fluide qu’elle peut transformer, peut alors dicter la puissance d’entrée/sortie du transformateur !</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Exemple de recette de transformateur élévateur</span>
<span class="mi">1000</span> <span class="n">units</span> <span class="n">of</span> <span class="mi">1</span><span class="n">kJ</span> <span class="n">fluid</span> <span class="o">--&gt;</span> <span class="mi">1</span> <span class="n">unit</span> <span class="n">of</span> <span class="mi">1</span><span class="no">MJ</span> <span class="n">fluid</span>

<span class="c1">// Débit de puissance du transformateur</span>
<span class="n">power_rating</span> <span class="o">=</span> <span class="n">fluid_output_amount</span> <span class="o">*</span> <span class="n">fluid_output_unit</span> <span class="o">/</span> <span class="n">time_per_craft</span>
</code></pre></div></div>

<p>Avec un minimum de bricolage, cela a permis d’obtenir un mécanisme de jeu intuitif et amusant. Le système est conçu de manière à ce que seule la tension la plus basse puisse alimenter vos machines ou accepter l’énergie générée. Ensuite, une fois que la tension est augmentée pour faciliter la distribution, le fluide haute tension ne peut circuler <em>que</em> via les grands poteaux électriques. Ces grands poteaux électriques sont également limités et ne peuvent alimenter aucune machine ni accepter aucune énergie générée. C’est probablement la partie de cette implémentation que je préfère. Cela signifie qu’il y a une incitation directe à créer un réseau de haute tension à travers votre base, et partout où vous voulez utiliser de l’énergie, vous devez utiliser des transformateurs.</p>

<p></p>
<p><!-- Spacing --></p>
<div class="image">
    
      <figure>
        <img src="https://media.alt-f4.blog/ALTF4/51/transformers.jpg" alt="Exemple de ligne principale à haute tension (ligne pleine dans le jeu) avec des transformateurs abaissant la tension vers les machines (ligne pointillée dans le jeu). Cela permet une distribution simplifiée du courant." style="max-width: ; max-height:  ">
        
        <figcaption>Exemple de ligne principale à haute tension (ligne pleine dans le jeu) avec des transformateurs abaissant la tension vers les machines (ligne pointillée dans le jeu). Cela permet une distribution simplifiée du courant.</figcaption>
      </figure>
      
      
</div>
<p></p>
<p><!-- Spacing --></p>

<p>Enfin, le fait que l’énergie soit simulée comme un fluide modifie la conception des accumulateurs. Il ne s’agit plus d’une entité intelligente qui n’accepte que les surplus d’énergie et qui ne libère toute son énergie que lorsqu’elle est demandée. Au lieu de cela, c’est un simple réservoir de stockage qui agit comme un gros condensateur aveugle. Il n’accepte que le courant basse tension, ce qui signifie que vos parcs d’accumulateurs auront besoin de beaucoup de transformateurs. Il est possible de créer le même comportement que les accumulateurs classiques avec des circuits logiques amusants, mais sans cela, ils fonctionnent quand même assez bien, bien que moins efficacement.</p>
      <h3 id="en-conclusion">
        
        
            <a href="#en-conclusion" class="anchor" style="text-decoration: none;">En conclusion</a>
          
        
      </h3>
    

<p>Dans l’ensemble, j’ai été surpris et excité de trouver une implémentation qui remplissait la plupart de mes objectifs et créait naturellement les défis et les obstacles que j’avais imaginés. Et je n’ai pas eu à créer beaucoup de limitations artificielles pour le joueur, ce qui est un grand bonus. Je n’ai créé que le système fondamental et il se régule tout seul ! J’abuse de certains mécanismes, ce qui introduit quelques bizarreries comme le mélange accidentel de différents voltages ou le fait de ne pas montrer les connexions physiques en cuivre, mais c’est en fait très amusant à jouer.</p>

<p>Cependant, une question reste : dans quelle mesure les performances de ce mod le rend-il encore jouable ? Ce mod nécessite beaucoup plus de calculs de fluide qu’un jeu traditionnel, et abuse de certains autres mécanismes. Le moteur hautement optimisé de Factorio peut-il tenir le coup, alors qu’il a été prédit qu’un tel mod ferait exploser vos UPS ? Je reviendrai plus en détail sur ce sujet la semaine prochaine. Pour finir sur un <a href="https://fr.wikipedia.org/wiki/Cliffhanger">cliffhanger</a>, ce que j’ai découvert pourrait vous surprendre. En tout cas, moi, ça m’a surpris.</p>

<p><em>Lien vers la <a href="https://alt-f4.blog/fr/ALTF4-52/">deuxième partie</a></em></p>
      <h2 id="contribuer">
        
        
            <a href="#contribuer" class="anchor" style="text-decoration: none;">Contribuer</a>
          
        
      </h2>
    

<p>Comme toujours, nous attendons vos contributions pour les Alt-F4, que cela soit par la soumission d’un article ou en aidant pour les traductions. Si vous avez quelque chose d’intéressant en tête que vous souhaitez partager avec la communauté, vous êtes au bon endroit. Si vous n’êtes pas sûr, nous serons heureux de vous aider en discutant structure, contenu et idées. Donc si vous voulez vous impliquer dans les Alt-F4, rejoignez-le <a href="https://alt-f4.blog/fr/discord">Discord</a> pour ne rien rater !</p>




<script src="https://cdn.knightlab.com/libs/juxtapose/latest/js/juxtapose.min.js"></script>
<link rel="stylesheet" href="https://cdn.knightlab.com/libs/juxtapose/latest/css/juxtapose.css">


<script>
  (() => {
    if (window.innerWidth >= 720) {
      document.getElementsByClassName('toc')[0].setAttribute('open', '')
    }
  })()
</script>

		
<div class="flex flex-column flex-items-center mt8">
  
  <a class="button-green-right m4" style="width: 16em;" href="https://forums.factorio.com/viewtopic.php?f=5&t=100515">
    Discuter sur le forum de Factorio
  </a>
  
  
  <a class="button-green-right m4" style="width: 16em;" href="https://www.reddit.com/r/factorio/comments/qna0s7/altf4_51_the_fluidic_power_experiment/">
    Discuter sur Reddit
  </a>
  
  
  <a class="button-green-right m4" style="width: 16em;" href="https://alt-f4.blog/fr/discord">
    Discuter sur Discord
  </a>
  
</div>


	</div>
	<div class="panel-inset mb0 p4 flex">
		<div>
		<!-- Previous Button -->
		
		<a href="/fr/ALTF4-50/" class="button square-sm"><i class="fas fa-angle-double-left"></i></a>
		
		<a class="button square-sm" href="/fr/">
			<i class="fas fa-home"></i>
		</a>

		<!-- Next Button -->
		
		<a href="/fr/ALTF4-52/" class="button square-sm">
			<i class="fas fa-angle-double-right"></i>
		</a>
		
		</div>
	</div>
</article>

      </div>
    </div>


    <!-- Footer -->
    <footer class="footer">
  <div class="footer-inner panel">

    <div class="footer-links panel-inset slots p1 mt0 mb0">
      <a href="/fr/about" class="slot" title="About">
        <div class="slot-button">
          <i class="fas fa-info"></i>
        </div>
      </a>
      <a href="https://github.com/AlternativeFFFF/Alt-F4" class="slot" title="Github">
        <div class="slot-button">
          <i class="fab fa-github"></i>
        </div>
      </a>
      <a href="https://alt-f4.blog/fr/discord" class="slot" title="Discord">
        <div class="slot-button">
          <i class="fab fa-discord"></i>
        </div>
      </a>
      <a href="/fr/atom.xml" type="application/atom+xml" rel="alternate" class="slot" title="ATOM Feed">
        <div class="slot-button">
          <i class="fas fa-rss"></i>
        </div>
      </a>
      <a href="https://www.freelists.org/list/alt-f4" class="slot" title="Email Newsletter">
        <div class="slot-button">
          <i class="fas fa-envelope"></i>
        </div>
      </a>

      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
      <div class="slot">
        <div class="slot-empty"></div>
      </div>
    </div>
    <div class="footer-rocket panel-inset m0">
      <div class="spidertron-center">
        <div id="spidertron" class="spidertron-home" data-spidertron-scale="0.6" data-spidertron-speed="400"></div>
      </div>
      <div class="shadow-overlay"></div>
      <div class="shadow-overlay-bottom"></div>
    </div>
    <div class="footer-copyright panel-inset m0">
      Ce site internet est un projet proposé par les fans et n'est pas directement affilié à Wube Software
    </div>
  </div>
</footer>

  </body>

</html>
