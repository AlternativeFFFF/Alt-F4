## Interface Design Considerations <author>Therenas</author>

I've been working on a big redesign of the [Factory Planner](https://mods.factorio.com/mod/factoryplanner) mod over the past few months and I thought it would be interesting to share some of the design considerations that went into that. I'll focus on the most interesting parts of the main interface, as it's the most complex part of the redesign and needed the most thought and planning put into it.

If you're not familiar with the mod, that's no problem. I'll talk about my approach to design in general, which should apply to other situations; The mod will just be my lens through which I focus these thoughts. You also don't need to be a designer to follow this (I'm not), good design should be obvious to anyone when they see it.

### Overview

So let's have a look at it then, shall we? The left side of these comparisons will always be the current version, while the right side is the new and fancy. First, I'll give you a bit of an overview so you can get a feel for the mod.

{% include compare.html id="0" width="2856px" height="1754px" old="https://media.alt-f4.blog/ALTF4/17/old_interface.png" new="https://media.alt-f4.blog/ALTF4/17/new_interface.png"  %}

Now why does the old version look so bland? The main reason for this is that its design stems from the times of Factorio 0.16, which is notably from before the [interface design revolution](https://www.factorio.com/blog/post/fff-243) of 0.17. What this means is that it was designed at a time where Factorio UIs looked [quite different](https://i.imgur.com/o7913EE.jpg), and the toolbox offered to modders was far more limited than it is today. Nevertheless, I made do with what I had, and the interface came out pretty well from a useability perspective in my opinion, even if it wasn't much of a treat visually.

The eagle-eyed among you might have noticed that the first version of the mod that I released on the portal was for Factorio 0.17, not 0.16. What's my excuse then for not just updating to the new visual standard before release? Well, I needed to prioritize what I wanted to spend my time on. Support for modules and beacons was not a thing in the initial beta for example, which was obviously a must-have feature.

This basic logic carried me all the way to a few months ago; There was always something else that needed improving first. Everything is a trade-off (especially in design, as we'll see very soon!), and only now was this redesign worth it to me. A complicating factor is that the task at hand was a ton of work, needing a complete rethinking of the interface and a rewrite of thousands of lines of complicated code. Not something you'd bang out on a Sunday afternoon, that's for sure.

Before we get into the nitty-gritty, I want to bring up some terminology really quickly. The word 'design' has several different meanings depending on context. In this piece, I do not want to go over the design in terms of how it looks 'graphically', as I pretty much ape what Wube uses for its own interfaces, only deviating in some minor ways. This is much more economical as I can reuse a lot of hard work they already did. It also just makes sense to try and make it feel similar to the base game so it fits in properly. The design I do want to get into concerns itself more with the layout and interaction considerations that come up.

### Action Buttons

{% include compare.html id="1" width="2856px" height="1754px" old="https://media.alt-f4.blog/ALTF4/17/old_action_buttons.png" new="https://media.alt-f4.blog/ALTF4/17/new_action_buttons.png"  %}

These buttons allow you to perform various actions on the currently selected subfactory, which is the one whose button is colored in yellow. Changing these from text- to icon-buttons actually has quite a few trade-offs that you might not consider at first. One problem of the old design is that the buttons take up quite a bit of vertical space, and waste the empty space in the middle. Moving them above the (also transformed) list of subfactories frees up a nice amount of space that allows the rest of the elements to move up, making more space for recipe rows.

So far, so good. The icon-based buttons also look prettier in my opinion as they fit into the Factorio aesthetic far better. In addition, having all of them next to each other above the list of subfactories makes it clear what part of the interface they relate to. Nice. There are however some useability problems that come with this change, which is why I kept the old design for so long.

The more obvious one is that icons are almost never as intuitive as just putting what they do onto the button. There's always room for interpretation with icons. Now, users that are new to the mod first have to explore the buttons, hovering and reading the tooltips to make sure they know what the buttons do. You can jump in and get going much quicker with the old design. The coloring of the 'add' and 'delete' buttons helps a bit though, mirroring what the vanilla interfaces do.

The less obvious one is very interesting to me. There's one action button that stands out with the old design. It's the first one, as it says 'New *Subfactory*', while all the others just imply that their action relates to a subfactory. Not a big deal, you might think, or maybe an oversight when building the interface on my part. It would be more logical and have better symmetry to omit it from every button. Just leaving it there though has a subconcious effect on the user though: They internalize that what they are putting together is called a *subfactory*. Nowhere else in the main interface is is called that, yet everyone using the mod knows what a subfactory is, because the button implies it. This allows me to freely use this terminology elsewhere in tooltips and descriptions without having to explain what it is every time, which is very powerful. Building this kind of shared language is important in my opinion, both when using the interface and for communication about bugs and features between developer and user.

This example in particular illustrates the trade-off nature of design quite well I think. If I can talk about how the old interface is better for two paragraphs, why would I want to change it? Well, it's a trade-off. I used my judgement to decide that despite the things that get worse, the end result is better in aggregate. It's also important to note that you can't view these changes in isolation. Making this part a slight bit worse is a good trade-off if it allows another part (like the subfactory buttons below) to be much better.

### Subfactory Buttons

{% include compare.html id="2" width="2856px" height="1754px" old="https://media.alt-f4.blog/ALTF4/17/old_subfactory_buttons.png" new="https://media.alt-f4.blog/ALTF4/17/new_subfactory_buttons.png"  %}

The subfactory buttons. Oh the subfactory buttons. They allow you to select and organize the different subfactories you have. They caused many headaches over the past two years, and I'm very glad to finally get rid of them. They have been visually unchanged since the beginning, and although their implementation changed a couple times, they've always been a giant pile of hacks. Even though this is not entirely design-related, I need to share my pain a bit, and I think it's interesting to get a look behind the curtain of how a hack comes to be.

You might notice that the buttons are using a monospaced font. They are the only type of button in the whole interface to do so, and it's not an inspired design decision from my part, but rather born out of necessity. See, the way I integrated these button into the interface posed problems that needed some rather 'creative' workarounds.

The most significant of them is that I need to know when to start a new line of buttons because the first one is filled up. Factorio doesn't offer any way to do that automatically. To that end, I needed to know how wide every button is. This is not trivial, as their length depends on what names the user chooses. The game won't tell me, so I need to calculate the width of the text on those buttons.

My first, naive attempt used a non-monospaced font. I foolishly determined the pixel width of every individual letter that could be used for the font I would be using. Then, I dynamically added up the width of all the actual letters for every button. If I had known about [kerning](https://en.wikipedia.org/wiki/Kerning) at that time, I would have known to not attempt this in the first place. Check out the wikipedia article for more detail, but essentially, the distance between letters in a word are adjusted dynamically so the text looks 'right' to us, as you see [here](https://d2ct9xspam8wud.cloudfront.net/blog/2020/02/25115500/negative-space-kerning.png). What this means is that it's totally impractical to predict the width of words for non-monospaced fonts. Out the window goes that idea.

Determined to work this out, I switched to using [monospaced fonts](https://en.wikipedia.org/wiki/Monospaced_font), which don't have this kerning problem; every letter takes up the same amount of space every time, guaranteed. That's what I needed, and after a lot of fiddling, it actually allowed me to calculate the width of the buttons accurately, making my very convoluted list of subfactories possible. In retrospect, I should have just tried to find an alternative design instead of diving into this mess. The lesson here is that sometimes, it's worth to forgo a certain design if the implementation ends up being too complicated and/or stupid.

Now, the actual design considerations for this change are quite simple in this case: I needed to save some vertical space. These buttons take up a lot of it, especially if you have enough subfactories to fill out a second row. Transforming them into a vertical list both solves all of the technical problems I brought up in one fell swoop while also just being a more natural 'shape'. The GUI element they are in is called a *list*box, after all.

At this point, I want to go into *why* exactly more vertical space is a central aim in this redesign. I mentioned it before, and there are quite a few arguments for it. For one, the recipe rows are the main content you want to see and interact with, so it just makes sense to get as many of them on screen at once as possible. All the other parts of the interface, and especially the list of subfactories, is secondary.

Another reason to 'verticalize' the subfactory list has to do with optimizing for screen ratios. Modern screens are 16:9 or even wider, meaning they are wider than they are tall. This means vertical space is at a bigger premium than horizontal space. If you can move something to take up more horizontal space instead of vertical space, that's likely a more efficient use of your canvas. This is especially effective in this case as recipe rows don't actually need the whole width of the dialog, wasting some horizontal space in most cases anyways. Thus, we can gain vertical space without losing anything by giving up some of the horizontal real estate, which is obviously a favorable trade-off.

### Item Boxes

{% include compare.html id="3" width="2856px" height="1754px" old="https://media.alt-f4.blog/ALTF4/17/old_item_boxes.png" new="https://media.alt-f4.blog/ALTF4/17/new_item_boxes.png"  %}

Lastly, let's take a look at the item boxes, which includes the info pane on the left in the old design. They give an overview of the net input/output of your subfactory, with the info pane containing some auxiliary information and functionality. The old solution was pretty elegant, but turned out to be very inflexible. Here again, it takes up a lot of vertical space, which as you know by now, is at a premium.

The first point of contention in regards to flexibility is the fixed height of all four sections; They have to be the same size due to the way the layout is set up. As we see in the screenshot, the boxes containing items are nowhere near filled up, wasting tons of space just because the info pane has certain dimensions. In the new design, the interface is free to scale down those boxes if there's no need for them to be larger. This frees up, you guessed it, vertical real estate, which we love. I also made it so the width of the individual boxes can be adjusted in a flexible way, allowing the ingredient box to be twice as large as its siblings, which makes sense as you'll often have more ingredients than products or byproducts.

The other point regarding flexibility is the content of the info pane. In the old design, its size directly determines how big the item boxes are, and in turn how much vertical space they take up. This means that adding anything to it wastes a whole row of content. I settled on four info pane rows because that's all I could afford. The new design allows me to use as many rows for the info pane as I want, since stunting the subfactory list is not that big of a deal.

### Conclusion

As you probably noticed by now, the most important goals for this redesign were more flexibility and vertical space. I made use of several different ways to accomplish this, often with significant trade-offs that needed to be carefully balanced. Sometimes though, you'll hit upon that perfect change that just works out in all aspects, which feels great. I hope you enjoyed this look at the considerations you need to make when designing an interface.

You can check out Factory Planner on the [mod portal](https://mods.factorio.com/mod/factoryplanner) (the update containing these changes will be out later today), or join my [Discord](https://discord.gg/ABqNEQc) if you want to have a chat with me. I'm always happy to talk about these kinds of things. Also, huge shoutout to [Raiguard](https://mods.factorio.com/user/Raiguard) who is a bit of a trailblazer for the post-0.17 visual design. He helped me getting comfortable with the new design elements, and gracefully nitpicked my first attempts, which is genuinely very helpful. [This](https://trello-attachments.s3.amazonaws.com/5d0fed742a37663cd876de62/5dac30100cb9ea5ce81b2097/71a611eebb978b96f69534e4997e0400/image.png) was his initial idea of what the interface might look like, which I morphed into the current design. Why I made the changes I made is another topic altogether though.
